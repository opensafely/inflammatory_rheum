----------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory_rheum/
> logs/cleaning_dataset.log
  log type:  text
 opened on:  20 May 2025, 13:05:46

. 
. di "$projectdir"
C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory_rheum

. di "$logdir"
C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory_rheum/logs

. 
. import delimited "$projectdir/output/dataset.csv", clear
file C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY
NEIAA\inflammatory_rheum/output/dataset.csv not found
r(601);

end of do-file

r(601);

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. 
. import delimited "$projectdir/output/dataset.csv", clear
(encoding automatically selected: ISO-8859-1)
(88 vars, 328 obs)

. 
. **Set Ado file path
. adopath + "$projectdir/analysis/extra_ados"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\documents/"
  [5]  (PLUS)      "C:\users\PUBLIC\documents/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/an
> alysis/extra_ados"
  [8]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory
> _rheum/analysis/extra_ados"

. 
. **Set index dates ===========================================================*/
. global year_preceding = "01/04/2015"

. global start_date = "01/04/2016"

. global end_date = "31/03/2025"

. 
. **Conversion for dates====================================================*
. ***Variables ending in _date that are string
. ds *_date, has(type string)
eia_code_d~e  undiff_cod~e  rheum~y_date  ~erheum_date  metho~j_date  rtt_op_ref~e
ra_code_date  creatinine~e  rheum~2_date  l~ecode_date  sulfasalaz~e
psa_code_d~e  rf_date       rheum~3_date  leflunomid~e  hydroxychl~e
anksp_code~e  rheum~t_date  rheum~4_date  metho~e_date  rtt_cl_ref~e

. local string_dates `r(varlist)'

. foreach var of local string_dates {
  2.     gen `var'_num = date(`var', "YMD")
  3.     format `var'_num %td
  4.     order `var'_num, after(`var')
  5.     drop `var'
  6.     rename `var'_num `var'
  7. }
(67 missing values generated)
(295 missing values generated)
(300 missing values generated)
(322 missing values generated)
(327 missing values generated)
(327 missing values generated)
(320 missing values generated)
(311 missing values generated)
(322 missing values generated)
(302 missing values generated)
(295 missing values generated)
(327 missing values generated)
(300 missing values generated)
(254 missing values generated)
(193 missing values generated)
(119 missing values generated)
(232 missing values generated)
(205 missing values generated)
(319 missing values generated)
(320 missing values generated)

. 
. ***Variables ending in _date that are numeric
. foreach var of varlist *_date {
  2.     capture confirm string variable `var'
  3.     if _rc != 0 {
  4.         format `var' %td
  5.     }
  6. }

. 
. ***Create binary indicator for each
. ds *_date
eia_code_d~e  undiff_cod~e  rheum~t_date  rheum~4_date  l~fcode_date  sulfasalaz~e
ra_code_date  creatinine~e  rheum~y_date  ~erheum_date  leflunomid~e  hydroxychl~e
psa_code_d~e  rf_date       rheum~2_date  l~ecode_date  metho~e_date  rtt_cl_ref~e
anksp_code~e  bmi_date      rheum~3_date  ~frheum_date  metho~j_date  rtt_op_ref~e

. local dates `r(varlist)'

. foreach var of local dates {
  2.         local newvar =  substr("`var'", 1, length("`var'") - 5)
  3.         gen `newvar' = (`var'!=. )
  4.         order `newvar', after(`var')
  5. }
variable creatinine already defined
r(110);

end of do-file

r(110);

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. import delimited "$projectdir/output/dataset.csv", clear
(encoding automatically selected: ISO-8859-1)
(88 vars, 374 obs)

. 
. **Set Ado file path
. adopath + "$projectdir/analysis/extra_ados"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\documents/"
  [5]  (PLUS)      "C:\users\PUBLIC\documents/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/an
> alysis/extra_ados"
  [8]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory
> _rheum/analysis/extra_ados"

. 
. **Set index dates ===========================================================*/
. global year_preceding = "01/04/2015"

. global start_date = "01/04/2016"

. global end_date = "31/03/2025"

. 
. **Conversion for dates====================================================*
. ***Variables ending in _date that are string
. ds *_date, has(type string)
eia_code_d~e  cva_before~e  chd_after_~e  depr_after~e  rheum~4_date  rtt_cl_sta~e
ra_code_date  lung_ca_be~e  dm_after_d~e  osteop_aft~e  rheum~e_date  rtt_cl_ref~e
psa_code_d~e  solid_ca_b~e  ild_after_~e  dem_after_~e  ~erheum_date  rtt_cl_end~e
anksp_code~e  haem_ca_be~e  copd_after~e  creatinin~te  l~ecode_date  rtt_op_sta~e
undiff_cod~e  ckd_before~e  cva_after_~e  rf_date       leflunomid~e  rtt_op_ref~e
chd_before~e  depr_befor~e  lung_ca_af~e  r~_appt_date  metho~e_date  rtt_op_end~e
dm_before_~e  osteop_bef~e  solid_ca_a~e  rheum~y_date  metho~j_date
ild_before~e  frac_befor~e  haem_ca_af~e  rheum~2_date  sulfasalaz~e
copd_befor~e  dem_before~e  ckd_after_~e  rheum~3_date  hydroxychl~e

. local string_dates `r(varlist)'

. foreach var of local string_dates {
  2.     gen `var'_num = date(`var', "YMD")
  3.     format `var'_num %td
  4.     order `var'_num, after(`var')
  5.     drop `var'
  6.     rename `var'_num `var'
  7. }
(74 missing values generated)
(339 missing values generated)
(343 missing values generated)
(366 missing values generated)
(311 missing values generated)
(337 missing values generated)
(311 missing values generated)
(361 missing values generated)
(324 missing values generated)
(291 missing values generated)
(40 missing values generated)
(213 missing values generated)
(297 missing values generated)
(353 missing values generated)
(369 missing values generated)
(372 missing values generated)
(311 missing values generated)
(363 missing values generated)
(372 missing values generated)
(370 missing values generated)
(373 missing values generated)
(367 missing values generated)
(366 missing values generated)
(259 missing values generated)
(348 missing values generated)
(366 missing values generated)
(368 missing values generated)
(372 missing values generated)
(366 missing values generated)
(373 missing values generated)
(373 missing values generated)
(366 missing values generated)
(356 missing values generated)
(368 missing values generated)
(343 missing values generated)
(335 missing values generated)
(373 missing values generated)
(373 missing values generated)
(346 missing values generated)
(285 missing values generated)
(220 missing values generated)
(133 missing values generated)
(260 missing values generated)
(234 missing values generated)
(364 missing values generated)
(364 missing values generated)
(364 missing values generated)
(365 missing values generated)
(365 missing values generated)
(365 missing values generated)

. 
. ***Variables ending in _date that are numeric
. foreach var of varlist *_date {
  2.     capture confirm string variable `var'
  3.     if _rc != 0 {
  4.         format `var' %td
  5.     }
  6. }

. 
. ***Create binary indicator for each
. ds *_date
eia_code_d~e  lung_ca_be~e  ild_after_~e  dem_after_~e  rheum~e_date  rtt_cl_sta~e
ra_code_date  solid_ca_b~e  copd_after~e  creatinin~te  ~erheum_date  rtt_cl_ref~e
psa_code_d~e  haem_ca_be~e  cva_after_~e  rf_date       l~ecode_date  rtt_cl_end~e
anksp_code~e  ckd_before~e  lung_ca_af~e  bmi_date      ~frheum_date  rtt_op_sta~e
undiff_cod~e  depr_befor~e  solid_ca_a~e  r~_appt_date  l~fcode_date  rtt_op_ref~e
chd_before~e  osteop_bef~e  haem_ca_af~e  rheum~y_date  leflunomid~e  rtt_op_end~e
dm_before_~e  frac_befor~e  ckd_after_~e  rheum~2_date  metho~e_date
ild_before~e  dem_before~e  depr_after~e  rheum~3_date  metho~j_date
copd_befor~e  chd_after_~e  osteop_aft~e  rheum~4_date  sulfasalaz~e
cva_before~e  dm_after_d~e  frac_after~e  r~eappt_date  hydroxychl~e

. local dates `r(varlist)'

. foreach var of local dates {
  2.         local newvar =  substr("`var'", 1, length("`var'") - 5)
  3.         gen `newvar' = (`var'!=. )
  4.         order `newvar', after(`var')
  5. }

. 
. /*
> **Will also need to amend conversion for biologic dates ==============================
> ======================*
> ***Some dates are given with month/year only, so adding day 15 to enable them to be pr
> ocessed as dates 
> 
> foreach var of varlist   abatacept_date                                         ///
>                                                  adalimumab_date                      
>                   ///     
>                                                  baricitinib_date                     
>                   ///
>                                                  certolizumab_date                    
>                   ///
>                                                  etanercept_date                      
>                   ///
>                                                  golimumab_date                       
>                   ///
>                                                  guselkumab_date                      
>                   ///     
>                                                  infliximab_date                      
>                   ///
>                                                  ixekizumab_date                      
>                   ///
>                                                  methotrexate_hcd_date                
>           ///
>                                                  rituximab_date                       
>                   ///
>                                                  sarilumab_date                       
>                   ///
>                                                  secukinumab_date                     
>                   ///     
>                                                  tocilizumab_date                     
>                   ///
>                                                  tofacitinib_date                     
>                   ///
>                                                  upadacitinib_date                    
>                   ///
>                                                  ustekinumab_date                     
>                   ///
>                                                  {
>                                                         
>                 capture confirm string variable `var'
>                 if _rc!=0 {
>                         assert `var'==.
>                         rename `var' `var'_date
>                 }
>         
>                 else {
>                                 replace `var' = `var' + "-15"
>                                 rename `var' `var'_dstr
>                                 replace `var'_dstr = " " if `var'_dstr == "-15"
>                                 gen `var'_date = date(`var'_dstr, "YMD") 
>                                 order `var'_date, after(`var'_dstr)
>                                 drop `var'_dstr
>                 }
>         
>         format `var'_date %td
> }
> */
.                                          
. **Create and label variables =========================================================
> ==*/
. 
. ***Age variables
. *Create categorised age
. drop if age<18 & age !=.
(0 observations deleted)

. drop if age>109 & age !=.
(4 observations deleted)

. drop if age==.
(0 observations deleted)

. lab var age "Age at diagnosis"

. 
. recode age 18/39.9999 = 1 /// 
>            40/49.9999 = 2 ///
>                    50/59.9999 = 3 ///
>                60/69.9999 = 4 ///
>                    70/79.9999 = 5 ///
>                    80/max = 6, gen(agegroup) 
(370 differences between age and agegroup)

. 
. label define agegroup   1 "18-39" ///
>                                                 2 "40-49" ///
>                                                 3 "50-59" ///
>                                                 4 "60-69" ///
>                                                 5 "70-79" ///
>                                                 6 "80+"

.                                                 
. label values agegroup agegroup

. lab var agegroup "Age group"

. tab agegroup, missing

  Age group |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-39 |        160       43.24       43.24
      40-49 |         53       14.32       57.57
      50-59 |         33        8.92       66.49
      60-69 |         23        6.22       72.70
      70-79 |         32        8.65       81.35
        80+ |         69       18.65      100.00
------------+-----------------------------------
      Total |        370      100.00

. order agegroup, after(age)

. 
. ***Sex
. gen male = 1 if sex == "male"
(197 missing values generated)

. replace male = 0 if sex == "female"
(197 real changes made)

. lab var male "Male"

. lab define male 0 "No" 1 "Yes", modify

. lab val male male

. tab male, missing

       Male |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        197       53.24       53.24
        Yes |        173       46.76      100.00
------------+-----------------------------------
      Total |        370      100.00

. order male, after(sex)

. 
. ***Ethnicity
. gen ethnicity_n = 1 if ethnicity == "White"
(341 missing values generated)

. replace ethnicity_n = 2 if ethnicity == "Asian or Asian British"
(19 real changes made)

. replace ethnicity_n = 3 if ethnicity == "Black or Black British"
(25 real changes made)

. replace ethnicity_n = 4 if ethnicity == "Mixed"
(14 real changes made)

. replace ethnicity_n = 5 if ethnicity == "Chinese or Other Ethnic Groups"
(29 real changes made)

. replace ethnicity_n = 6 if ethnicity == "Unknown"
(254 real changes made)

. 
. 
. label define ethnicity_n        1 "White"                                             
>   ///
>                                                         2 "Asian or Asian British"    
>           ///
>                                                         3 "Black or Black British"    
>   ///
>                                                         4 "Mixed"                     
>                           ///
>                                                         5 "Chinese or Other Ethnic Gro
> ups" ///
>                                                         6 "Not known", modify

.                                                         
. label values ethnicity_n ethnicity_n

. lab var ethnicity_n "Ethnicity"

. tab ethnicity_n, missing

                     Ethnicity |      Freq.     Percent        Cum.
-------------------------------+-----------------------------------
                         White |         29        7.84        7.84
        Asian or Asian British |         19        5.14       12.97
        Black or Black British |         25        6.76       19.73
                         Mixed |         14        3.78       23.51
Chinese or Other Ethnic Groups |         29        7.84       31.35
                     Not known |        254       68.65      100.00
-------------------------------+-----------------------------------
                         Total |        370      100.00

. drop ethnicity

. rename ethnicity_n ethnicity 

. 
. /*
> ***STP 
> rename stp stp_old
> bysort stp_old: gen stp = 1 if _n==1
> replace stp = sum(stp) //
> drop stp_old
> */
. 
. ***Regions
. encode region, gen(nuts_region)

. tab region, missing

                  region |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
                         |         84       22.70       22.70
                    East |         43       11.62       34.32
           East Midlands |         22        5.95       40.27
                  London |         31        8.38       48.65
              North East |         32        8.65       57.30
              North West |         30        8.11       65.41
              South East |         32        8.65       74.05
              South West |         34        9.19       83.24
           West Midlands |         36        9.73       92.97
Yorkshire and The Humber |         26        7.03      100.00
-------------------------+-----------------------------------
                   Total |        370      100.00

. replace region="Not known" if region==""
(84 real changes made)

. gen region_nospace=region

. replace region_nospace="SouthWest" if region=="South West"
(34 real changes made)

. replace region_nospace="EastMidlands" if region=="East Midlands"
(22 real changes made)

. replace region_nospace="East" if region=="East"
(0 real changes made)

. replace region_nospace="London" if region=="London"
(0 real changes made)

. replace region_nospace="NorthEast" if region=="North East"
(32 real changes made)

. replace region_nospace="NorthWest" if region=="North West"
(30 real changes made)

. replace region_nospace="SouthEast" if region=="South East"
(32 real changes made)

. replace region_nospace="WestMidlands" if region=="West Midlands"
(36 real changes made)

. replace region_nospace="YorkshireandTheHumber" if region=="Yorkshire and The Humber"
(26 real changes made)

. 
. ***IMD
. gen imd = 1 if imd_quintile == "1 (most deprived)"
(303 missing values generated)

. replace imd = 2 if imd_quintile == "2"
(55 real changes made)

. replace imd = 3 if imd_quintile == "3"
(51 real changes made)

. replace imd = 4 if imd_quintile == "4"
(53 real changes made)

. replace imd = 5 if imd_quintile == "5 (least deprived)"
(57 real changes made)

. replace imd = .u if imd_quintile == "Unknown"
(87 real changes made, 87 to missing)

. lab var imd "Index of multiple deprivation"

. lab define imd 1 "1 (most deprived)" ///
>                            2 "2" ///
>                            3 "3" ///
>                            4 "4" ///
>                            5 "5 (least deprived)" ///
>                            .u "Not known"

. lab val imd imd                    

. tab imd, missing

 Index of multiple |
       deprivation |      Freq.     Percent        Cum.
-------------------+-----------------------------------
 1 (most deprived) |         67       18.11       18.11
                 2 |         55       14.86       32.97
                 3 |         51       13.78       46.76
                 4 |         53       14.32       61.08
5 (least deprived) |         57       15.41       76.49
         Not known |         87       23.51      100.00
-------------------+-----------------------------------
             Total |        370      100.00

. drop imd_quintile

. 
. ***Body Mass Index
. *Recode strange values 
. replace bmi_value = . if bmi_value == 0 
(0 real changes made)

. replace bmi_value = . if !inrange(bmi_value, 10, 80)
(0 real changes made)

. 
. *Restrict to within 10 years of EIA diagnosis date and aged>16 
. gen bmi_time = (eia_code_date - bmi_date)/365.25
(370 missing values generated)

. gen bmi_age = age - bmi_time
(370 missing values generated)

. replace bmi_value = . if bmi_age < 16 
(0 real changes made)

. replace bmi_value = . if bmi_time > 10 & bmi_time != . 
(0 real changes made)

. 
. *Set to missing if no date, and vice versa 
. replace bmi_value = . if bmi_date == . 
(0 real changes made)

. replace bmi_date = . if bmi_value == . 
(0 real changes made)

. replace bmi_time = . if bmi_value == . 
(0 real changes made)

. replace bmi_age = . if bmi_value == . 
(0 real changes made)

. 
. *Create BMI categories
. gen     bmicat = .
(370 missing values generated)

. recode  bmicat . = 1 if bmi_value < 18.5
(0 changes made to bmicat)

. recode  bmicat . = 2 if bmi_value < 25
(0 changes made to bmicat)

. recode  bmicat . = 3 if bmi_value < 30
(0 changes made to bmicat)

. recode  bmicat . = 4 if bmi_value < 35
(0 changes made to bmicat)

. recode  bmicat . = 5 if bmi_value < 40
(0 changes made to bmicat)

. recode  bmicat . = 6 if bmi_value < .
(0 changes made to bmicat)

. replace bmicat = .u if bmi_value >= .
(370 real changes made, 370 to missing)

. 
. label define bmicat 1 "Underweight (<18.5)"     ///
>                                         2 "Normal (18.5-24.9)"          ///
>                                         3 "Overweight (25-29.9)"        ///
>                                         4 "Obese I (30-34.9)"           ///
>                                         5 "Obese II (35-39.9)"          ///
>                                         6 "Obese III (40+)"                     ///
>                                         .u "Not known"

.                                         
. label values bmicat bmicat

. lab var bmicat "BMI"

. tab bmicat, missing

                 BMI |      Freq.     Percent        Cum.
---------------------+-----------------------------------
           Not known |        370      100.00      100.00
---------------------+-----------------------------------
               Total |        370      100.00

. order bmicat, after (bmi_value)

. drop bmi_age bmi_time

. 
. *Create less granular categorisation
. recode bmicat 1/3 .u = 1 4 = 2 5 = 3 6 = 4, gen(obese4cat)
(370 differences between bmicat and obese4cat)

. 
. label define obese4cat  1 "No record of obesity"        ///
>                                                 2 "Obese I (30-34.9)"           ///
>                                                 3 "Obese II (35-39.9)"          ///
>                                                 4 "Obese III (40+)"             

. 
. label values obese4cat obese4cat

. order obese4cat, after(bmicat)

. 
. ***Smoking 
. label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Not known"

. 
. gen     smoke = 1  if smoking_status == "N"
(369 missing values generated)

. replace smoke = 2  if smoking_status == "E"
(133 real changes made)

. replace smoke = 3  if smoking_status == "S"
(235 real changes made)

. replace smoke = .u if smoking_status == "M"
(1 real change made, 1 to missing)

. replace smoke = .u if smoking_status == "" 
(0 real changes made)

. 
. label values smoke smoke

. lab var smoke "Smoking status"

. drop smoking_status

. tab smoke, missing

    Smoking |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
      Never |          1        0.27        0.27
     Former |        133       35.95       36.22
    Current |        235       63.51       99.73
  Not known |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. *Create non-missing 3-category variable for current smoking (assumes missing smoking i
> s never smoking)
. recode smoke .u = 1, gen(smoke_nomiss)
(1 differences between smoke and smoke_nomiss)

. order smoke_nomiss, after(smoke)

. label values smoke_nomiss smoke

. 
. **Clinical comorbidities
. ***Nb. not using creatinine of HBA1c values for now, just codes
. foreach disease in ckd dm ild copd cva lung_ca solid_ca haem_ca depr osteop frac dem c
> hd {
  2.         label define `disease'_before 0 "No" 1 "Yes"
  3.         label values `disease'_before `disease'_before
  4.         tab `disease'_before, missing
  5.         label define `disease'_after 0 "No" 1 "Yes"
  6.         label values `disease'_after `disease'_after
  7.         tab `disease'_after, missing
  8.         gen `disease'_new = 1 if (`disease'_after == 1 & `disease'_before == 0)
  9.         recode `disease'_new .=0
 10.         label define `disease'_new 0 "No" 1 "Yes"
 11.         label values `disease'_new `disease'_new
 12.         tab `disease'_new, missing
 13.         order `disease'_new, after(`disease'_after)
 14. }

 ckd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        294       79.46       79.46
        Yes |         76       20.54      100.00
------------+-----------------------------------
      Total |        370      100.00

  ckd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to ckd_new)

    ckd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

  dm_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        334       90.27       90.27
        Yes |         36        9.73      100.00
------------+-----------------------------------
      Total |        370      100.00

   dm_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to dm_new)

     dm_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 ild_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  ild_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        366       98.92       98.92
        Yes |          4        1.08      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to ild_new)

    ild_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

copd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        357       96.49       96.49
        Yes |         13        3.51      100.00
------------+-----------------------------------
      Total |        370      100.00

 copd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00
(369 missing values generated)
(369 changes made to copd_new)

   copd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

 cva_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        321       86.76       86.76
        Yes |         49       13.24      100.00
------------+-----------------------------------
      Total |        370      100.00

  cva_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        363       98.11       98.11
        Yes |          7        1.89      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to cva_new)

    cva_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        287       77.57       77.57
        Yes |         83       22.43      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to lung_ca_new)

lung_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_be |
       fore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |         39       10.54       10.54
        Yes |        331       89.46      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_af |
        ter |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        256       69.19       69.19
        Yes |        114       30.81      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to solid_ca_new)

solid_ca_ne |
          w |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        209       56.49       56.49
        Yes |        161       43.51      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        344       92.97       92.97
        Yes |         26        7.03      100.00
------------+-----------------------------------
      Total |        370      100.00
(359 missing values generated)
(359 changes made to haem_ca_new)

haem_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00

depr_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        349       94.32       94.32
        Yes |         21        5.68      100.00
------------+-----------------------------------
      Total |        370      100.00

 depr_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to depr_new)

   depr_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_befo |
         re |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_afte |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to osteop_new)

 osteop_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

frac_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 frac_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00
(370 missing values generated)
(370 changes made to frac_new)

   frac_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

 dem_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  dem_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to dem_new)

    dem_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

 chd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  chd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00
(361 missing values generated)
(361 changes made to chd_new)

    chd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        361       97.57       97.57
        Yes |          9        2.43      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. lab var ckd_before "Chronic kidney disease"

. lab var ckd_after "Chronic kidney disease"

. lab var ckd_new "Chronic kidney disease"

. lab var dm_before "Type 2 diabetes mellitus"

. lab var dm_after "Type 2 diabetes mellitus"

. lab var dm_new "Type 2 diabetes mellitus"

. lab var ild_before "Interstitial lung disease"

. lab var ild_after "Interstitial lung disease"

. lab var ild_new "Interstitial lung disease"

. lab var copd_before "COPD"

. lab var copd_after "COPD"

. lab var copd_new "COPD"

. lab var lung_ca_before "Lung cancer"

. lab var lung_ca_after "Lung cancer"

. lab var lung_ca_new "Lung cancer"

. lab var solid_ca_before "Solid organ cancer"

. lab var solid_ca_after "Solid organ cancer"

. lab var solid_ca_new "Solid organ cancer"

. lab var haem_ca_before "Haematological cancer"

. lab var haem_ca_after "Haematological cancer"

. lab var haem_ca_new "Haematological cancer"

. lab var depr_before "Depression"

. lab var depr_after "Depression"

. lab var depr_new "Depression"

. lab var osteop_before "Osteoporosis"

. lab var osteop_after "Osteoporosis"

. lab var osteop_new "Osteoporosis"

. lab var frac_before "Fragility fracture"

. lab var frac_after "Fragility fracture"

. lab var frac_new "Fragility fracture"

. lab var dem_before "Dementia"

. lab var dem_after "Dementia"

. lab var dem_new "Dementia"

. lab var chd_before "Coronary heart disease"

. lab var chd_after "Coronary heart disease"

. lab var chd_new "Coronary heart disease"

. 
. lab var rheum_appt "Rheumatology appointment"

. lab define rheum_appt 0 "No" 1 "Yes", modify

. lab val rheum_appt rheum_appt

. 
. **All patients should have EIA code===================================================
> ==========*/
. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

. keep if eia_code==1
(0 observations deleted)

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. 
. **Check first rheum appt date was before diagnostic code date=========================
> =========*/
. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before EIA code appeared in GP recor
> d; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

. tab rheum_appt if rheum_appt_date>eia_code_date & rheum_appt_date!=. //confirm proport
> ion who had first rheum appt (i.e. not missing) after EIA code

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |          1      100.00      100.00
------------+-----------------------------------
      Total |          1      100.00

. tab rheum_appt if rheum_appt_date>(eia_code_date + 30) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 30 days after EIA code 
no observations

. tab rheum_appt if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 60 days after EIA code - should be none
no observations

. replace rheum_appt=0 if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //re
> place as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. replace rheum_appt_date=. if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=.
>  //replace as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. 
. **As above - for differently specified rheumatology appointments
. replace rheum_appt_any=0 if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt_any_
> date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt_any_date=. if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt
> _any_date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2=0 if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2_date=. if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date
> !=. //replace as missing those appts >60 days after EIA code_yea
(0 real changes made)

. replace rheum_appt3=0 if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt3_date=. if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date
> !=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt4=0 if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date!=. /
> /replace as missing those appts >60 days after EIA code
(8 real changes made)

. replace rheum_appt4_date=. if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date
> !=. //replace as missing those appts >60 days after EIA code
(8 real changes made, 8 to missing)

. 
. *Check if first csDMARD/biologic was after rheum appt date============================
> =========================*/
. **csDMARDs (not including high cost MTX; wouldn't be shared care)
. gen csdmard=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methotrexa
> te_inj==1 | sulfasalazine==1
(76 missing values generated)

. recode csdmard .=0 
(76 changes made to csdmard)

. tab csdmard, missing

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |         76       20.54       20.54
          1 |        294       79.46      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. **Date of first csDMARD script (not including high cost MTX prescriptions)
. gen csdmard_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date, met
> hotrexate_inj_date, sulfasalazine_date)
(76 missing values generated)

. format %td csdmard_date

. 
. /*
> **csDMARDs (including high cost MTX)
> gen csdmard_hcd=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methot
> rexate_inj==1 | methotrexate_hcd==1 | sulfasalazine==1
> recode csdmard_hcd .=0 
> tab csdmard_hcd, missing
> 
> **Date of first csDMARD script (including high cost MTX prescriptions)
> gen csdmard_hcd_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date,
>  methotrexate_inj_date, methotrexate_hcd_date, sulfasalazine_date)
> format %td csdmard_hcd_date
> 
> **Biologic use
> gen biologic=1 if abatacept==1 | adalimumab==1 | baricitinib==1 | certolizumab==1 | et
> anercept==1 | golimumab==1 | guselkumab==1 | infliximab==1 | ixekizumab==1 | rituximab
> ==1 | sarilumab==1 | secukinumab==1 | tocilizumab==1 | tofacitinib==1 | upadacitinib==
> 1 | ustekinumab==1 
> recode biologic .=0
> tab biologic, missing
> 
> **Date of first biologic script
> gen biologic_date=min(abatacept_date, adalimumab_date, baricitinib_date, certolizumab_
> date, etanercept_date, golimumab_date, guselkumab_date, infliximab_date, ixekizumab_da
> te, rituximab_date, sarilumab_date, secukinumab_date, tocilizumab_date, tofacitinib_da
> te, upadacitinib_date, ustekinumab_date)
> format %td biologic_date
> */
. 
. **Exclude if first csdmard was more than 60 days before first rheum appt
. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & csdmard_date<rheum_appt_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_d
> ate 

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_date //d
> rop if first csDMARD more than 60 days before first attendance at a rheum appt 
(7 observations deleted)

. tab csdmard if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmar
> d_date + 60)<rheum_appt_any_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmard_date 
> + 60)<rheum_appt_any_date //drop if first csDMARD more than 60 days before first captu
> red rheum appt that did not have first attendance tag
(7 observations deleted)

. 
. /*
> tab biologic if rheum_appt_date!=. & biologic_date!=. & biologic_date<rheum_appt_date 
> tab biologic if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_app
> t_date 
> drop if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_appt_date /
> /drop if first biologic more than 60 days before first rheum_appt_date
> tab biologic if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biol
> ogic_date + 60)<rheum_appt_any_date
> drop if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biologic_dat
> e + 60)<rheum_appt_any_date //drop if first biologic more than 60 days before first ca
> ptured rheum appt that did not have first attendance tag
> */
. 
. *Generate diagnosis date==============================================================
> =*/
. **Use diagnostic code date (in GP record) as diagnosis date
. gen diagnosis_date=eia_code_date

. format diagnosis_date %td

. 
. *Refine diagnostic window=============================================================
> */
. **Keep patients with diagnosis date after start date and before end date - should be n
> one dropped
. keep if diagnosis_date>=date("$start_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. keep if diagnosis_date<date("$end_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. 
. *Include only most recent EIA sub-diagnosis===========================================
> ==*/
. replace ra_code =0 if psa_code_date > ra_code_date & psa_code_date !=.
(0 real changes made)

. replace ra_code =0 if anksp_code_date > ra_code_date & anksp_code_date !=.
(0 real changes made)

. replace ra_code =0 if undiff_code_date > ra_code_date & undiff_code_date !=.
(0 real changes made)

. replace psa_code =0 if ra_code_date >= psa_code_date & ra_code_date !=.
(0 real changes made)

. replace psa_code =0 if anksp_code_date > psa_code_date & anksp_code_date !=.
(0 real changes made)

. replace psa_code =0 if undiff_code_date > psa_code_date & undiff_code_date !=.
(0 real changes made)

. replace anksp_code =0 if psa_code_date >= anksp_code_date & psa_code_date !=.
(0 real changes made)

. replace anksp_code =0 if ra_code_date >= anksp_code_date & ra_code_date !=.
(0 real changes made)

. replace anksp_code =0 if undiff_code_date > anksp_code_date & undiff_code_date !=.
(0 real changes made)

. replace undiff_code =0 if ra_code_date >= undiff_code_date & ra_code_date !=.
(0 real changes made)

. replace undiff_code =0 if psa_code_date >= undiff_code_date & psa_code_date !=.
(0 real changes made)

. replace undiff_code =0 if anksp_code_date >= undiff_code_date & anksp_code_date !=.
(0 real changes made)

. gen eia_diagnosis=1 if ra_code==1
(67 missing values generated)

. replace eia_diagnosis=2 if psa_code==1
(31 real changes made)

. replace eia_diagnosis=3 if anksp_code==1
(29 real changes made)

. replace eia_diagnosis=4 if undiff_code==1
(7 real changes made)

. lab define eia_diagnosis 1 "RA" 2 "PsA" 3 "AxSpA" 4 "Undiff IA", modify

. lab val eia_diagnosis eia_diagnosis

. tab eia_diagnosis, missing

eia_diagnos |
         is |      Freq.     Percent        Cum.
------------+-----------------------------------
         RA |        289       81.18       81.18
        PsA |         31        8.71       89.89
      AxSpA |         29        8.15       98.03
  Undiff IA |          7        1.97      100.00
------------+-----------------------------------
      Total |        356      100.00

. drop if eia_diagnosis==. //should be none
(0 observations deleted)

. 
. decode eia_diagnosis, gen(eia_diag)

. replace eia_diag="Undiff_IA" if eia_diagnosis==4
(7 real changes made)

. 
. *Split into 6-month time windows=========================================*/
. **Month/Year of GP diagnostic code
. gen year_diag=year(eia_code_date)

. format year_diag %ty

. gen month_diag=month(eia_code_date)

. gen mo_year_diagn=ym(year_diag, month_diag)

. format mo_year_diagn %tmMon-CCYY

. generate str16 mo_year_diagn_s = strofreal(mo_year_diagn,"%tmCCYY!mNN")

. lab var mo_year_diagn "Month/Year of Diagnosis"

. lab var mo_year_diagn_s "Month/Year of Diagnosis"

. 
. **Month/Year of rheum appt
. gen year_appt=year(rheum_appt_date) if rheum_appt_date!=.
(355 missing values generated)

. format year_appt %ty

. gen month_appt=month(rheum_appt_date) if rheum_appt_date!=. 
(355 missing values generated)

. gen mo_year_appt=ym(year_appt, month_appt)
(355 missing values generated)

. format mo_year_appt %tmMon-CCYY

. generate str16 mo_year_appt_s = strofreal(mo_year_appt,"%tmCCYY!mNN")

. 
. **Separate into 3-month time windows (for diagnosis date)
. gen diagnosis_3m = qofd(diagnosis_date)

. format diagnosis_3m %tq

. 
end of do-file

. br

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. lab var diagnosis_3m "Time period for diagnosis"

. tab diagnosis_3m, missing

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        1.97        1.97
     2016q3 |          6        1.69        3.65
     2016q4 |         11        3.09        6.74
     2017q1 |          7        1.97        8.71
     2017q2 |          7        1.97       10.67
     2017q3 |         13        3.65       14.33
     2017q4 |          9        2.53       16.85
     2018q1 |         14        3.93       20.79
     2018q2 |         10        2.81       23.60
     2018q3 |         15        4.21       27.81
     2018q4 |         13        3.65       31.46
     2019q1 |          7        1.97       33.43
     2019q2 |         16        4.49       37.92
     2019q3 |          7        1.97       39.89
     2019q4 |          8        2.25       42.13
     2020q1 |         12        3.37       45.51
     2020q2 |          9        2.53       48.03
     2020q3 |         10        2.81       50.84
     2020q4 |         11        3.09       53.93
     2021q1 |         10        2.81       56.74
     2021q2 |          9        2.53       59.27
     2021q3 |         14        3.93       63.20
     2021q4 |         17        4.78       67.98
     2022q1 |          8        2.25       70.22
     2022q2 |          7        1.97       72.19
     2022q3 |          6        1.69       73.88
     2022q4 |          7        1.97       75.84
     2023q1 |         13        3.65       79.49
     2023q2 |          6        1.69       81.18
     2023q3 |          6        1.69       82.87
     2023q4 |         14        3.93       86.80
     2024q1 |         10        2.81       89.61
     2024q2 |         13        3.65       93.26
     2024q3 |         12        3.37       96.63
     2024q4 |          7        1.97       98.60
     2025q1 |          5        1.40      100.00
------------+-----------------------------------
      Total |        356      100.00

. bys eia_diagnosis: tab diagnosis_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        2.42        2.42
     2016q3 |          5        1.73        4.15
     2016q4 |          9        3.11        7.27
     2017q1 |          7        2.42        9.69
     2017q2 |          7        2.42       12.11
     2017q3 |         12        4.15       16.26
     2017q4 |          9        3.11       19.38
     2018q1 |         12        4.15       23.53
     2018q2 |          6        2.08       25.61
     2018q3 |         11        3.81       29.41
     2018q4 |         11        3.81       33.22
     2019q1 |          7        2.42       35.64
     2019q2 |         10        3.46       39.10
     2019q3 |          5        1.73       40.83
     2019q4 |          5        1.73       42.56
     2020q1 |          9        3.11       45.67
     2020q2 |          9        3.11       48.79
     2020q3 |          7        2.42       51.21
     2020q4 |          8        2.77       53.98
     2021q1 |          8        2.77       56.75
     2021q2 |          7        2.42       59.17
     2021q3 |         11        3.81       62.98
     2021q4 |         15        5.19       68.17
     2022q1 |          7        2.42       70.59
     2022q2 |          5        1.73       72.32
     2022q3 |          4        1.38       73.70
     2022q4 |          6        2.08       75.78
     2023q1 |          7        2.42       78.20
     2023q2 |          4        1.38       79.58
     2023q3 |          5        1.73       81.31
     2023q4 |         11        3.81       85.12
     2024q1 |         10        3.46       88.58
     2024q2 |         12        4.15       92.73
     2024q3 |         11        3.81       96.54
     2024q4 |          5        1.73       98.27
     2025q1 |          5        1.73      100.00
------------+-----------------------------------
      Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q4 |          2        6.45        6.45
     2018q2 |          4       12.90       19.35
     2018q3 |          1        3.23       22.58
     2019q2 |          3        9.68       32.26
     2019q3 |          2        6.45       38.71
     2019q4 |          1        3.23       41.94
     2020q1 |          1        3.23       45.16
     2020q3 |          1        3.23       48.39
     2020q4 |          2        6.45       54.84
     2021q1 |          2        6.45       61.29
     2021q3 |          2        6.45       67.74
     2022q1 |          1        3.23       70.97
     2022q2 |          1        3.23       74.19
     2022q3 |          1        3.23       77.42
     2022q4 |          1        3.23       80.65
     2023q1 |          2        6.45       87.10
     2023q3 |          1        3.23       90.32
     2023q4 |          2        6.45       96.77
     2024q4 |          1        3.23      100.00
------------+-----------------------------------
      Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q3 |          1        3.45        3.45
     2017q3 |          1        3.45        6.90
     2018q1 |          2        6.90       13.79
     2018q3 |          3       10.34       24.14
     2018q4 |          1        3.45       27.59
     2019q2 |          3       10.34       37.93
     2019q4 |          1        3.45       41.38
     2020q1 |          2        6.90       48.28
     2020q3 |          2        6.90       55.17
     2020q4 |          1        3.45       58.62
     2021q2 |          2        6.90       65.52
     2021q3 |          1        3.45       68.97
     2021q4 |          1        3.45       72.41
     2023q1 |          2        6.90       79.31
     2023q2 |          2        6.90       86.21
     2023q4 |          1        3.45       89.66
     2024q2 |          1        3.45       93.10
     2024q3 |          1        3.45       96.55
     2024q4 |          1        3.45      100.00
------------+-----------------------------------
      Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2018q4 |          1       14.29       14.29
     2019q4 |          1       14.29       28.57
     2021q4 |          1       14.29       42.86
     2022q2 |          1       14.29       57.14
     2022q3 |          1       14.29       71.43
     2023q1 |          2       28.57      100.00
------------+-----------------------------------
      Total |          7      100.00


. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. gen diagnosis_year = yofd(diagnosis_date)

. format diagnosis_year %ty

. lab var diagnosis_year "Year of diagnosis"

. tab diagnosis_year, missing

    Year of |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
       2016 |         24        6.74        6.74
       2017 |         36       10.11       16.85
       2018 |         52       14.61       31.46
       2019 |         38       10.67       42.13
       2020 |         42       11.80       53.93
       2021 |         50       14.04       67.98
       2022 |         28        7.87       75.84
       2023 |         39       10.96       86.80
       2024 |         42       11.80       98.60
       2025 |          5        1.40      100.00
------------+-----------------------------------
      Total |        356      100.00

. bys eia_diagnosis: tab diagnosis_year, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

    Year of |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
       2016 |         21        7.27        7.27
       2017 |         35       12.11       19.38
       2018 |         40       13.84       33.22
       2019 |         27        9.34       42.56
       2020 |         33       11.42       53.98
       2021 |         41       14.19       68.17
       2022 |         22        7.61       75.78
       2023 |         27        9.34       85.12
       2024 |         38       13.15       98.27
       2025 |          5        1.73      100.00
------------+-----------------------------------
      Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

    Year of |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
       2016 |          2        6.45        6.45
       2018 |          5       16.13       22.58
       2019 |          6       19.35       41.94
       2020 |          4       12.90       54.84
       2021 |          4       12.90       67.74
       2022 |          4       12.90       80.65
       2023 |          5       16.13       96.77
       2024 |          1        3.23      100.00
------------+-----------------------------------
      Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

    Year of |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
       2016 |          1        3.45        3.45
       2017 |          1        3.45        6.90
       2018 |          6       20.69       27.59
       2019 |          4       13.79       41.38
       2020 |          5       17.24       58.62
       2021 |          4       13.79       72.41
       2023 |          5       17.24       89.66
       2024 |          3       10.34      100.00
------------+-----------------------------------
      Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

    Year of |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
       2018 |          1       14.29       14.29
       2019 |          1       14.29       28.57
       2021 |          1       14.29       42.86
       2022 |          2       28.57       71.43
       2023 |          2       28.57      100.00
------------+-----------------------------------
      Total |          7      100.00


. 
end of do-file

. br

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. gen base_date = td(date("$start_date", "DMY"))
td(date("01/04/2016","DMY")) invalid
r(198);

end of do-file

r(198);

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. gen base_date = date("$start_date", "DMY")

. 
end of do-file

. br base_date

. drop diagnosis_year

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. gen diagnosis_year = floor((diagnosis_date - date("$start_date", "DMY")) / 365.25) + 1
>  if ((diagnosis_date >= (date("$start_date", "DMY"))) & (diagnosis_date <= (date("$end
> _date", "DMY"))))

. 
end of do-file

. br diagnosis_date diagnosis_3m diagnosis_year

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. import delimited "$projectdir/output/dataset.csv", clear
(encoding automatically selected: ISO-8859-1)
(88 vars, 374 obs)

. 
. **Set Ado file path
. adopath + "$projectdir/analysis/extra_ados"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\documents/"
  [5]  (PLUS)      "C:\users\PUBLIC\documents/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/an
> alysis/extra_ados"
  [8]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory
> _rheum/analysis/extra_ados"

. 
. **Set index dates ===========================================================*/
. global year_preceding = "01/04/2015"

. global start_date = "01/04/2016"

. global end_date = "31/03/2025"

. 
. **Conversion for dates====================================================*
. ***Variables ending in _date that are string
. ds *_date, has(type string)
eia_code_d~e  cva_before~e  chd_after_~e  depr_after~e  rheum~4_date  rtt_cl_sta~e
ra_code_date  lung_ca_be~e  dm_after_d~e  osteop_aft~e  rheum~e_date  rtt_cl_ref~e
psa_code_d~e  solid_ca_b~e  ild_after_~e  dem_after_~e  ~erheum_date  rtt_cl_end~e
anksp_code~e  haem_ca_be~e  copd_after~e  creatinin~te  l~ecode_date  rtt_op_sta~e
undiff_cod~e  ckd_before~e  cva_after_~e  rf_date       leflunomid~e  rtt_op_ref~e
chd_before~e  depr_befor~e  lung_ca_af~e  r~_appt_date  metho~e_date  rtt_op_end~e
dm_before_~e  osteop_bef~e  solid_ca_a~e  rheum~y_date  metho~j_date
ild_before~e  frac_befor~e  haem_ca_af~e  rheum~2_date  sulfasalaz~e
copd_befor~e  dem_before~e  ckd_after_~e  rheum~3_date  hydroxychl~e

. local string_dates `r(varlist)'

. foreach var of local string_dates {
  2.     gen `var'_num = date(`var', "YMD")
  3.     format `var'_num %td
  4.     order `var'_num, after(`var')
  5.     drop `var'
  6.     rename `var'_num `var'
  7. }
(74 missing values generated)
(339 missing values generated)
(343 missing values generated)
(366 missing values generated)
(311 missing values generated)
(337 missing values generated)
(311 missing values generated)
(361 missing values generated)
(324 missing values generated)
(291 missing values generated)
(40 missing values generated)
(213 missing values generated)
(297 missing values generated)
(353 missing values generated)
(369 missing values generated)
(372 missing values generated)
(311 missing values generated)
(363 missing values generated)
(372 missing values generated)
(370 missing values generated)
(373 missing values generated)
(367 missing values generated)
(366 missing values generated)
(259 missing values generated)
(348 missing values generated)
(366 missing values generated)
(368 missing values generated)
(372 missing values generated)
(366 missing values generated)
(373 missing values generated)
(373 missing values generated)
(366 missing values generated)
(356 missing values generated)
(368 missing values generated)
(343 missing values generated)
(335 missing values generated)
(373 missing values generated)
(373 missing values generated)
(346 missing values generated)
(285 missing values generated)
(220 missing values generated)
(133 missing values generated)
(260 missing values generated)
(234 missing values generated)
(364 missing values generated)
(364 missing values generated)
(364 missing values generated)
(365 missing values generated)
(365 missing values generated)
(365 missing values generated)

. 
. ***Variables ending in _date that are numeric
. foreach var of varlist *_date {
  2.     capture confirm string variable `var'
  3.     if _rc != 0 {
  4.         format `var' %td
  5.     }
  6. }

. 
. ***Create binary indicator for each
. ds *_date
eia_code_d~e  lung_ca_be~e  ild_after_~e  dem_after_~e  rheum~e_date  rtt_cl_sta~e
ra_code_date  solid_ca_b~e  copd_after~e  creatinin~te  ~erheum_date  rtt_cl_ref~e
psa_code_d~e  haem_ca_be~e  cva_after_~e  rf_date       l~ecode_date  rtt_cl_end~e
anksp_code~e  ckd_before~e  lung_ca_af~e  bmi_date      ~frheum_date  rtt_op_sta~e
undiff_cod~e  depr_befor~e  solid_ca_a~e  r~_appt_date  l~fcode_date  rtt_op_ref~e
chd_before~e  osteop_bef~e  haem_ca_af~e  rheum~y_date  leflunomid~e  rtt_op_end~e
dm_before_~e  frac_befor~e  ckd_after_~e  rheum~2_date  metho~e_date
ild_before~e  dem_before~e  depr_after~e  rheum~3_date  metho~j_date
copd_befor~e  chd_after_~e  osteop_aft~e  rheum~4_date  sulfasalaz~e
cva_before~e  dm_after_d~e  frac_after~e  r~eappt_date  hydroxychl~e

. local dates `r(varlist)'

. foreach var of local dates {
  2.         local newvar =  substr("`var'", 1, length("`var'") - 5)
  3.         gen `newvar' = (`var'!=. )
  4.         order `newvar', after(`var')
  5. }

. 
. /*
> **Will also need to amend conversion for biologic dates ==============================
> ======================*
> ***Some dates are given with month/year only, so adding day 15 to enable them to be pr
> ocessed as dates 
> 
> foreach var of varlist   abatacept_date                                         ///
>                                                  adalimumab_date                      
>                   ///     
>                                                  baricitinib_date                     
>                   ///
>                                                  certolizumab_date                    
>                   ///
>                                                  etanercept_date                      
>                   ///
>                                                  golimumab_date                       
>                   ///
>                                                  guselkumab_date                      
>                   ///     
>                                                  infliximab_date                      
>                   ///
>                                                  ixekizumab_date                      
>                   ///
>                                                  methotrexate_hcd_date                
>           ///
>                                                  rituximab_date                       
>                   ///
>                                                  sarilumab_date                       
>                   ///
>                                                  secukinumab_date                     
>                   ///     
>                                                  tocilizumab_date                     
>                   ///
>                                                  tofacitinib_date                     
>                   ///
>                                                  upadacitinib_date                    
>                   ///
>                                                  ustekinumab_date                     
>                   ///
>                                                  {
>                                                         
>                 capture confirm string variable `var'
>                 if _rc!=0 {
>                         assert `var'==.
>                         rename `var' `var'_date
>                 }
>         
>                 else {
>                                 replace `var' = `var' + "-15"
>                                 rename `var' `var'_dstr
>                                 replace `var'_dstr = " " if `var'_dstr == "-15"
>                                 gen `var'_date = date(`var'_dstr, "YMD") 
>                                 order `var'_date, after(`var'_dstr)
>                                 drop `var'_dstr
>                 }
>         
>         format `var'_date %td
> }
> */
.                                          
. **Create and label variables =========================================================
> ==*/
. 
. ***Age variables
. *Create categorised age
. drop if age<18 & age !=.
(0 observations deleted)

. drop if age>109 & age !=.
(4 observations deleted)

. drop if age==.
(0 observations deleted)

. lab var age "Age at diagnosis"

. 
. recode age 18/39.9999 = 1 /// 
>            40/49.9999 = 2 ///
>                    50/59.9999 = 3 ///
>                60/69.9999 = 4 ///
>                    70/79.9999 = 5 ///
>                    80/max = 6, gen(agegroup) 
(370 differences between age and agegroup)

. 
. label define agegroup   1 "18-39" ///
>                                                 2 "40-49" ///
>                                                 3 "50-59" ///
>                                                 4 "60-69" ///
>                                                 5 "70-79" ///
>                                                 6 "80+"

.                                                 
. label values agegroup agegroup

. lab var agegroup "Age group"

. tab agegroup, missing

  Age group |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-39 |        160       43.24       43.24
      40-49 |         53       14.32       57.57
      50-59 |         33        8.92       66.49
      60-69 |         23        6.22       72.70
      70-79 |         32        8.65       81.35
        80+ |         69       18.65      100.00
------------+-----------------------------------
      Total |        370      100.00

. order agegroup, after(age)

. 
. ***Sex
. gen male = 1 if sex == "male"
(197 missing values generated)

. replace male = 0 if sex == "female"
(197 real changes made)

. lab var male "Male"

. lab define male 0 "No" 1 "Yes", modify

. lab val male male

. tab male, missing

       Male |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        197       53.24       53.24
        Yes |        173       46.76      100.00
------------+-----------------------------------
      Total |        370      100.00

. order male, after(sex)

. 
. ***Ethnicity
. gen ethnicity_n = 1 if ethnicity == "White"
(341 missing values generated)

. replace ethnicity_n = 2 if ethnicity == "Asian or Asian British"
(19 real changes made)

. replace ethnicity_n = 3 if ethnicity == "Black or Black British"
(25 real changes made)

. replace ethnicity_n = 4 if ethnicity == "Mixed"
(14 real changes made)

. replace ethnicity_n = 5 if ethnicity == "Chinese or Other Ethnic Groups"
(29 real changes made)

. replace ethnicity_n = 6 if ethnicity == "Unknown"
(254 real changes made)

. 
. 
. label define ethnicity_n        1 "White"                                             
>   ///
>                                                         2 "Asian or Asian British"    
>           ///
>                                                         3 "Black or Black British"    
>   ///
>                                                         4 "Mixed"                     
>                           ///
>                                                         5 "Chinese or Other Ethnic Gro
> ups" ///
>                                                         6 "Not known", modify

.                                                         
. label values ethnicity_n ethnicity_n

. lab var ethnicity_n "Ethnicity"

. tab ethnicity_n, missing

                     Ethnicity |      Freq.     Percent        Cum.
-------------------------------+-----------------------------------
                         White |         29        7.84        7.84
        Asian or Asian British |         19        5.14       12.97
        Black or Black British |         25        6.76       19.73
                         Mixed |         14        3.78       23.51
Chinese or Other Ethnic Groups |         29        7.84       31.35
                     Not known |        254       68.65      100.00
-------------------------------+-----------------------------------
                         Total |        370      100.00

. drop ethnicity

. rename ethnicity_n ethnicity 

. 
. ***Practice regions
. encode region, gen(nuts_region)

. tab region, missing

                  region |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
                         |         84       22.70       22.70
                    East |         43       11.62       34.32
           East Midlands |         22        5.95       40.27
                  London |         31        8.38       48.65
              North East |         32        8.65       57.30
              North West |         30        8.11       65.41
              South East |         32        8.65       74.05
              South West |         34        9.19       83.24
           West Midlands |         36        9.73       92.97
Yorkshire and The Humber |         26        7.03      100.00
-------------------------+-----------------------------------
                   Total |        370      100.00

. replace region="Not known" if region==""
(84 real changes made)

. gen region_nospace=region

. replace region_nospace="SouthWest" if region=="South West"
(34 real changes made)

. replace region_nospace="EastMidlands" if region=="East Midlands"
(22 real changes made)

. replace region_nospace="East" if region=="East"
(0 real changes made)

. replace region_nospace="London" if region=="London"
(0 real changes made)

. replace region_nospace="NorthEast" if region=="North East"
(32 real changes made)

. replace region_nospace="NorthWest" if region=="North West"
(30 real changes made)

. replace region_nospace="SouthEast" if region=="South East"
(32 real changes made)

. replace region_nospace="WestMidlands" if region=="West Midlands"
(36 real changes made)

. replace region_nospace="YorkshireandTheHumber" if region=="Yorkshire and The Humber"
(26 real changes made)

. 
. ***IMD
. gen imd = 1 if imd_quintile == "1 (most deprived)"
(303 missing values generated)

. replace imd = 2 if imd_quintile == "2"
(55 real changes made)

. replace imd = 3 if imd_quintile == "3"
(51 real changes made)

. replace imd = 4 if imd_quintile == "4"
(53 real changes made)

. replace imd = 5 if imd_quintile == "5 (least deprived)"
(57 real changes made)

. replace imd = .u if imd_quintile == "Unknown"
(87 real changes made, 87 to missing)

. lab var imd "Index of multiple deprivation"

. lab define imd 1 "1 (most deprived)" ///
>                            2 "2" ///
>                            3 "3" ///
>                            4 "4" ///
>                            5 "5 (least deprived)" ///
>                            .u "Not known"

. lab val imd imd                    

. tab imd, missing

 Index of multiple |
       deprivation |      Freq.     Percent        Cum.
-------------------+-----------------------------------
 1 (most deprived) |         67       18.11       18.11
                 2 |         55       14.86       32.97
                 3 |         51       13.78       46.76
                 4 |         53       14.32       61.08
5 (least deprived) |         57       15.41       76.49
         Not known |         87       23.51      100.00
-------------------+-----------------------------------
             Total |        370      100.00

. drop imd_quintile

. 
. ***Body Mass Index
. *Recode strange values 
. replace bmi_value = . if bmi_value == 0 
(0 real changes made)

. replace bmi_value = . if !inrange(bmi_value, 10, 80)
(0 real changes made)

. 
. *Restrict to within 10 years of EIA diagnosis date and aged>16 
. gen bmi_time = (eia_code_date - bmi_date)/365.25
(370 missing values generated)

. gen bmi_age = age - bmi_time
(370 missing values generated)

. replace bmi_value = . if bmi_age < 16 
(0 real changes made)

. replace bmi_value = . if bmi_time > 10 & bmi_time != . 
(0 real changes made)

. 
. *Set to missing if no date, and vice versa 
. replace bmi_value = . if bmi_date == . 
(0 real changes made)

. replace bmi_date = . if bmi_value == . 
(0 real changes made)

. replace bmi_time = . if bmi_value == . 
(0 real changes made)

. replace bmi_age = . if bmi_value == . 
(0 real changes made)

. 
. *Create BMI categories
. gen     bmicat = .
(370 missing values generated)

. recode  bmicat . = 1 if bmi_value < 18.5
(0 changes made to bmicat)

. recode  bmicat . = 2 if bmi_value < 25
(0 changes made to bmicat)

. recode  bmicat . = 3 if bmi_value < 30
(0 changes made to bmicat)

. recode  bmicat . = 4 if bmi_value < 35
(0 changes made to bmicat)

. recode  bmicat . = 5 if bmi_value < 40
(0 changes made to bmicat)

. recode  bmicat . = 6 if bmi_value < .
(0 changes made to bmicat)

. replace bmicat = .u if bmi_value >= .
(370 real changes made, 370 to missing)

. 
. label define bmicat 1 "Underweight (<18.5)"     ///
>                                         2 "Normal (18.5-24.9)"          ///
>                                         3 "Overweight (25-29.9)"        ///
>                                         4 "Obese I (30-34.9)"           ///
>                                         5 "Obese II (35-39.9)"          ///
>                                         6 "Obese III (40+)"                     ///
>                                         .u "Not known"

.                                         
. label values bmicat bmicat

. lab var bmicat "BMI"

. tab bmicat, missing

                 BMI |      Freq.     Percent        Cum.
---------------------+-----------------------------------
           Not known |        370      100.00      100.00
---------------------+-----------------------------------
               Total |        370      100.00

. order bmicat, after (bmi_value)

. drop bmi_age bmi_time

. 
. *Create less granular categorisation
. recode bmicat 1/3 .u = 1 4 = 2 5 = 3 6 = 4, gen(obese4cat)
(370 differences between bmicat and obese4cat)

. 
. label define obese4cat  1 "No record of obesity"        ///
>                                                 2 "Obese I (30-34.9)"           ///
>                                                 3 "Obese II (35-39.9)"          ///
>                                                 4 "Obese III (40+)"             

. 
. label values obese4cat obese4cat

. order obese4cat, after(bmicat)

. 
. ***Smoking 
. label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Not known"

. 
. gen     smoke = 1  if smoking_status == "N"
(369 missing values generated)

. replace smoke = 2  if smoking_status == "E"
(133 real changes made)

. replace smoke = 3  if smoking_status == "S"
(235 real changes made)

. replace smoke = .u if smoking_status == "M"
(1 real change made, 1 to missing)

. replace smoke = .u if smoking_status == "" 
(0 real changes made)

. 
. label values smoke smoke

. lab var smoke "Smoking status"

. drop smoking_status

. tab smoke, missing

    Smoking |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
      Never |          1        0.27        0.27
     Former |        133       35.95       36.22
    Current |        235       63.51       99.73
  Not known |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. *Create non-missing 3-category variable for current smoking (assumes missing smoking i
> s never smoking)
. recode smoke .u = 1, gen(smoke_nomiss)
(1 differences between smoke and smoke_nomiss)

. order smoke_nomiss, after(smoke)

. label values smoke_nomiss smoke

. 
. **Clinical comorbidities
. ***Nb. not using creatinine of HBA1c values for now, just codes
. foreach disease in ckd dm ild copd cva lung_ca solid_ca haem_ca depr osteop frac dem c
> hd {
  2.         label define `disease'_before 0 "No" 1 "Yes"
  3.         label values `disease'_before `disease'_before
  4.         tab `disease'_before, missing
  5.         label define `disease'_after 0 "No" 1 "Yes"
  6.         label values `disease'_after `disease'_after
  7.         tab `disease'_after, missing
  8.         gen `disease'_new = 1 if (`disease'_after == 1 & `disease'_before == 0)
  9.         recode `disease'_new .=0
 10.         label define `disease'_new 0 "No" 1 "Yes"
 11.         label values `disease'_new `disease'_new
 12.         tab `disease'_new, missing
 13.         order `disease'_new, after(`disease'_after)
 14. }

 ckd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        294       79.46       79.46
        Yes |         76       20.54      100.00
------------+-----------------------------------
      Total |        370      100.00

  ckd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to ckd_new)

    ckd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

  dm_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        334       90.27       90.27
        Yes |         36        9.73      100.00
------------+-----------------------------------
      Total |        370      100.00

   dm_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to dm_new)

     dm_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 ild_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  ild_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        366       98.92       98.92
        Yes |          4        1.08      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to ild_new)

    ild_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

copd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        357       96.49       96.49
        Yes |         13        3.51      100.00
------------+-----------------------------------
      Total |        370      100.00

 copd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00
(369 missing values generated)
(369 changes made to copd_new)

   copd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

 cva_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        321       86.76       86.76
        Yes |         49       13.24      100.00
------------+-----------------------------------
      Total |        370      100.00

  cva_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        363       98.11       98.11
        Yes |          7        1.89      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to cva_new)

    cva_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        287       77.57       77.57
        Yes |         83       22.43      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to lung_ca_new)

lung_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_be |
       fore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |         39       10.54       10.54
        Yes |        331       89.46      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_af |
        ter |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        256       69.19       69.19
        Yes |        114       30.81      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to solid_ca_new)

solid_ca_ne |
          w |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        209       56.49       56.49
        Yes |        161       43.51      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        344       92.97       92.97
        Yes |         26        7.03      100.00
------------+-----------------------------------
      Total |        370      100.00
(359 missing values generated)
(359 changes made to haem_ca_new)

haem_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00

depr_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        349       94.32       94.32
        Yes |         21        5.68      100.00
------------+-----------------------------------
      Total |        370      100.00

 depr_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to depr_new)

   depr_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_befo |
         re |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_afte |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to osteop_new)

 osteop_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

frac_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 frac_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00
(370 missing values generated)
(370 changes made to frac_new)

   frac_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

 dem_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  dem_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to dem_new)

    dem_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

 chd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  chd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00
(361 missing values generated)
(361 changes made to chd_new)

    chd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        361       97.57       97.57
        Yes |          9        2.43      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. lab var ckd_before "Chronic kidney disease"

. lab var ckd_after "Chronic kidney disease"

. lab var ckd_new "Chronic kidney disease"

. lab var dm_before "Type 2 diabetes mellitus"

. lab var dm_after "Type 2 diabetes mellitus"

. lab var dm_new "Type 2 diabetes mellitus"

. lab var ild_before "Interstitial lung disease"

. lab var ild_after "Interstitial lung disease"

. lab var ild_new "Interstitial lung disease"

. lab var copd_before "COPD"

. lab var copd_after "COPD"

. lab var copd_new "COPD"

. lab var lung_ca_before "Lung cancer"

. lab var lung_ca_after "Lung cancer"

. lab var lung_ca_new "Lung cancer"

. lab var solid_ca_before "Solid organ cancer"

. lab var solid_ca_after "Solid organ cancer"

. lab var solid_ca_new "Solid organ cancer"

. lab var haem_ca_before "Haematological cancer"

. lab var haem_ca_after "Haematological cancer"

. lab var haem_ca_new "Haematological cancer"

. lab var depr_before "Depression"

. lab var depr_after "Depression"

. lab var depr_new "Depression"

. lab var osteop_before "Osteoporosis"

. lab var osteop_after "Osteoporosis"

. lab var osteop_new "Osteoporosis"

. lab var frac_before "Fragility fracture"

. lab var frac_after "Fragility fracture"

. lab var frac_new "Fragility fracture"

. lab var dem_before "Dementia"

. lab var dem_after "Dementia"

. lab var dem_new "Dementia"

. lab var chd_before "Coronary heart disease"

. lab var chd_after "Coronary heart disease"

. lab var chd_new "Coronary heart disease"

. 
. lab var rheum_appt "Rheumatology appointment"

. lab define rheum_appt 0 "No" 1 "Yes", modify

. lab val rheum_appt rheum_appt

. 
. **All patients should have diagnostic code============================================
> =================*/
. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

. keep if eia_code==1
(0 observations deleted)

. 
. **Check first rheum appt date was before diagnostic code date=========================
> =========*/
. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before EIA code appeared in GP recor
> d; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

. tab rheum_appt if rheum_appt_date>eia_code_date & rheum_appt_date!=. //confirm proport
> ion who had first rheum appt (i.e. not missing) after EIA code

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |          1      100.00      100.00
------------+-----------------------------------
      Total |          1      100.00

. tab rheum_appt if rheum_appt_date>(eia_code_date + 30) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 30 days after EIA code 
no observations

. tab rheum_appt if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 60 days after EIA code - should be none
no observations

. replace rheum_appt=0 if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //re
> place as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. replace rheum_appt_date=. if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=.
>  //replace as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. 
. **As above - for differently specified rheumatology appointments
. replace rheum_appt_any=0 if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt_any_
> date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt_any_date=. if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt
> _any_date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2=0 if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2_date=. if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date
> !=. //replace as missing those appts >60 days after EIA code_yea
(0 real changes made)

. replace rheum_appt3=0 if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt3_date=. if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date
> !=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt4=0 if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date!=. /
> /replace as missing those appts >60 days after EIA code
(8 real changes made)

. replace rheum_appt4_date=. if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date
> !=. //replace as missing those appts >60 days after EIA code
(8 real changes made, 8 to missing)

. 
. *Check if first csDMARD/biologic was after rheum appt date============================
> =========================*/
. **csDMARDs (not including high cost MTX; wouldn't be shared care)
. gen csdmard=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methotrexa
> te_inj==1 | sulfasalazine==1
(76 missing values generated)

. recode csdmard .=0 
(76 changes made to csdmard)

. tab csdmard, missing

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |         76       20.54       20.54
          1 |        294       79.46      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. **Date of first csDMARD script (not including high cost MTX prescriptions)
. gen csdmard_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date, met
> hotrexate_inj_date, sulfasalazine_date)
(76 missing values generated)

. format %td csdmard_date

. 
. /*
> **csDMARDs (including high cost MTX)
> gen csdmard_hcd=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methot
> rexate_inj==1 | methotrexate_hcd==1 | sulfasalazine==1
> recode csdmard_hcd .=0 
> tab csdmard_hcd, missing
> 
> **Date of first csDMARD script (including high cost MTX prescriptions)
> gen csdmard_hcd_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date,
>  methotrexate_inj_date, methotrexate_hcd_date, sulfasalazine_date)
> format %td csdmard_hcd_date
> 
> **Biologic use
> gen biologic=1 if abatacept==1 | adalimumab==1 | baricitinib==1 | certolizumab==1 | et
> anercept==1 | golimumab==1 | guselkumab==1 | infliximab==1 | ixekizumab==1 | rituximab
> ==1 | sarilumab==1 | secukinumab==1 | tocilizumab==1 | tofacitinib==1 | upadacitinib==
> 1 | ustekinumab==1 
> recode biologic .=0
> tab biologic, missing
> 
> **Date of first biologic script
> gen biologic_date=min(abatacept_date, adalimumab_date, baricitinib_date, certolizumab_
> date, etanercept_date, golimumab_date, guselkumab_date, infliximab_date, ixekizumab_da
> te, rituximab_date, sarilumab_date, secukinumab_date, tocilizumab_date, tofacitinib_da
> te, upadacitinib_date, ustekinumab_date)
> format %td biologic_date
> */
. 
. **Exclude if first csdmard was more than 60 days before first rheum appt
. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & csdmard_date<rheum_appt_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_d
> ate 

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_date //d
> rop if first csDMARD more than 60 days before first attendance at a rheum appt 
(7 observations deleted)

. tab csdmard if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmar
> d_date + 60)<rheum_appt_any_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmard_date 
> + 60)<rheum_appt_any_date //drop if first csDMARD more than 60 days before first captu
> red rheum appt that did not have first attendance tag
(7 observations deleted)

. 
. /*
> tab biologic if rheum_appt_date!=. & biologic_date!=. & biologic_date<rheum_appt_date 
> tab biologic if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_app
> t_date 
> drop if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_appt_date /
> /drop if first biologic more than 60 days before first rheum_appt_date
> tab biologic if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biol
> ogic_date + 60)<rheum_appt_any_date
> drop if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biologic_dat
> e + 60)<rheum_appt_any_date //drop if first biologic more than 60 days before first ca
> ptured rheum appt that did not have first attendance tag
> */
. 
. *Generate diagnosis date==============================================================
> =*/
. **Use diagnostic code date (in GP record) as diagnosis date
. gen diagnosis_date=eia_code_date

. format diagnosis_date %td

. 
. *Refine diagnostic window=============================================================
> */
. **Keep patients with diagnosis date after start date and before end date - should be n
> one dropped
. keep if diagnosis_date>=date("$start_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. keep if diagnosis_date<date("$end_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. 
. *Include only most recent EIA sub-diagnosis===========================================
> ==*/
. replace ra_code =0 if psa_code_date > ra_code_date & psa_code_date !=.
(0 real changes made)

. replace ra_code =0 if anksp_code_date > ra_code_date & anksp_code_date !=.
(0 real changes made)

. replace ra_code =0 if undiff_code_date > ra_code_date & undiff_code_date !=.
(0 real changes made)

. replace psa_code =0 if ra_code_date >= psa_code_date & ra_code_date !=.
(0 real changes made)

. replace psa_code =0 if anksp_code_date > psa_code_date & anksp_code_date !=.
(0 real changes made)

. replace psa_code =0 if undiff_code_date > psa_code_date & undiff_code_date !=.
(0 real changes made)

. replace anksp_code =0 if psa_code_date >= anksp_code_date & psa_code_date !=.
(0 real changes made)

. replace anksp_code =0 if ra_code_date >= anksp_code_date & ra_code_date !=.
(0 real changes made)

. replace anksp_code =0 if undiff_code_date > anksp_code_date & undiff_code_date !=.
(0 real changes made)

. replace undiff_code =0 if ra_code_date >= undiff_code_date & ra_code_date !=.
(0 real changes made)

. replace undiff_code =0 if psa_code_date >= undiff_code_date & psa_code_date !=.
(0 real changes made)

. replace undiff_code =0 if anksp_code_date >= undiff_code_date & anksp_code_date !=.
(0 real changes made)

. gen eia_diagnosis=1 if ra_code==1
(67 missing values generated)

. replace eia_diagnosis=2 if psa_code==1
(31 real changes made)

. replace eia_diagnosis=3 if anksp_code==1
(29 real changes made)

. replace eia_diagnosis=4 if undiff_code==1
(7 real changes made)

. lab define eia_diagnosis 1 "RA" 2 "PsA" 3 "AxSpA" 4 "Undiff IA", modify

. lab val eia_diagnosis eia_diagnosis

. tab eia_diagnosis, missing

eia_diagnos |
         is |      Freq.     Percent        Cum.
------------+-----------------------------------
         RA |        289       81.18       81.18
        PsA |         31        8.71       89.89
      AxSpA |         29        8.15       98.03
  Undiff IA |          7        1.97      100.00
------------+-----------------------------------
      Total |        356      100.00

. drop if eia_diagnosis==. //should be none
(0 observations deleted)

. 
. decode eia_diagnosis, gen(eia_diag)

. replace eia_diag="Undiff_IA" if eia_diagnosis==4
(7 real changes made)

. 
. *Split into 6-month time windows=========================================*/
. **Month/Year of GP diagnostic code
. gen year_diag=year(eia_code_date)

. format year_diag %ty

. gen month_diag=month(eia_code_date)

. gen mo_year_diagn=ym(year_diag, month_diag)

. format mo_year_diagn %tmMon-CCYY

. generate str16 mo_year_diagn_s = strofreal(mo_year_diagn,"%tmCCYY!mNN")

. lab var mo_year_diagn "Month/Year of Diagnosis"

. lab var mo_year_diagn_s "Month/Year of Diagnosis"

. 
. **Month/Year of rheum appt
. gen year_appt=year(rheum_appt_date) if rheum_appt_date!=.
(355 missing values generated)

. format year_appt %ty

. gen month_appt=month(rheum_appt_date) if rheum_appt_date!=. 
(355 missing values generated)

. gen mo_year_appt=ym(year_appt, month_appt)
(355 missing values generated)

. format mo_year_appt %tmMon-CCYY

. generate str16 mo_year_appt_s = strofreal(mo_year_appt,"%tmCCYY!mNN")

. 
. **Separate into 3-month time windows (for diagnosis date)
. gen diagnosis_3m = qofd(diagnosis_date)

. format diagnosis_3m %tq

. lab var diagnosis_3m "Time period for diagnosis"

. tab diagnosis_3m, missing

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        1.97        1.97
     2016q3 |          6        1.69        3.65
     2016q4 |         11        3.09        6.74
     2017q1 |          7        1.97        8.71
     2017q2 |          7        1.97       10.67
     2017q3 |         13        3.65       14.33
     2017q4 |          9        2.53       16.85
     2018q1 |         14        3.93       20.79
     2018q2 |         10        2.81       23.60
     2018q3 |         15        4.21       27.81
     2018q4 |         13        3.65       31.46
     2019q1 |          7        1.97       33.43
     2019q2 |         16        4.49       37.92
     2019q3 |          7        1.97       39.89
     2019q4 |          8        2.25       42.13
     2020q1 |         12        3.37       45.51
     2020q2 |          9        2.53       48.03
     2020q3 |         10        2.81       50.84
     2020q4 |         11        3.09       53.93
     2021q1 |         10        2.81       56.74
     2021q2 |          9        2.53       59.27
     2021q3 |         14        3.93       63.20
     2021q4 |         17        4.78       67.98
     2022q1 |          8        2.25       70.22
     2022q2 |          7        1.97       72.19
     2022q3 |          6        1.69       73.88
     2022q4 |          7        1.97       75.84
     2023q1 |         13        3.65       79.49
     2023q2 |          6        1.69       81.18
     2023q3 |          6        1.69       82.87
     2023q4 |         14        3.93       86.80
     2024q1 |         10        2.81       89.61
     2024q2 |         13        3.65       93.26
     2024q3 |         12        3.37       96.63
     2024q4 |          7        1.97       98.60
     2025q1 |          5        1.40      100.00
------------+-----------------------------------
      Total |        356      100.00

. bys eia_diagnosis: tab diagnosis_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        2.42        2.42
     2016q3 |          5        1.73        4.15
     2016q4 |          9        3.11        7.27
     2017q1 |          7        2.42        9.69
     2017q2 |          7        2.42       12.11
     2017q3 |         12        4.15       16.26
     2017q4 |          9        3.11       19.38
     2018q1 |         12        4.15       23.53
     2018q2 |          6        2.08       25.61
     2018q3 |         11        3.81       29.41
     2018q4 |         11        3.81       33.22
     2019q1 |          7        2.42       35.64
     2019q2 |         10        3.46       39.10
     2019q3 |          5        1.73       40.83
     2019q4 |          5        1.73       42.56
     2020q1 |          9        3.11       45.67
     2020q2 |          9        3.11       48.79
     2020q3 |          7        2.42       51.21
     2020q4 |          8        2.77       53.98
     2021q1 |          8        2.77       56.75
     2021q2 |          7        2.42       59.17
     2021q3 |         11        3.81       62.98
     2021q4 |         15        5.19       68.17
     2022q1 |          7        2.42       70.59
     2022q2 |          5        1.73       72.32
     2022q3 |          4        1.38       73.70
     2022q4 |          6        2.08       75.78
     2023q1 |          7        2.42       78.20
     2023q2 |          4        1.38       79.58
     2023q3 |          5        1.73       81.31
     2023q4 |         11        3.81       85.12
     2024q1 |         10        3.46       88.58
     2024q2 |         12        4.15       92.73
     2024q3 |         11        3.81       96.54
     2024q4 |          5        1.73       98.27
     2025q1 |          5        1.73      100.00
------------+-----------------------------------
      Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q4 |          2        6.45        6.45
     2018q2 |          4       12.90       19.35
     2018q3 |          1        3.23       22.58
     2019q2 |          3        9.68       32.26
     2019q3 |          2        6.45       38.71
     2019q4 |          1        3.23       41.94
     2020q1 |          1        3.23       45.16
     2020q3 |          1        3.23       48.39
     2020q4 |          2        6.45       54.84
     2021q1 |          2        6.45       61.29
     2021q3 |          2        6.45       67.74
     2022q1 |          1        3.23       70.97
     2022q2 |          1        3.23       74.19
     2022q3 |          1        3.23       77.42
     2022q4 |          1        3.23       80.65
     2023q1 |          2        6.45       87.10
     2023q3 |          1        3.23       90.32
     2023q4 |          2        6.45       96.77
     2024q4 |          1        3.23      100.00
------------+-----------------------------------
      Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q3 |          1        3.45        3.45
     2017q3 |          1        3.45        6.90
     2018q1 |          2        6.90       13.79
     2018q3 |          3       10.34       24.14
     2018q4 |          1        3.45       27.59
     2019q2 |          3       10.34       37.93
     2019q4 |          1        3.45       41.38
     2020q1 |          2        6.90       48.28
     2020q3 |          2        6.90       55.17
     2020q4 |          1        3.45       58.62
     2021q2 |          2        6.90       65.52
     2021q3 |          1        3.45       68.97
     2021q4 |          1        3.45       72.41
     2023q1 |          2        6.90       79.31
     2023q2 |          2        6.90       86.21
     2023q4 |          1        3.45       89.66
     2024q2 |          1        3.45       93.10
     2024q3 |          1        3.45       96.55
     2024q4 |          1        3.45      100.00
------------+-----------------------------------
      Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2018q4 |          1       14.29       14.29
     2019q4 |          1       14.29       28.57
     2021q4 |          1       14.29       42.86
     2022q2 |          1       14.29       57.14
     2022q3 |          1       14.29       71.43
     2023q1 |          2       28.57      100.00
------------+-----------------------------------
      Total |          7      100.00


. 
. **Separate into 12-month time windows (for diagnosis date)
. gen base_date = date("$start_date", "DMY")

. gen diagnosis_year = ((floor(diagnosis_date - base_date) / 365.25) + 1) if ((diagnosis
> _date >= base_date) & (diagnosis_date <= (date("$end_date", "DMY"))))

. lab var diagnosis_year "Year of diagnosis"

. local base_year = year(date("$start_date", "DMY"))

. summarize diagnosis_year, meanonly

. local max_year = r(max)

. forvalues i = 1/`max_year' {
  2.     local start = `base_year' + `i' - 1
  3.     local end = `start' + 1
  4.     label define diagnosis_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val diagnosis_year diagnosis_year_lbl

. 
end of do-file

. summarize diagnosis_year, meanonly

. 
. #
Unknown #command

. summarize diagnosis_year, meanonly

. local max_year = r(max)

. di `max_year'
9.9609852

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. 
. import delimited "$projectdir/output/dataset.csv", clear
(encoding automatically selected: ISO-8859-1)
(88 vars, 374 obs)

. 
. **Set Ado file path
. adopath + "$projectdir/analysis/extra_ados"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\documents/"
  [5]  (PLUS)      "C:\users\PUBLIC\documents/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/an
> alysis/extra_ados"
  [8]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory
> _rheum/analysis/extra_ados"

. 
. **Set index dates ===========================================================*/
. global year_preceding = "01/04/2015"

. global start_date = "01/04/2016"

. global end_date = "31/03/2025"

. 
. **Conversion for dates====================================================*
. ***Variables ending in _date that are string
. ds *_date, has(type string)
eia_code_d~e  cva_before~e  chd_after_~e  depr_after~e  rheum~4_date  rtt_cl_sta~e
ra_code_date  lung_ca_be~e  dm_after_d~e  osteop_aft~e  rheum~e_date  rtt_cl_ref~e
psa_code_d~e  solid_ca_b~e  ild_after_~e  dem_after_~e  ~erheum_date  rtt_cl_end~e
anksp_code~e  haem_ca_be~e  copd_after~e  creatinin~te  l~ecode_date  rtt_op_sta~e
undiff_cod~e  ckd_before~e  cva_after_~e  rf_date       leflunomid~e  rtt_op_ref~e
chd_before~e  depr_befor~e  lung_ca_af~e  r~_appt_date  metho~e_date  rtt_op_end~e
dm_before_~e  osteop_bef~e  solid_ca_a~e  rheum~y_date  metho~j_date
ild_before~e  frac_befor~e  haem_ca_af~e  rheum~2_date  sulfasalaz~e
copd_befor~e  dem_before~e  ckd_after_~e  rheum~3_date  hydroxychl~e

. local string_dates `r(varlist)'

. foreach var of local string_dates {
  2.     gen `var'_num = date(`var', "YMD")
  3.     format `var'_num %td
  4.     order `var'_num, after(`var')
  5.     drop `var'
  6.     rename `var'_num `var'
  7. }
(74 missing values generated)
(339 missing values generated)
(343 missing values generated)
(366 missing values generated)
(311 missing values generated)
(337 missing values generated)
(311 missing values generated)
(361 missing values generated)
(324 missing values generated)
(291 missing values generated)
(40 missing values generated)
(213 missing values generated)
(297 missing values generated)
(353 missing values generated)
(369 missing values generated)
(372 missing values generated)
(311 missing values generated)
(363 missing values generated)
(372 missing values generated)
(370 missing values generated)
(373 missing values generated)
(367 missing values generated)
(366 missing values generated)
(259 missing values generated)
(348 missing values generated)
(366 missing values generated)
(368 missing values generated)
(372 missing values generated)
(366 missing values generated)
(373 missing values generated)
(373 missing values generated)
(366 missing values generated)
(356 missing values generated)
(368 missing values generated)
(343 missing values generated)
(335 missing values generated)
(373 missing values generated)
(373 missing values generated)
(346 missing values generated)
(285 missing values generated)
(220 missing values generated)
(133 missing values generated)
(260 missing values generated)
(234 missing values generated)
(364 missing values generated)
(364 missing values generated)
(364 missing values generated)
(365 missing values generated)
(365 missing values generated)
(365 missing values generated)

. 
. ***Variables ending in _date that are numeric
. foreach var of varlist *_date {
  2.     capture confirm string variable `var'
  3.     if _rc != 0 {
  4.         format `var' %td
  5.     }
  6. }

. 
. ***Create binary indicator for each
. ds *_date
eia_code_d~e  lung_ca_be~e  ild_after_~e  dem_after_~e  rheum~e_date  rtt_cl_sta~e
ra_code_date  solid_ca_b~e  copd_after~e  creatinin~te  ~erheum_date  rtt_cl_ref~e
psa_code_d~e  haem_ca_be~e  cva_after_~e  rf_date       l~ecode_date  rtt_cl_end~e
anksp_code~e  ckd_before~e  lung_ca_af~e  bmi_date      ~frheum_date  rtt_op_sta~e
undiff_cod~e  depr_befor~e  solid_ca_a~e  r~_appt_date  l~fcode_date  rtt_op_ref~e
chd_before~e  osteop_bef~e  haem_ca_af~e  rheum~y_date  leflunomid~e  rtt_op_end~e
dm_before_~e  frac_befor~e  ckd_after_~e  rheum~2_date  metho~e_date
ild_before~e  dem_before~e  depr_after~e  rheum~3_date  metho~j_date
copd_befor~e  chd_after_~e  osteop_aft~e  rheum~4_date  sulfasalaz~e
cva_before~e  dm_after_d~e  frac_after~e  r~eappt_date  hydroxychl~e

. local dates `r(varlist)'

. foreach var of local dates {
  2.         local newvar =  substr("`var'", 1, length("`var'") - 5)
  3.         gen `newvar' = (`var'!=. )
  4.         order `newvar', after(`var')
  5. }

. 
. /*
> **Will also need to amend conversion for biologic dates ==============================
> ======================*
> ***Some dates are given with month/year only, so adding day 15 to enable them to be pr
> ocessed as dates 
> 
> foreach var of varlist   abatacept_date                                         ///
>                                                  adalimumab_date                      
>                   ///     
>                                                  baricitinib_date                     
>                   ///
>                                                  certolizumab_date                    
>                   ///
>                                                  etanercept_date                      
>                   ///
>                                                  golimumab_date                       
>                   ///
>                                                  guselkumab_date                      
>                   ///     
>                                                  infliximab_date                      
>                   ///
>                                                  ixekizumab_date                      
>                   ///
>                                                  methotrexate_hcd_date                
>           ///
>                                                  rituximab_date                       
>                   ///
>                                                  sarilumab_date                       
>                   ///
>                                                  secukinumab_date                     
>                   ///     
>                                                  tocilizumab_date                     
>                   ///
>                                                  tofacitinib_date                     
>                   ///
>                                                  upadacitinib_date                    
>                   ///
>                                                  ustekinumab_date                     
>                   ///
>                                                  {
>                                                         
>                 capture confirm string variable `var'
>                 if _rc!=0 {
>                         assert `var'==.
>                         rename `var' `var'_date
>                 }
>         
>                 else {
>                                 replace `var' = `var' + "-15"
>                                 rename `var' `var'_dstr
>                                 replace `var'_dstr = " " if `var'_dstr == "-15"
>                                 gen `var'_date = date(`var'_dstr, "YMD") 
>                                 order `var'_date, after(`var'_dstr)
>                                 drop `var'_dstr
>                 }
>         
>         format `var'_date %td
> }
> */
.                                          
. **Create and label variables =========================================================
> ==*/
. 
. ***Age variables
. *Create categorised age
. drop if age<18 & age !=.
(0 observations deleted)

. drop if age>109 & age !=.
(4 observations deleted)

. drop if age==.
(0 observations deleted)

. lab var age "Age at diagnosis"

. 
. recode age 18/39.9999 = 1 /// 
>            40/49.9999 = 2 ///
>                    50/59.9999 = 3 ///
>                60/69.9999 = 4 ///
>                    70/79.9999 = 5 ///
>                    80/max = 6, gen(agegroup) 
(370 differences between age and agegroup)

. 
. label define agegroup   1 "18-39" ///
>                                                 2 "40-49" ///
>                                                 3 "50-59" ///
>                                                 4 "60-69" ///
>                                                 5 "70-79" ///
>                                                 6 "80+"

.                                                 
. label values agegroup agegroup

. lab var agegroup "Age group"

. tab agegroup, missing

  Age group |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-39 |        160       43.24       43.24
      40-49 |         53       14.32       57.57
      50-59 |         33        8.92       66.49
      60-69 |         23        6.22       72.70
      70-79 |         32        8.65       81.35
        80+ |         69       18.65      100.00
------------+-----------------------------------
      Total |        370      100.00

. order agegroup, after(age)

. 
. ***Sex
. gen male = 1 if sex == "male"
(197 missing values generated)

. replace male = 0 if sex == "female"
(197 real changes made)

. lab var male "Male"

. lab define male 0 "No" 1 "Yes", modify

. lab val male male

. tab male, missing

       Male |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        197       53.24       53.24
        Yes |        173       46.76      100.00
------------+-----------------------------------
      Total |        370      100.00

. order male, after(sex)

. 
. ***Ethnicity
. gen ethnicity_n = 1 if ethnicity == "White"
(341 missing values generated)

. replace ethnicity_n = 2 if ethnicity == "Asian or Asian British"
(19 real changes made)

. replace ethnicity_n = 3 if ethnicity == "Black or Black British"
(25 real changes made)

. replace ethnicity_n = 4 if ethnicity == "Mixed"
(14 real changes made)

. replace ethnicity_n = 5 if ethnicity == "Chinese or Other Ethnic Groups"
(29 real changes made)

. replace ethnicity_n = 6 if ethnicity == "Unknown"
(254 real changes made)

. 
. 
. label define ethnicity_n        1 "White"                                             
>   ///
>                                                         2 "Asian or Asian British"    
>           ///
>                                                         3 "Black or Black British"    
>   ///
>                                                         4 "Mixed"                     
>                           ///
>                                                         5 "Chinese or Other Ethnic Gro
> ups" ///
>                                                         6 "Not known", modify

.                                                         
. label values ethnicity_n ethnicity_n

. lab var ethnicity_n "Ethnicity"

. tab ethnicity_n, missing

                     Ethnicity |      Freq.     Percent        Cum.
-------------------------------+-----------------------------------
                         White |         29        7.84        7.84
        Asian or Asian British |         19        5.14       12.97
        Black or Black British |         25        6.76       19.73
                         Mixed |         14        3.78       23.51
Chinese or Other Ethnic Groups |         29        7.84       31.35
                     Not known |        254       68.65      100.00
-------------------------------+-----------------------------------
                         Total |        370      100.00

. drop ethnicity

. rename ethnicity_n ethnicity 

. 
. ***Practice regions
. encode region, gen(nuts_region)

. tab region, missing

                  region |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
                         |         84       22.70       22.70
                    East |         43       11.62       34.32
           East Midlands |         22        5.95       40.27
                  London |         31        8.38       48.65
              North East |         32        8.65       57.30
              North West |         30        8.11       65.41
              South East |         32        8.65       74.05
              South West |         34        9.19       83.24
           West Midlands |         36        9.73       92.97
Yorkshire and The Humber |         26        7.03      100.00
-------------------------+-----------------------------------
                   Total |        370      100.00

. replace region="Not known" if region==""
(84 real changes made)

. gen region_nospace=region

. replace region_nospace="SouthWest" if region=="South West"
(34 real changes made)

. replace region_nospace="EastMidlands" if region=="East Midlands"
(22 real changes made)

. replace region_nospace="East" if region=="East"
(0 real changes made)

. replace region_nospace="London" if region=="London"
(0 real changes made)

. replace region_nospace="NorthEast" if region=="North East"
(32 real changes made)

. replace region_nospace="NorthWest" if region=="North West"
(30 real changes made)

. replace region_nospace="SouthEast" if region=="South East"
(32 real changes made)

. replace region_nospace="WestMidlands" if region=="West Midlands"
(36 real changes made)

. replace region_nospace="YorkshireandTheHumber" if region=="Yorkshire and The Humber"
(26 real changes made)

. 
. ***IMD
. gen imd = 1 if imd_quintile == "1 (most deprived)"
(303 missing values generated)

. replace imd = 2 if imd_quintile == "2"
(55 real changes made)

. replace imd = 3 if imd_quintile == "3"
(51 real changes made)

. replace imd = 4 if imd_quintile == "4"
(53 real changes made)

. replace imd = 5 if imd_quintile == "5 (least deprived)"
(57 real changes made)

. replace imd = .u if imd_quintile == "Unknown"
(87 real changes made, 87 to missing)

. lab var imd "Index of multiple deprivation"

. lab define imd 1 "1 (most deprived)" ///
>                            2 "2" ///
>                            3 "3" ///
>                            4 "4" ///
>                            5 "5 (least deprived)" ///
>                            .u "Not known"

. lab val imd imd                    

. tab imd, missing

 Index of multiple |
       deprivation |      Freq.     Percent        Cum.
-------------------+-----------------------------------
 1 (most deprived) |         67       18.11       18.11
                 2 |         55       14.86       32.97
                 3 |         51       13.78       46.76
                 4 |         53       14.32       61.08
5 (least deprived) |         57       15.41       76.49
         Not known |         87       23.51      100.00
-------------------+-----------------------------------
             Total |        370      100.00

. drop imd_quintile

. 
. ***Body Mass Index
. *Recode strange values 
. replace bmi_value = . if bmi_value == 0 
(0 real changes made)

. replace bmi_value = . if !inrange(bmi_value, 10, 80)
(0 real changes made)

. 
. *Restrict to within 10 years of EIA diagnosis date and aged>16 
. gen bmi_time = (eia_code_date - bmi_date)/365.25
(370 missing values generated)

. gen bmi_age = age - bmi_time
(370 missing values generated)

. replace bmi_value = . if bmi_age < 16 
(0 real changes made)

. replace bmi_value = . if bmi_time > 10 & bmi_time != . 
(0 real changes made)

. 
. *Set to missing if no date, and vice versa 
. replace bmi_value = . if bmi_date == . 
(0 real changes made)

. replace bmi_date = . if bmi_value == . 
(0 real changes made)

. replace bmi_time = . if bmi_value == . 
(0 real changes made)

. replace bmi_age = . if bmi_value == . 
(0 real changes made)

. 
. *Create BMI categories
. gen     bmicat = .
(370 missing values generated)

. recode  bmicat . = 1 if bmi_value < 18.5
(0 changes made to bmicat)

. recode  bmicat . = 2 if bmi_value < 25
(0 changes made to bmicat)

. recode  bmicat . = 3 if bmi_value < 30
(0 changes made to bmicat)

. recode  bmicat . = 4 if bmi_value < 35
(0 changes made to bmicat)

. recode  bmicat . = 5 if bmi_value < 40
(0 changes made to bmicat)

. recode  bmicat . = 6 if bmi_value < .
(0 changes made to bmicat)

. replace bmicat = .u if bmi_value >= .
(370 real changes made, 370 to missing)

. 
. label define bmicat 1 "Underweight (<18.5)"     ///
>                                         2 "Normal (18.5-24.9)"          ///
>                                         3 "Overweight (25-29.9)"        ///
>                                         4 "Obese I (30-34.9)"           ///
>                                         5 "Obese II (35-39.9)"          ///
>                                         6 "Obese III (40+)"                     ///
>                                         .u "Not known"

.                                         
. label values bmicat bmicat

. lab var bmicat "BMI"

. tab bmicat, missing

                 BMI |      Freq.     Percent        Cum.
---------------------+-----------------------------------
           Not known |        370      100.00      100.00
---------------------+-----------------------------------
               Total |        370      100.00

. order bmicat, after (bmi_value)

. drop bmi_age bmi_time

. 
. *Create less granular categorisation
. recode bmicat 1/3 .u = 1 4 = 2 5 = 3 6 = 4, gen(obese4cat)
(370 differences between bmicat and obese4cat)

. 
. label define obese4cat  1 "No record of obesity"        ///
>                                                 2 "Obese I (30-34.9)"           ///
>                                                 3 "Obese II (35-39.9)"          ///
>                                                 4 "Obese III (40+)"             

. 
. label values obese4cat obese4cat

. order obese4cat, after(bmicat)

. 
. ***Smoking 
. label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Not known"

. 
. gen     smoke = 1  if smoking_status == "N"
(369 missing values generated)

. replace smoke = 2  if smoking_status == "E"
(133 real changes made)

. replace smoke = 3  if smoking_status == "S"
(235 real changes made)

. replace smoke = .u if smoking_status == "M"
(1 real change made, 1 to missing)

. replace smoke = .u if smoking_status == "" 
(0 real changes made)

. 
. label values smoke smoke

. lab var smoke "Smoking status"

. drop smoking_status

. tab smoke, missing

    Smoking |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
      Never |          1        0.27        0.27
     Former |        133       35.95       36.22
    Current |        235       63.51       99.73
  Not known |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. *Create non-missing 3-category variable for current smoking (assumes missing smoking i
> s never smoking)
. recode smoke .u = 1, gen(smoke_nomiss)
(1 differences between smoke and smoke_nomiss)

. order smoke_nomiss, after(smoke)

. label values smoke_nomiss smoke

. 
. **Clinical comorbidities
. ***Nb. not using creatinine of HBA1c values for now, just codes
. foreach disease in ckd dm ild copd cva lung_ca solid_ca haem_ca depr osteop frac dem c
> hd {
  2.         label define `disease'_before 0 "No" 1 "Yes"
  3.         label values `disease'_before `disease'_before
  4.         tab `disease'_before, missing
  5.         label define `disease'_after 0 "No" 1 "Yes"
  6.         label values `disease'_after `disease'_after
  7.         tab `disease'_after, missing
  8.         gen `disease'_new = 1 if (`disease'_after == 1 & `disease'_before == 0)
  9.         recode `disease'_new .=0
 10.         label define `disease'_new 0 "No" 1 "Yes"
 11.         label values `disease'_new `disease'_new
 12.         tab `disease'_new, missing
 13.         order `disease'_new, after(`disease'_after)
 14. }

 ckd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        294       79.46       79.46
        Yes |         76       20.54      100.00
------------+-----------------------------------
      Total |        370      100.00

  ckd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to ckd_new)

    ckd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

  dm_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        334       90.27       90.27
        Yes |         36        9.73      100.00
------------+-----------------------------------
      Total |        370      100.00

   dm_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to dm_new)

     dm_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 ild_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  ild_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        366       98.92       98.92
        Yes |          4        1.08      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to ild_new)

    ild_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

copd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        357       96.49       96.49
        Yes |         13        3.51      100.00
------------+-----------------------------------
      Total |        370      100.00

 copd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00
(369 missing values generated)
(369 changes made to copd_new)

   copd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

 cva_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        321       86.76       86.76
        Yes |         49       13.24      100.00
------------+-----------------------------------
      Total |        370      100.00

  cva_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        363       98.11       98.11
        Yes |          7        1.89      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to cva_new)

    cva_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        287       77.57       77.57
        Yes |         83       22.43      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to lung_ca_new)

lung_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_be |
       fore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |         39       10.54       10.54
        Yes |        331       89.46      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_af |
        ter |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        256       69.19       69.19
        Yes |        114       30.81      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to solid_ca_new)

solid_ca_ne |
          w |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        209       56.49       56.49
        Yes |        161       43.51      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        344       92.97       92.97
        Yes |         26        7.03      100.00
------------+-----------------------------------
      Total |        370      100.00
(359 missing values generated)
(359 changes made to haem_ca_new)

haem_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00

depr_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        349       94.32       94.32
        Yes |         21        5.68      100.00
------------+-----------------------------------
      Total |        370      100.00

 depr_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to depr_new)

   depr_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_befo |
         re |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_afte |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to osteop_new)

 osteop_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

frac_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 frac_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00
(370 missing values generated)
(370 changes made to frac_new)

   frac_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

 dem_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  dem_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to dem_new)

    dem_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

 chd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  chd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00
(361 missing values generated)
(361 changes made to chd_new)

    chd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        361       97.57       97.57
        Yes |          9        2.43      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. lab var ckd_before "Chronic kidney disease"

. lab var ckd_after "Chronic kidney disease"

. lab var ckd_new "Chronic kidney disease"

. lab var dm_before "Type 2 diabetes mellitus"

. lab var dm_after "Type 2 diabetes mellitus"

. lab var dm_new "Type 2 diabetes mellitus"

. lab var ild_before "Interstitial lung disease"

. lab var ild_after "Interstitial lung disease"

. lab var ild_new "Interstitial lung disease"

. lab var copd_before "COPD"

. lab var copd_after "COPD"

. lab var copd_new "COPD"

. lab var lung_ca_before "Lung cancer"

. lab var lung_ca_after "Lung cancer"

. lab var lung_ca_new "Lung cancer"

. lab var solid_ca_before "Solid organ cancer"

. lab var solid_ca_after "Solid organ cancer"

. lab var solid_ca_new "Solid organ cancer"

. lab var haem_ca_before "Haematological cancer"

. lab var haem_ca_after "Haematological cancer"

. lab var haem_ca_new "Haematological cancer"

. lab var depr_before "Depression"

. lab var depr_after "Depression"

. lab var depr_new "Depression"

. lab var osteop_before "Osteoporosis"

. lab var osteop_after "Osteoporosis"

. lab var osteop_new "Osteoporosis"

. lab var frac_before "Fragility fracture"

. lab var frac_after "Fragility fracture"

. lab var frac_new "Fragility fracture"

. lab var dem_before "Dementia"

. lab var dem_after "Dementia"

. lab var dem_new "Dementia"

. lab var chd_before "Coronary heart disease"

. lab var chd_after "Coronary heart disease"

. lab var chd_new "Coronary heart disease"

. 
. lab var rheum_appt "Rheumatology appointment"

. lab define rheum_appt 0 "No" 1 "Yes", modify

. lab val rheum_appt rheum_appt

. 
. **All patients should have diagnostic code============================================
> =================*/
. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

. keep if eia_code==1
(0 observations deleted)

. 
. **Check first rheum appt date was before diagnostic code date=========================
> =========*/
. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before EIA code appeared in GP recor
> d; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

. tab rheum_appt if rheum_appt_date>eia_code_date & rheum_appt_date!=. //confirm proport
> ion who had first rheum appt (i.e. not missing) after EIA code

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |          1      100.00      100.00
------------+-----------------------------------
      Total |          1      100.00

. tab rheum_appt if rheum_appt_date>(eia_code_date + 30) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 30 days after EIA code 
no observations

. tab rheum_appt if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 60 days after EIA code - should be none
no observations

. replace rheum_appt=0 if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //re
> place as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. replace rheum_appt_date=. if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=.
>  //replace as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. 
. **As above - for differently specified rheumatology appointments
. replace rheum_appt_any=0 if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt_any_
> date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt_any_date=. if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt
> _any_date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2=0 if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2_date=. if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date
> !=. //replace as missing those appts >60 days after EIA code_yea
(0 real changes made)

. replace rheum_appt3=0 if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt3_date=. if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date
> !=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt4=0 if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date!=. /
> /replace as missing those appts >60 days after EIA code
(8 real changes made)

. replace rheum_appt4_date=. if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date
> !=. //replace as missing those appts >60 days after EIA code
(8 real changes made, 8 to missing)

. 
. *Check if first csDMARD/biologic was after rheum appt date============================
> =========================*/
. **csDMARDs (not including high cost MTX; wouldn't be shared care)
. gen csdmard=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methotrexa
> te_inj==1 | sulfasalazine==1
(76 missing values generated)

. recode csdmard .=0 
(76 changes made to csdmard)

. tab csdmard, missing

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |         76       20.54       20.54
          1 |        294       79.46      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. **Date of first csDMARD script (not including high cost MTX prescriptions)
. gen csdmard_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date, met
> hotrexate_inj_date, sulfasalazine_date)
(76 missing values generated)

. format %td csdmard_date

. 
. /*
> **csDMARDs (including high cost MTX)
> gen csdmard_hcd=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methot
> rexate_inj==1 | methotrexate_hcd==1 | sulfasalazine==1
> recode csdmard_hcd .=0 
> tab csdmard_hcd, missing
> 
> **Date of first csDMARD script (including high cost MTX prescriptions)
> gen csdmard_hcd_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date,
>  methotrexate_inj_date, methotrexate_hcd_date, sulfasalazine_date)
> format %td csdmard_hcd_date
> 
> **Biologic use
> gen biologic=1 if abatacept==1 | adalimumab==1 | baricitinib==1 | certolizumab==1 | et
> anercept==1 | golimumab==1 | guselkumab==1 | infliximab==1 | ixekizumab==1 | rituximab
> ==1 | sarilumab==1 | secukinumab==1 | tocilizumab==1 | tofacitinib==1 | upadacitinib==
> 1 | ustekinumab==1 
> recode biologic .=0
> tab biologic, missing
> 
> **Date of first biologic script
> gen biologic_date=min(abatacept_date, adalimumab_date, baricitinib_date, certolizumab_
> date, etanercept_date, golimumab_date, guselkumab_date, infliximab_date, ixekizumab_da
> te, rituximab_date, sarilumab_date, secukinumab_date, tocilizumab_date, tofacitinib_da
> te, upadacitinib_date, ustekinumab_date)
> format %td biologic_date
> */
. 
. **Exclude if first csdmard was more than 60 days before first rheum appt
. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & csdmard_date<rheum_appt_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_d
> ate 

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_date //d
> rop if first csDMARD more than 60 days before first attendance at a rheum appt 
(7 observations deleted)

. tab csdmard if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmar
> d_date + 60)<rheum_appt_any_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmard_date 
> + 60)<rheum_appt_any_date //drop if first csDMARD more than 60 days before first captu
> red rheum appt that did not have first attendance tag
(7 observations deleted)

. 
. /*
> tab biologic if rheum_appt_date!=. & biologic_date!=. & biologic_date<rheum_appt_date 
> tab biologic if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_app
> t_date 
> drop if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_appt_date /
> /drop if first biologic more than 60 days before first rheum_appt_date
> tab biologic if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biol
> ogic_date + 60)<rheum_appt_any_date
> drop if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biologic_dat
> e + 60)<rheum_appt_any_date //drop if first biologic more than 60 days before first ca
> ptured rheum appt that did not have first attendance tag
> */
. 
. *Generate diagnosis date==============================================================
> =*/
. **Use diagnostic code date (in GP record) as diagnosis date
. gen diagnosis_date=eia_code_date

. format diagnosis_date %td

. 
. *Refine diagnostic window=============================================================
> */
. **Keep patients with diagnosis date after start date and before end date - should be n
> one dropped
. keep if diagnosis_date>=date("$start_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. keep if diagnosis_date<date("$end_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. 
. *Include only most recent EIA sub-diagnosis===========================================
> ==*/
. replace ra_code =0 if psa_code_date > ra_code_date & psa_code_date !=.
(0 real changes made)

. replace ra_code =0 if anksp_code_date > ra_code_date & anksp_code_date !=.
(0 real changes made)

. replace ra_code =0 if undiff_code_date > ra_code_date & undiff_code_date !=.
(0 real changes made)

. replace psa_code =0 if ra_code_date >= psa_code_date & ra_code_date !=.
(0 real changes made)

. replace psa_code =0 if anksp_code_date > psa_code_date & anksp_code_date !=.
(0 real changes made)

. replace psa_code =0 if undiff_code_date > psa_code_date & undiff_code_date !=.
(0 real changes made)

. replace anksp_code =0 if psa_code_date >= anksp_code_date & psa_code_date !=.
(0 real changes made)

. replace anksp_code =0 if ra_code_date >= anksp_code_date & ra_code_date !=.
(0 real changes made)

. replace anksp_code =0 if undiff_code_date > anksp_code_date & undiff_code_date !=.
(0 real changes made)

. replace undiff_code =0 if ra_code_date >= undiff_code_date & ra_code_date !=.
(0 real changes made)

. replace undiff_code =0 if psa_code_date >= undiff_code_date & psa_code_date !=.
(0 real changes made)

. replace undiff_code =0 if anksp_code_date >= undiff_code_date & anksp_code_date !=.
(0 real changes made)

. gen eia_diagnosis=1 if ra_code==1
(67 missing values generated)

. replace eia_diagnosis=2 if psa_code==1
(31 real changes made)

. replace eia_diagnosis=3 if anksp_code==1
(29 real changes made)

. replace eia_diagnosis=4 if undiff_code==1
(7 real changes made)

. lab define eia_diagnosis 1 "RA" 2 "PsA" 3 "AxSpA" 4 "Undiff IA", modify

. lab val eia_diagnosis eia_diagnosis

. tab eia_diagnosis, missing

eia_diagnos |
         is |      Freq.     Percent        Cum.
------------+-----------------------------------
         RA |        289       81.18       81.18
        PsA |         31        8.71       89.89
      AxSpA |         29        8.15       98.03
  Undiff IA |          7        1.97      100.00
------------+-----------------------------------
      Total |        356      100.00

. drop if eia_diagnosis==. //should be none
(0 observations deleted)

. 
. decode eia_diagnosis, gen(eia_diag)

. replace eia_diag="Undiff_IA" if eia_diagnosis==4
(7 real changes made)

. 
. *Split into 6-month time windows=========================================*/
. **Month/Year of GP diagnostic code
. gen year_diag=year(eia_code_date)

. format year_diag %ty

. gen month_diag=month(eia_code_date)

. gen mo_year_diagn=ym(year_diag, month_diag)

. format mo_year_diagn %tmMon-CCYY

. generate str16 mo_year_diagn_s = strofreal(mo_year_diagn,"%tmCCYY!mNN")

. lab var mo_year_diagn "Month/Year of Diagnosis"

. lab var mo_year_diagn_s "Month/Year of Diagnosis"

. 
. **Month/Year of rheum appt
. gen year_appt=year(rheum_appt_date) if rheum_appt_date!=.
(355 missing values generated)

. format year_appt %ty

. gen month_appt=month(rheum_appt_date) if rheum_appt_date!=. 
(355 missing values generated)

. gen mo_year_appt=ym(year_appt, month_appt)
(355 missing values generated)

. format mo_year_appt %tmMon-CCYY

. generate str16 mo_year_appt_s = strofreal(mo_year_appt,"%tmCCYY!mNN")

. 
. **Separate into 3-month time windows (for diagnosis date)
. gen diagnosis_3m = qofd(diagnosis_date)

. format diagnosis_3m %tq

. lab var diagnosis_3m "Time period for diagnosis"

. tab diagnosis_3m, missing

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        1.97        1.97
     2016q3 |          6        1.69        3.65
     2016q4 |         11        3.09        6.74
     2017q1 |          7        1.97        8.71
     2017q2 |          7        1.97       10.67
     2017q3 |         13        3.65       14.33
     2017q4 |          9        2.53       16.85
     2018q1 |         14        3.93       20.79
     2018q2 |         10        2.81       23.60
     2018q3 |         15        4.21       27.81
     2018q4 |         13        3.65       31.46
     2019q1 |          7        1.97       33.43
     2019q2 |         16        4.49       37.92
     2019q3 |          7        1.97       39.89
     2019q4 |          8        2.25       42.13
     2020q1 |         12        3.37       45.51
     2020q2 |          9        2.53       48.03
     2020q3 |         10        2.81       50.84
     2020q4 |         11        3.09       53.93
     2021q1 |         10        2.81       56.74
     2021q2 |          9        2.53       59.27
     2021q3 |         14        3.93       63.20
     2021q4 |         17        4.78       67.98
     2022q1 |          8        2.25       70.22
     2022q2 |          7        1.97       72.19
     2022q3 |          6        1.69       73.88
     2022q4 |          7        1.97       75.84
     2023q1 |         13        3.65       79.49
     2023q2 |          6        1.69       81.18
     2023q3 |          6        1.69       82.87
     2023q4 |         14        3.93       86.80
     2024q1 |         10        2.81       89.61
     2024q2 |         13        3.65       93.26
     2024q3 |         12        3.37       96.63
     2024q4 |          7        1.97       98.60
     2025q1 |          5        1.40      100.00
------------+-----------------------------------
      Total |        356      100.00

. bys eia_diagnosis: tab diagnosis_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        2.42        2.42
     2016q3 |          5        1.73        4.15
     2016q4 |          9        3.11        7.27
     2017q1 |          7        2.42        9.69
     2017q2 |          7        2.42       12.11
     2017q3 |         12        4.15       16.26
     2017q4 |          9        3.11       19.38
     2018q1 |         12        4.15       23.53
     2018q2 |          6        2.08       25.61
     2018q3 |         11        3.81       29.41
     2018q4 |         11        3.81       33.22
     2019q1 |          7        2.42       35.64
     2019q2 |         10        3.46       39.10
     2019q3 |          5        1.73       40.83
     2019q4 |          5        1.73       42.56
     2020q1 |          9        3.11       45.67
     2020q2 |          9        3.11       48.79
     2020q3 |          7        2.42       51.21
     2020q4 |          8        2.77       53.98
     2021q1 |          8        2.77       56.75
     2021q2 |          7        2.42       59.17
     2021q3 |         11        3.81       62.98
     2021q4 |         15        5.19       68.17
     2022q1 |          7        2.42       70.59
     2022q2 |          5        1.73       72.32
     2022q3 |          4        1.38       73.70
     2022q4 |          6        2.08       75.78
     2023q1 |          7        2.42       78.20
     2023q2 |          4        1.38       79.58
     2023q3 |          5        1.73       81.31
     2023q4 |         11        3.81       85.12
     2024q1 |         10        3.46       88.58
     2024q2 |         12        4.15       92.73
     2024q3 |         11        3.81       96.54
     2024q4 |          5        1.73       98.27
     2025q1 |          5        1.73      100.00
------------+-----------------------------------
      Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q4 |          2        6.45        6.45
     2018q2 |          4       12.90       19.35
     2018q3 |          1        3.23       22.58
     2019q2 |          3        9.68       32.26
     2019q3 |          2        6.45       38.71
     2019q4 |          1        3.23       41.94
     2020q1 |          1        3.23       45.16
     2020q3 |          1        3.23       48.39
     2020q4 |          2        6.45       54.84
     2021q1 |          2        6.45       61.29
     2021q3 |          2        6.45       67.74
     2022q1 |          1        3.23       70.97
     2022q2 |          1        3.23       74.19
     2022q3 |          1        3.23       77.42
     2022q4 |          1        3.23       80.65
     2023q1 |          2        6.45       87.10
     2023q3 |          1        3.23       90.32
     2023q4 |          2        6.45       96.77
     2024q4 |          1        3.23      100.00
------------+-----------------------------------
      Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q3 |          1        3.45        3.45
     2017q3 |          1        3.45        6.90
     2018q1 |          2        6.90       13.79
     2018q3 |          3       10.34       24.14
     2018q4 |          1        3.45       27.59
     2019q2 |          3       10.34       37.93
     2019q4 |          1        3.45       41.38
     2020q1 |          2        6.90       48.28
     2020q3 |          2        6.90       55.17
     2020q4 |          1        3.45       58.62
     2021q2 |          2        6.90       65.52
     2021q3 |          1        3.45       68.97
     2021q4 |          1        3.45       72.41
     2023q1 |          2        6.90       79.31
     2023q2 |          2        6.90       86.21
     2023q4 |          1        3.45       89.66
     2024q2 |          1        3.45       93.10
     2024q3 |          1        3.45       96.55
     2024q4 |          1        3.45      100.00
------------+-----------------------------------
      Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2018q4 |          1       14.29       14.29
     2019q4 |          1       14.29       28.57
     2021q4 |          1       14.29       42.86
     2022q2 |          1       14.29       57.14
     2022q3 |          1       14.29       71.43
     2023q1 |          2       28.57      100.00
------------+-----------------------------------
      Total |          7      100.00


. 
. **Separate into 12-month time windows (for diagnosis date)
. gen base_date = date("$start_date", "DMY")

. gen diagnosis_year = ((floor(diagnosis_date - base_date) / 365.25) + 1) if ((diagnosis
> _date >= base_date) & (diagnosis_date <= (date("$end_date", "DMY"))))

. lab var diagnosis_year "Year of diagnosis"

. local base_year = year(date("$start_date", "DMY"))

. summarize diagnosis_year, meanonly

. local max_year = ceil(r(max))

. forvalues i = 1/`max_year' {
  2.     local start = `base_year' + `i' - 1
  3.     local end = `start' + 1
  4.     label define diagnosis_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val diagnosis_year diagnosis_year_lbl

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. gen base_year = year(date("$start_date", "DMY"))

. 
end of do-file

. br  base_date diagnosis_year base_year

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. gen end_year = year(date("$end_date", "DMY"))

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. import delimited "$projectdir/output/dataset.csv", clear
(encoding automatically selected: ISO-8859-1)
(88 vars, 374 obs)

. 
. **Set Ado file path
. adopath + "$projectdir/analysis/extra_ados"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\documents/"
  [5]  (PLUS)      "C:\users\PUBLIC\documents/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/an
> alysis/extra_ados"
  [8]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory
> _rheum/analysis/extra_ados"

. 
. **Set index dates ===========================================================*/
. global year_preceding = "01/04/2015"

. global start_date = "01/04/2016"

. global end_date = "31/03/2025"

. 
. **Conversion for dates====================================================*
. ***Variables ending in _date that are string
. ds *_date, has(type string)
eia_code_d~e  cva_before~e  chd_after_~e  depr_after~e  rheum~4_date  rtt_cl_sta~e
ra_code_date  lung_ca_be~e  dm_after_d~e  osteop_aft~e  rheum~e_date  rtt_cl_ref~e
psa_code_d~e  solid_ca_b~e  ild_after_~e  dem_after_~e  ~erheum_date  rtt_cl_end~e
anksp_code~e  haem_ca_be~e  copd_after~e  creatinin~te  l~ecode_date  rtt_op_sta~e
undiff_cod~e  ckd_before~e  cva_after_~e  rf_date       leflunomid~e  rtt_op_ref~e
chd_before~e  depr_befor~e  lung_ca_af~e  r~_appt_date  metho~e_date  rtt_op_end~e
dm_before_~e  osteop_bef~e  solid_ca_a~e  rheum~y_date  metho~j_date
ild_before~e  frac_befor~e  haem_ca_af~e  rheum~2_date  sulfasalaz~e
copd_befor~e  dem_before~e  ckd_after_~e  rheum~3_date  hydroxychl~e

. local string_dates `r(varlist)'

. foreach var of local string_dates {
  2.     gen `var'_num = date(`var', "YMD")
  3.     format `var'_num %td
  4.     order `var'_num, after(`var')
  5.     drop `var'
  6.     rename `var'_num `var'
  7. }
(74 missing values generated)
(339 missing values generated)
(343 missing values generated)
(366 missing values generated)
(311 missing values generated)
(337 missing values generated)
(311 missing values generated)
(361 missing values generated)
(324 missing values generated)
(291 missing values generated)
(40 missing values generated)
(213 missing values generated)
(297 missing values generated)
(353 missing values generated)
(369 missing values generated)
(372 missing values generated)
(311 missing values generated)
(363 missing values generated)
(372 missing values generated)
(370 missing values generated)
(373 missing values generated)
(367 missing values generated)
(366 missing values generated)
(259 missing values generated)
(348 missing values generated)
(366 missing values generated)
(368 missing values generated)
(372 missing values generated)
(366 missing values generated)
(373 missing values generated)
(373 missing values generated)
(366 missing values generated)
(356 missing values generated)
(368 missing values generated)
(343 missing values generated)
(335 missing values generated)
(373 missing values generated)
(373 missing values generated)
(346 missing values generated)
(285 missing values generated)
(220 missing values generated)
(133 missing values generated)
(260 missing values generated)
(234 missing values generated)
(364 missing values generated)
(364 missing values generated)
(364 missing values generated)
(365 missing values generated)
(365 missing values generated)
(365 missing values generated)

. 
. ***Variables ending in _date that are numeric
. foreach var of varlist *_date {
  2.     capture confirm string variable `var'
  3.     if _rc != 0 {
  4.         format `var' %td
  5.     }
  6. }

. 
. ***Create binary indicator for each
. ds *_date
eia_code_d~e  lung_ca_be~e  ild_after_~e  dem_after_~e  rheum~e_date  rtt_cl_sta~e
ra_code_date  solid_ca_b~e  copd_after~e  creatinin~te  ~erheum_date  rtt_cl_ref~e
psa_code_d~e  haem_ca_be~e  cva_after_~e  rf_date       l~ecode_date  rtt_cl_end~e
anksp_code~e  ckd_before~e  lung_ca_af~e  bmi_date      ~frheum_date  rtt_op_sta~e
undiff_cod~e  depr_befor~e  solid_ca_a~e  r~_appt_date  l~fcode_date  rtt_op_ref~e
chd_before~e  osteop_bef~e  haem_ca_af~e  rheum~y_date  leflunomid~e  rtt_op_end~e
dm_before_~e  frac_befor~e  ckd_after_~e  rheum~2_date  metho~e_date
ild_before~e  dem_before~e  depr_after~e  rheum~3_date  metho~j_date
copd_befor~e  chd_after_~e  osteop_aft~e  rheum~4_date  sulfasalaz~e
cva_before~e  dm_after_d~e  frac_after~e  r~eappt_date  hydroxychl~e

. local dates `r(varlist)'

. foreach var of local dates {
  2.         local newvar =  substr("`var'", 1, length("`var'") - 5)
  3.         gen `newvar' = (`var'!=. )
  4.         order `newvar', after(`var')
  5. }

. 
. /*
> **Will also need to amend conversion for biologic dates ==============================
> ======================*
> ***Some dates are given with month/year only, so adding day 15 to enable them to be pr
> ocessed as dates 
> 
> foreach var of varlist   abatacept_date                                         ///
>                                                  adalimumab_date                      
>                   ///     
>                                                  baricitinib_date                     
>                   ///
>                                                  certolizumab_date                    
>                   ///
>                                                  etanercept_date                      
>                   ///
>                                                  golimumab_date                       
>                   ///
>                                                  guselkumab_date                      
>                   ///     
>                                                  infliximab_date                      
>                   ///
>                                                  ixekizumab_date                      
>                   ///
>                                                  methotrexate_hcd_date                
>           ///
>                                                  rituximab_date                       
>                   ///
>                                                  sarilumab_date                       
>                   ///
>                                                  secukinumab_date                     
>                   ///     
>                                                  tocilizumab_date                     
>                   ///
>                                                  tofacitinib_date                     
>                   ///
>                                                  upadacitinib_date                    
>                   ///
>                                                  ustekinumab_date                     
>                   ///
>                                                  {
>                                                         
>                 capture confirm string variable `var'
>                 if _rc!=0 {
>                         assert `var'==.
>                         rename `var' `var'_date
>                 }
>         
>                 else {
>                                 replace `var' = `var' + "-15"
>                                 rename `var' `var'_dstr
>                                 replace `var'_dstr = " " if `var'_dstr == "-15"
>                                 gen `var'_date = date(`var'_dstr, "YMD") 
>                                 order `var'_date, after(`var'_dstr)
>                                 drop `var'_dstr
>                 }
>         
>         format `var'_date %td
> }
> */
.                                          
. **Create and label variables =========================================================
> ==*/
. 
. ***Age variables
. *Create categorised age
. drop if age<18 & age !=.
(0 observations deleted)

. drop if age>109 & age !=.
(4 observations deleted)

. drop if age==.
(0 observations deleted)

. lab var age "Age at diagnosis"

. 
. recode age 18/39.9999 = 1 /// 
>            40/49.9999 = 2 ///
>                    50/59.9999 = 3 ///
>                60/69.9999 = 4 ///
>                    70/79.9999 = 5 ///
>                    80/max = 6, gen(agegroup) 
(370 differences between age and agegroup)

. 
. label define agegroup   1 "18-39" ///
>                                                 2 "40-49" ///
>                                                 3 "50-59" ///
>                                                 4 "60-69" ///
>                                                 5 "70-79" ///
>                                                 6 "80+"

.                                                 
. label values agegroup agegroup

. lab var agegroup "Age group"

. tab agegroup, missing

  Age group |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-39 |        160       43.24       43.24
      40-49 |         53       14.32       57.57
      50-59 |         33        8.92       66.49
      60-69 |         23        6.22       72.70
      70-79 |         32        8.65       81.35
        80+ |         69       18.65      100.00
------------+-----------------------------------
      Total |        370      100.00

. order agegroup, after(age)

. 
. ***Sex
. gen male = 1 if sex == "male"
(197 missing values generated)

. replace male = 0 if sex == "female"
(197 real changes made)

. lab var male "Male"

. lab define male 0 "No" 1 "Yes", modify

. lab val male male

. tab male, missing

       Male |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        197       53.24       53.24
        Yes |        173       46.76      100.00
------------+-----------------------------------
      Total |        370      100.00

. order male, after(sex)

. 
. ***Ethnicity
. gen ethnicity_n = 1 if ethnicity == "White"
(341 missing values generated)

. replace ethnicity_n = 2 if ethnicity == "Asian or Asian British"
(19 real changes made)

. replace ethnicity_n = 3 if ethnicity == "Black or Black British"
(25 real changes made)

. replace ethnicity_n = 4 if ethnicity == "Mixed"
(14 real changes made)

. replace ethnicity_n = 5 if ethnicity == "Chinese or Other Ethnic Groups"
(29 real changes made)

. replace ethnicity_n = 6 if ethnicity == "Unknown"
(254 real changes made)

. 
. 
. label define ethnicity_n        1 "White"                                             
>   ///
>                                                         2 "Asian or Asian British"    
>           ///
>                                                         3 "Black or Black British"    
>   ///
>                                                         4 "Mixed"                     
>                           ///
>                                                         5 "Chinese or Other Ethnic Gro
> ups" ///
>                                                         6 "Not known", modify

.                                                         
. label values ethnicity_n ethnicity_n

. lab var ethnicity_n "Ethnicity"

. tab ethnicity_n, missing

                     Ethnicity |      Freq.     Percent        Cum.
-------------------------------+-----------------------------------
                         White |         29        7.84        7.84
        Asian or Asian British |         19        5.14       12.97
        Black or Black British |         25        6.76       19.73
                         Mixed |         14        3.78       23.51
Chinese or Other Ethnic Groups |         29        7.84       31.35
                     Not known |        254       68.65      100.00
-------------------------------+-----------------------------------
                         Total |        370      100.00

. drop ethnicity

. rename ethnicity_n ethnicity 

. 
. ***Practice regions
. encode region, gen(nuts_region)

. tab region, missing

                  region |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
                         |         84       22.70       22.70
                    East |         43       11.62       34.32
           East Midlands |         22        5.95       40.27
                  London |         31        8.38       48.65
              North East |         32        8.65       57.30
              North West |         30        8.11       65.41
              South East |         32        8.65       74.05
              South West |         34        9.19       83.24
           West Midlands |         36        9.73       92.97
Yorkshire and The Humber |         26        7.03      100.00
-------------------------+-----------------------------------
                   Total |        370      100.00

. replace region="Not known" if region==""
(84 real changes made)

. gen region_nospace=region

. replace region_nospace="SouthWest" if region=="South West"
(34 real changes made)

. replace region_nospace="EastMidlands" if region=="East Midlands"
(22 real changes made)

. replace region_nospace="East" if region=="East"
(0 real changes made)

. replace region_nospace="London" if region=="London"
(0 real changes made)

. replace region_nospace="NorthEast" if region=="North East"
(32 real changes made)

. replace region_nospace="NorthWest" if region=="North West"
(30 real changes made)

. replace region_nospace="SouthEast" if region=="South East"
(32 real changes made)

. replace region_nospace="WestMidlands" if region=="West Midlands"
(36 real changes made)

. replace region_nospace="YorkshireandTheHumber" if region=="Yorkshire and The Humber"
(26 real changes made)

. 
. ***IMD
. gen imd = 1 if imd_quintile == "1 (most deprived)"
(303 missing values generated)

. replace imd = 2 if imd_quintile == "2"
(55 real changes made)

. replace imd = 3 if imd_quintile == "3"
(51 real changes made)

. replace imd = 4 if imd_quintile == "4"
(53 real changes made)

. replace imd = 5 if imd_quintile == "5 (least deprived)"
(57 real changes made)

. replace imd = .u if imd_quintile == "Unknown"
(87 real changes made, 87 to missing)

. lab var imd "Index of multiple deprivation"

. lab define imd 1 "1 (most deprived)" ///
>                            2 "2" ///
>                            3 "3" ///
>                            4 "4" ///
>                            5 "5 (least deprived)" ///
>                            .u "Not known"

. lab val imd imd                    

. tab imd, missing

 Index of multiple |
       deprivation |      Freq.     Percent        Cum.
-------------------+-----------------------------------
 1 (most deprived) |         67       18.11       18.11
                 2 |         55       14.86       32.97
                 3 |         51       13.78       46.76
                 4 |         53       14.32       61.08
5 (least deprived) |         57       15.41       76.49
         Not known |         87       23.51      100.00
-------------------+-----------------------------------
             Total |        370      100.00

. drop imd_quintile

. 
. ***Body Mass Index
. *Recode strange values 
. replace bmi_value = . if bmi_value == 0 
(0 real changes made)

. replace bmi_value = . if !inrange(bmi_value, 10, 80)
(0 real changes made)

. 
. *Restrict to within 10 years of EIA diagnosis date and aged>16 
. gen bmi_time = (eia_code_date - bmi_date)/365.25
(370 missing values generated)

. gen bmi_age = age - bmi_time
(370 missing values generated)

. replace bmi_value = . if bmi_age < 16 
(0 real changes made)

. replace bmi_value = . if bmi_time > 10 & bmi_time != . 
(0 real changes made)

. 
. *Set to missing if no date, and vice versa 
. replace bmi_value = . if bmi_date == . 
(0 real changes made)

. replace bmi_date = . if bmi_value == . 
(0 real changes made)

. replace bmi_time = . if bmi_value == . 
(0 real changes made)

. replace bmi_age = . if bmi_value == . 
(0 real changes made)

. 
. *Create BMI categories
. gen     bmicat = .
(370 missing values generated)

. recode  bmicat . = 1 if bmi_value < 18.5
(0 changes made to bmicat)

. recode  bmicat . = 2 if bmi_value < 25
(0 changes made to bmicat)

. recode  bmicat . = 3 if bmi_value < 30
(0 changes made to bmicat)

. recode  bmicat . = 4 if bmi_value < 35
(0 changes made to bmicat)

. recode  bmicat . = 5 if bmi_value < 40
(0 changes made to bmicat)

. recode  bmicat . = 6 if bmi_value < .
(0 changes made to bmicat)

. replace bmicat = .u if bmi_value >= .
(370 real changes made, 370 to missing)

. 
. label define bmicat 1 "Underweight (<18.5)"     ///
>                                         2 "Normal (18.5-24.9)"          ///
>                                         3 "Overweight (25-29.9)"        ///
>                                         4 "Obese I (30-34.9)"           ///
>                                         5 "Obese II (35-39.9)"          ///
>                                         6 "Obese III (40+)"                     ///
>                                         .u "Not known"

.                                         
. label values bmicat bmicat

. lab var bmicat "BMI"

. tab bmicat, missing

                 BMI |      Freq.     Percent        Cum.
---------------------+-----------------------------------
           Not known |        370      100.00      100.00
---------------------+-----------------------------------
               Total |        370      100.00

. order bmicat, after (bmi_value)

. drop bmi_age bmi_time

. 
. *Create less granular categorisation
. recode bmicat 1/3 .u = 1 4 = 2 5 = 3 6 = 4, gen(obese4cat)
(370 differences between bmicat and obese4cat)

. 
. label define obese4cat  1 "No record of obesity"        ///
>                                                 2 "Obese I (30-34.9)"           ///
>                                                 3 "Obese II (35-39.9)"          ///
>                                                 4 "Obese III (40+)"             

. 
. label values obese4cat obese4cat

. order obese4cat, after(bmicat)

. 
. ***Smoking 
. label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Not known"

. 
. gen     smoke = 1  if smoking_status == "N"
(369 missing values generated)

. replace smoke = 2  if smoking_status == "E"
(133 real changes made)

. replace smoke = 3  if smoking_status == "S"
(235 real changes made)

. replace smoke = .u if smoking_status == "M"
(1 real change made, 1 to missing)

. replace smoke = .u if smoking_status == "" 
(0 real changes made)

. 
. label values smoke smoke

. lab var smoke "Smoking status"

. drop smoking_status

. tab smoke, missing

    Smoking |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
      Never |          1        0.27        0.27
     Former |        133       35.95       36.22
    Current |        235       63.51       99.73
  Not known |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. *Create non-missing 3-category variable for current smoking (assumes missing smoking i
> s never smoking)
. recode smoke .u = 1, gen(smoke_nomiss)
(1 differences between smoke and smoke_nomiss)

. order smoke_nomiss, after(smoke)

. label values smoke_nomiss smoke

. 
. **Clinical comorbidities
. ***Nb. not using creatinine of HBA1c values for now, just codes
. foreach disease in ckd dm ild copd cva lung_ca solid_ca haem_ca depr osteop frac dem c
> hd {
  2.         label define `disease'_before 0 "No" 1 "Yes"
  3.         label values `disease'_before `disease'_before
  4.         tab `disease'_before, missing
  5.         label define `disease'_after 0 "No" 1 "Yes"
  6.         label values `disease'_after `disease'_after
  7.         tab `disease'_after, missing
  8.         gen `disease'_new = 1 if (`disease'_after == 1 & `disease'_before == 0)
  9.         recode `disease'_new .=0
 10.         label define `disease'_new 0 "No" 1 "Yes"
 11.         label values `disease'_new `disease'_new
 12.         tab `disease'_new, missing
 13.         order `disease'_new, after(`disease'_after)
 14. }

 ckd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        294       79.46       79.46
        Yes |         76       20.54      100.00
------------+-----------------------------------
      Total |        370      100.00

  ckd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to ckd_new)

    ckd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

  dm_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        334       90.27       90.27
        Yes |         36        9.73      100.00
------------+-----------------------------------
      Total |        370      100.00

   dm_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to dm_new)

     dm_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 ild_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  ild_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        366       98.92       98.92
        Yes |          4        1.08      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to ild_new)

    ild_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

copd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        357       96.49       96.49
        Yes |         13        3.51      100.00
------------+-----------------------------------
      Total |        370      100.00

 copd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00
(369 missing values generated)
(369 changes made to copd_new)

   copd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

 cva_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        321       86.76       86.76
        Yes |         49       13.24      100.00
------------+-----------------------------------
      Total |        370      100.00

  cva_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        363       98.11       98.11
        Yes |          7        1.89      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to cva_new)

    cva_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        287       77.57       77.57
        Yes |         83       22.43      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to lung_ca_new)

lung_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_be |
       fore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |         39       10.54       10.54
        Yes |        331       89.46      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_af |
        ter |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        256       69.19       69.19
        Yes |        114       30.81      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to solid_ca_new)

solid_ca_ne |
          w |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        209       56.49       56.49
        Yes |        161       43.51      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        344       92.97       92.97
        Yes |         26        7.03      100.00
------------+-----------------------------------
      Total |        370      100.00
(359 missing values generated)
(359 changes made to haem_ca_new)

haem_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00

depr_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        349       94.32       94.32
        Yes |         21        5.68      100.00
------------+-----------------------------------
      Total |        370      100.00

 depr_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to depr_new)

   depr_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_befo |
         re |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_afte |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to osteop_new)

 osteop_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

frac_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 frac_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00
(370 missing values generated)
(370 changes made to frac_new)

   frac_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

 dem_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  dem_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to dem_new)

    dem_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

 chd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  chd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00
(361 missing values generated)
(361 changes made to chd_new)

    chd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        361       97.57       97.57
        Yes |          9        2.43      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. lab var ckd_before "Chronic kidney disease"

. lab var ckd_after "Chronic kidney disease"

. lab var ckd_new "Chronic kidney disease"

. lab var dm_before "Type 2 diabetes mellitus"

. lab var dm_after "Type 2 diabetes mellitus"

. lab var dm_new "Type 2 diabetes mellitus"

. lab var ild_before "Interstitial lung disease"

. lab var ild_after "Interstitial lung disease"

. lab var ild_new "Interstitial lung disease"

. lab var copd_before "COPD"

. lab var copd_after "COPD"

. lab var copd_new "COPD"

. lab var lung_ca_before "Lung cancer"

. lab var lung_ca_after "Lung cancer"

. lab var lung_ca_new "Lung cancer"

. lab var solid_ca_before "Solid organ cancer"

. lab var solid_ca_after "Solid organ cancer"

. lab var solid_ca_new "Solid organ cancer"

. lab var haem_ca_before "Haematological cancer"

. lab var haem_ca_after "Haematological cancer"

. lab var haem_ca_new "Haematological cancer"

. lab var depr_before "Depression"

. lab var depr_after "Depression"

. lab var depr_new "Depression"

. lab var osteop_before "Osteoporosis"

. lab var osteop_after "Osteoporosis"

. lab var osteop_new "Osteoporosis"

. lab var frac_before "Fragility fracture"

. lab var frac_after "Fragility fracture"

. lab var frac_new "Fragility fracture"

. lab var dem_before "Dementia"

. lab var dem_after "Dementia"

. lab var dem_new "Dementia"

. lab var chd_before "Coronary heart disease"

. lab var chd_after "Coronary heart disease"

. lab var chd_new "Coronary heart disease"

. 
. lab var rheum_appt "Rheumatology appointment"

. lab define rheum_appt 0 "No" 1 "Yes", modify

. lab val rheum_appt rheum_appt

. 
. **All patients should have diagnostic code============================================
> =================*/
. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

. keep if eia_code==1
(0 observations deleted)

. 
. **Check first rheum appt date was before diagnostic code date=========================
> =========*/
. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before EIA code appeared in GP recor
> d; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

. tab rheum_appt if rheum_appt_date>eia_code_date & rheum_appt_date!=. //confirm proport
> ion who had first rheum appt (i.e. not missing) after EIA code

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |          1      100.00      100.00
------------+-----------------------------------
      Total |          1      100.00

. tab rheum_appt if rheum_appt_date>(eia_code_date + 30) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 30 days after EIA code 
no observations

. tab rheum_appt if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 60 days after EIA code - should be none
no observations

. replace rheum_appt=0 if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //re
> place as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. replace rheum_appt_date=. if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=.
>  //replace as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. 
. **As above - for differently specified rheumatology appointments
. replace rheum_appt_any=0 if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt_any_
> date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt_any_date=. if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt
> _any_date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2=0 if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2_date=. if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date
> !=. //replace as missing those appts >60 days after EIA code_yea
(0 real changes made)

. replace rheum_appt3=0 if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt3_date=. if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date
> !=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt4=0 if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date!=. /
> /replace as missing those appts >60 days after EIA code
(8 real changes made)

. replace rheum_appt4_date=. if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date
> !=. //replace as missing those appts >60 days after EIA code
(8 real changes made, 8 to missing)

. 
. *Check if first csDMARD/biologic was after rheum appt date============================
> =========================*/
. **csDMARDs (not including high cost MTX; wouldn't be shared care)
. gen csdmard=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methotrexa
> te_inj==1 | sulfasalazine==1
(76 missing values generated)

. recode csdmard .=0 
(76 changes made to csdmard)

. tab csdmard, missing

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |         76       20.54       20.54
          1 |        294       79.46      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. **Date of first csDMARD script (not including high cost MTX prescriptions)
. gen csdmard_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date, met
> hotrexate_inj_date, sulfasalazine_date)
(76 missing values generated)

. format %td csdmard_date

. 
. /*
> **csDMARDs (including high cost MTX)
> gen csdmard_hcd=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methot
> rexate_inj==1 | methotrexate_hcd==1 | sulfasalazine==1
> recode csdmard_hcd .=0 
> tab csdmard_hcd, missing
> 
> **Date of first csDMARD script (including high cost MTX prescriptions)
> gen csdmard_hcd_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date,
>  methotrexate_inj_date, methotrexate_hcd_date, sulfasalazine_date)
> format %td csdmard_hcd_date
> 
> **Biologic use
> gen biologic=1 if abatacept==1 | adalimumab==1 | baricitinib==1 | certolizumab==1 | et
> anercept==1 | golimumab==1 | guselkumab==1 | infliximab==1 | ixekizumab==1 | rituximab
> ==1 | sarilumab==1 | secukinumab==1 | tocilizumab==1 | tofacitinib==1 | upadacitinib==
> 1 | ustekinumab==1 
> recode biologic .=0
> tab biologic, missing
> 
> **Date of first biologic script
> gen biologic_date=min(abatacept_date, adalimumab_date, baricitinib_date, certolizumab_
> date, etanercept_date, golimumab_date, guselkumab_date, infliximab_date, ixekizumab_da
> te, rituximab_date, sarilumab_date, secukinumab_date, tocilizumab_date, tofacitinib_da
> te, upadacitinib_date, ustekinumab_date)
> format %td biologic_date
> */
. 
. **Exclude if first csdmard was more than 60 days before first rheum appt
. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & csdmard_date<rheum_appt_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_d
> ate 

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_date //d
> rop if first csDMARD more than 60 days before first attendance at a rheum appt 
(7 observations deleted)

. tab csdmard if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmar
> d_date + 60)<rheum_appt_any_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmard_date 
> + 60)<rheum_appt_any_date //drop if first csDMARD more than 60 days before first captu
> red rheum appt that did not have first attendance tag
(7 observations deleted)

. 
. /*
> tab biologic if rheum_appt_date!=. & biologic_date!=. & biologic_date<rheum_appt_date 
> tab biologic if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_app
> t_date 
> drop if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_appt_date /
> /drop if first biologic more than 60 days before first rheum_appt_date
> tab biologic if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biol
> ogic_date + 60)<rheum_appt_any_date
> drop if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biologic_dat
> e + 60)<rheum_appt_any_date //drop if first biologic more than 60 days before first ca
> ptured rheum appt that did not have first attendance tag
> */
. 
. *Generate diagnosis date==============================================================
> =*/
. **Use diagnostic code date (in GP record) as diagnosis date
. gen diagnosis_date=eia_code_date

. format diagnosis_date %td

. 
. *Refine diagnostic window=============================================================
> */
. **Keep patients with diagnosis date after start date and before end date - should be n
> one dropped
. keep if diagnosis_date>=date("$start_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. keep if diagnosis_date<date("$end_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. 
. *Include only most recent EIA sub-diagnosis===========================================
> ==*/
. replace ra_code =0 if psa_code_date > ra_code_date & psa_code_date !=.
(0 real changes made)

. replace ra_code =0 if anksp_code_date > ra_code_date & anksp_code_date !=.
(0 real changes made)

. replace ra_code =0 if undiff_code_date > ra_code_date & undiff_code_date !=.
(0 real changes made)

. replace psa_code =0 if ra_code_date >= psa_code_date & ra_code_date !=.
(0 real changes made)

. replace psa_code =0 if anksp_code_date > psa_code_date & anksp_code_date !=.
(0 real changes made)

. replace psa_code =0 if undiff_code_date > psa_code_date & undiff_code_date !=.
(0 real changes made)

. replace anksp_code =0 if psa_code_date >= anksp_code_date & psa_code_date !=.
(0 real changes made)

. replace anksp_code =0 if ra_code_date >= anksp_code_date & ra_code_date !=.
(0 real changes made)

. replace anksp_code =0 if undiff_code_date > anksp_code_date & undiff_code_date !=.
(0 real changes made)

. replace undiff_code =0 if ra_code_date >= undiff_code_date & ra_code_date !=.
(0 real changes made)

. replace undiff_code =0 if psa_code_date >= undiff_code_date & psa_code_date !=.
(0 real changes made)

. replace undiff_code =0 if anksp_code_date >= undiff_code_date & anksp_code_date !=.
(0 real changes made)

. gen eia_diagnosis=1 if ra_code==1
(67 missing values generated)

. replace eia_diagnosis=2 if psa_code==1
(31 real changes made)

. replace eia_diagnosis=3 if anksp_code==1
(29 real changes made)

. replace eia_diagnosis=4 if undiff_code==1
(7 real changes made)

. lab define eia_diagnosis 1 "RA" 2 "PsA" 3 "AxSpA" 4 "Undiff IA", modify

. lab val eia_diagnosis eia_diagnosis

. tab eia_diagnosis, missing

eia_diagnos |
         is |      Freq.     Percent        Cum.
------------+-----------------------------------
         RA |        289       81.18       81.18
        PsA |         31        8.71       89.89
      AxSpA |         29        8.15       98.03
  Undiff IA |          7        1.97      100.00
------------+-----------------------------------
      Total |        356      100.00

. drop if eia_diagnosis==. //should be none
(0 observations deleted)

. 
. decode eia_diagnosis, gen(eia_diag)

. replace eia_diag="Undiff_IA" if eia_diagnosis==4
(7 real changes made)

. 
. *Split into 6-month time windows=========================================*/
. **Month/Year of GP diagnostic code
. gen year_diag=year(eia_code_date)

. format year_diag %ty

. gen month_diag=month(eia_code_date)

. gen mo_year_diagn=ym(year_diag, month_diag)

. format mo_year_diagn %tmMon-CCYY

. generate str16 mo_year_diagn_s = strofreal(mo_year_diagn,"%tmCCYY!mNN")

. lab var mo_year_diagn "Month/Year of Diagnosis"

. lab var mo_year_diagn_s "Month/Year of Diagnosis"

. 
. **Month/Year of rheum appt
. gen year_appt=year(rheum_appt_date) if rheum_appt_date!=.
(355 missing values generated)

. format year_appt %ty

. gen month_appt=month(rheum_appt_date) if rheum_appt_date!=. 
(355 missing values generated)

. gen mo_year_appt=ym(year_appt, month_appt)
(355 missing values generated)

. format mo_year_appt %tmMon-CCYY

. generate str16 mo_year_appt_s = strofreal(mo_year_appt,"%tmCCYY!mNN")

. 
. **Separate into 3-month time windows (for diagnosis date)
. gen diagnosis_3m = qofd(diagnosis_date)

. format diagnosis_3m %tq

. lab var diagnosis_3m "Time period for diagnosis"

. tab diagnosis_3m, missing

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        1.97        1.97
     2016q3 |          6        1.69        3.65
     2016q4 |         11        3.09        6.74
     2017q1 |          7        1.97        8.71
     2017q2 |          7        1.97       10.67
     2017q3 |         13        3.65       14.33
     2017q4 |          9        2.53       16.85
     2018q1 |         14        3.93       20.79
     2018q2 |         10        2.81       23.60
     2018q3 |         15        4.21       27.81
     2018q4 |         13        3.65       31.46
     2019q1 |          7        1.97       33.43
     2019q2 |         16        4.49       37.92
     2019q3 |          7        1.97       39.89
     2019q4 |          8        2.25       42.13
     2020q1 |         12        3.37       45.51
     2020q2 |          9        2.53       48.03
     2020q3 |         10        2.81       50.84
     2020q4 |         11        3.09       53.93
     2021q1 |         10        2.81       56.74
     2021q2 |          9        2.53       59.27
     2021q3 |         14        3.93       63.20
     2021q4 |         17        4.78       67.98
     2022q1 |          8        2.25       70.22
     2022q2 |          7        1.97       72.19
     2022q3 |          6        1.69       73.88
     2022q4 |          7        1.97       75.84
     2023q1 |         13        3.65       79.49
     2023q2 |          6        1.69       81.18
     2023q3 |          6        1.69       82.87
     2023q4 |         14        3.93       86.80
     2024q1 |         10        2.81       89.61
     2024q2 |         13        3.65       93.26
     2024q3 |         12        3.37       96.63
     2024q4 |          7        1.97       98.60
     2025q1 |          5        1.40      100.00
------------+-----------------------------------
      Total |        356      100.00

. bys eia_diagnosis: tab diagnosis_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        2.42        2.42
     2016q3 |          5        1.73        4.15
     2016q4 |          9        3.11        7.27
     2017q1 |          7        2.42        9.69
     2017q2 |          7        2.42       12.11
     2017q3 |         12        4.15       16.26
     2017q4 |          9        3.11       19.38
     2018q1 |         12        4.15       23.53
     2018q2 |          6        2.08       25.61
     2018q3 |         11        3.81       29.41
     2018q4 |         11        3.81       33.22
     2019q1 |          7        2.42       35.64
     2019q2 |         10        3.46       39.10
     2019q3 |          5        1.73       40.83
     2019q4 |          5        1.73       42.56
     2020q1 |          9        3.11       45.67
     2020q2 |          9        3.11       48.79
     2020q3 |          7        2.42       51.21
     2020q4 |          8        2.77       53.98
     2021q1 |          8        2.77       56.75
     2021q2 |          7        2.42       59.17
     2021q3 |         11        3.81       62.98
     2021q4 |         15        5.19       68.17
     2022q1 |          7        2.42       70.59
     2022q2 |          5        1.73       72.32
     2022q3 |          4        1.38       73.70
     2022q4 |          6        2.08       75.78
     2023q1 |          7        2.42       78.20
     2023q2 |          4        1.38       79.58
     2023q3 |          5        1.73       81.31
     2023q4 |         11        3.81       85.12
     2024q1 |         10        3.46       88.58
     2024q2 |         12        4.15       92.73
     2024q3 |         11        3.81       96.54
     2024q4 |          5        1.73       98.27
     2025q1 |          5        1.73      100.00
------------+-----------------------------------
      Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q4 |          2        6.45        6.45
     2018q2 |          4       12.90       19.35
     2018q3 |          1        3.23       22.58
     2019q2 |          3        9.68       32.26
     2019q3 |          2        6.45       38.71
     2019q4 |          1        3.23       41.94
     2020q1 |          1        3.23       45.16
     2020q3 |          1        3.23       48.39
     2020q4 |          2        6.45       54.84
     2021q1 |          2        6.45       61.29
     2021q3 |          2        6.45       67.74
     2022q1 |          1        3.23       70.97
     2022q2 |          1        3.23       74.19
     2022q3 |          1        3.23       77.42
     2022q4 |          1        3.23       80.65
     2023q1 |          2        6.45       87.10
     2023q3 |          1        3.23       90.32
     2023q4 |          2        6.45       96.77
     2024q4 |          1        3.23      100.00
------------+-----------------------------------
      Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q3 |          1        3.45        3.45
     2017q3 |          1        3.45        6.90
     2018q1 |          2        6.90       13.79
     2018q3 |          3       10.34       24.14
     2018q4 |          1        3.45       27.59
     2019q2 |          3       10.34       37.93
     2019q4 |          1        3.45       41.38
     2020q1 |          2        6.90       48.28
     2020q3 |          2        6.90       55.17
     2020q4 |          1        3.45       58.62
     2021q2 |          2        6.90       65.52
     2021q3 |          1        3.45       68.97
     2021q4 |          1        3.45       72.41
     2023q1 |          2        6.90       79.31
     2023q2 |          2        6.90       86.21
     2023q4 |          1        3.45       89.66
     2024q2 |          1        3.45       93.10
     2024q3 |          1        3.45       96.55
     2024q4 |          1        3.45      100.00
------------+-----------------------------------
      Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2018q4 |          1       14.29       14.29
     2019q4 |          1       14.29       28.57
     2021q4 |          1       14.29       42.86
     2022q2 |          1       14.29       57.14
     2022q3 |          1       14.29       71.43
     2023q1 |          2       28.57      100.00
------------+-----------------------------------
      Total |          7      100.00


. 
. **Separate into 12-month time windows (for diagnosis date)
. gen base_date = date("$start_date", "DMY")

. gen diagnosis_year = ((floor(diagnosis_date - base_date) / 365.25) + 1) if ((diagnosis
> _date >= base_date) & (diagnosis_date <= (date("$end_date", "DMY"))))

. lab var diagnosis_year "Year of diagnosis"

. local base_year = year(date("$start_date", "DMY"))

. local end_year = year(date("$end_date", "DMY"))

. local max_year = end_year - base_year
end_year not found
r(111);

end of do-file

r(111);

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. gen base_year = year(date("$start_date", "DMY"))

. gen end_year = year(date("$end_date", "DMY"))

. local max_year = end_year - base_year

. forvalues i = 1/`max_year' {
  2.     local start = `base_year' + `i' - 1
  3.     local end = `start' + 1
  4.     label define diagnosis_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val diagnosis_year diagnosis_year_lbl

. 
end of do-file

. drop diagnosis_year

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. 
. import delimited "$projectdir/output/dataset.csv", clear
(encoding automatically selected: ISO-8859-1)
(88 vars, 374 obs)

. 
. **Set Ado file path
. adopath + "$projectdir/analysis/extra_ados"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\documents/"
  [5]  (PLUS)      "C:\users\PUBLIC\documents/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/an
> alysis/extra_ados"
  [8]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory
> _rheum/analysis/extra_ados"

. 
. **Set index dates ===========================================================*/
. global year_preceding = "01/04/2015"

. global start_date = "01/04/2016"

. global end_date = "31/03/2025"

. 
. **Conversion for dates====================================================*
. ***Variables ending in _date that are string
. ds *_date, has(type string)
eia_code_d~e  cva_before~e  chd_after_~e  depr_after~e  rheum~4_date  rtt_cl_sta~e
ra_code_date  lung_ca_be~e  dm_after_d~e  osteop_aft~e  rheum~e_date  rtt_cl_ref~e
psa_code_d~e  solid_ca_b~e  ild_after_~e  dem_after_~e  ~erheum_date  rtt_cl_end~e
anksp_code~e  haem_ca_be~e  copd_after~e  creatinin~te  l~ecode_date  rtt_op_sta~e
undiff_cod~e  ckd_before~e  cva_after_~e  rf_date       leflunomid~e  rtt_op_ref~e
chd_before~e  depr_befor~e  lung_ca_af~e  r~_appt_date  metho~e_date  rtt_op_end~e
dm_before_~e  osteop_bef~e  solid_ca_a~e  rheum~y_date  metho~j_date
ild_before~e  frac_befor~e  haem_ca_af~e  rheum~2_date  sulfasalaz~e
copd_befor~e  dem_before~e  ckd_after_~e  rheum~3_date  hydroxychl~e

. local string_dates `r(varlist)'

. foreach var of local string_dates {
  2.     gen `var'_num = date(`var', "YMD")
  3.     format `var'_num %td
  4.     order `var'_num, after(`var')
  5.     drop `var'
  6.     rename `var'_num `var'
  7. }
(74 missing values generated)
(339 missing values generated)
(343 missing values generated)
(366 missing values generated)
(311 missing values generated)
(337 missing values generated)
(311 missing values generated)
(361 missing values generated)
(324 missing values generated)
(291 missing values generated)
(40 missing values generated)
(213 missing values generated)
(297 missing values generated)
(353 missing values generated)
(369 missing values generated)
(372 missing values generated)
(311 missing values generated)
(363 missing values generated)
(372 missing values generated)
(370 missing values generated)
(373 missing values generated)
(367 missing values generated)
(366 missing values generated)
(259 missing values generated)
(348 missing values generated)
(366 missing values generated)
(368 missing values generated)
(372 missing values generated)
(366 missing values generated)
(373 missing values generated)
(373 missing values generated)
(366 missing values generated)
(356 missing values generated)
(368 missing values generated)
(343 missing values generated)
(335 missing values generated)
(373 missing values generated)
(373 missing values generated)
(346 missing values generated)
(285 missing values generated)
(220 missing values generated)
(133 missing values generated)
(260 missing values generated)
(234 missing values generated)
(364 missing values generated)
(364 missing values generated)
(364 missing values generated)
(365 missing values generated)
(365 missing values generated)
(365 missing values generated)

. 
. ***Variables ending in _date that are numeric
. foreach var of varlist *_date {
  2.     capture confirm string variable `var'
  3.     if _rc != 0 {
  4.         format `var' %td
  5.     }
  6. }

. 
. ***Create binary indicator for each
. ds *_date
eia_code_d~e  lung_ca_be~e  ild_after_~e  dem_after_~e  rheum~e_date  rtt_cl_sta~e
ra_code_date  solid_ca_b~e  copd_after~e  creatinin~te  ~erheum_date  rtt_cl_ref~e
psa_code_d~e  haem_ca_be~e  cva_after_~e  rf_date       l~ecode_date  rtt_cl_end~e
anksp_code~e  ckd_before~e  lung_ca_af~e  bmi_date      ~frheum_date  rtt_op_sta~e
undiff_cod~e  depr_befor~e  solid_ca_a~e  r~_appt_date  l~fcode_date  rtt_op_ref~e
chd_before~e  osteop_bef~e  haem_ca_af~e  rheum~y_date  leflunomid~e  rtt_op_end~e
dm_before_~e  frac_befor~e  ckd_after_~e  rheum~2_date  metho~e_date
ild_before~e  dem_before~e  depr_after~e  rheum~3_date  metho~j_date
copd_befor~e  chd_after_~e  osteop_aft~e  rheum~4_date  sulfasalaz~e
cva_before~e  dm_after_d~e  frac_after~e  r~eappt_date  hydroxychl~e

. local dates `r(varlist)'

. foreach var of local dates {
  2.         local newvar =  substr("`var'", 1, length("`var'") - 5)
  3.         gen `newvar' = (`var'!=. )
  4.         order `newvar', after(`var')
  5. }

. 
. /*
> **Will also need to amend conversion for biologic dates ==============================
> ======================*
> ***Some dates are given with month/year only, so adding day 15 to enable them to be pr
> ocessed as dates 
> 
> foreach var of varlist   abatacept_date                                         ///
>                                                  adalimumab_date                      
>                   ///     
>                                                  baricitinib_date                     
>                   ///
>                                                  certolizumab_date                    
>                   ///
>                                                  etanercept_date                      
>                   ///
>                                                  golimumab_date                       
>                   ///
>                                                  guselkumab_date                      
>                   ///     
>                                                  infliximab_date                      
>                   ///
>                                                  ixekizumab_date                      
>                   ///
>                                                  methotrexate_hcd_date                
>           ///
>                                                  rituximab_date                       
>                   ///
>                                                  sarilumab_date                       
>                   ///
>                                                  secukinumab_date                     
>                   ///     
>                                                  tocilizumab_date                     
>                   ///
>                                                  tofacitinib_date                     
>                   ///
>                                                  upadacitinib_date                    
>                   ///
>                                                  ustekinumab_date                     
>                   ///
>                                                  {
>                                                         
>                 capture confirm string variable `var'
>                 if _rc!=0 {
>                         assert `var'==.
>                         rename `var' `var'_date
>                 }
>         
>                 else {
>                                 replace `var' = `var' + "-15"
>                                 rename `var' `var'_dstr
>                                 replace `var'_dstr = " " if `var'_dstr == "-15"
>                                 gen `var'_date = date(`var'_dstr, "YMD") 
>                                 order `var'_date, after(`var'_dstr)
>                                 drop `var'_dstr
>                 }
>         
>         format `var'_date %td
> }
> */
.                                          
. **Create and label variables =========================================================
> ==*/
. 
. ***Age variables
. *Create categorised age
. drop if age<18 & age !=.
(0 observations deleted)

. drop if age>109 & age !=.
(4 observations deleted)

. drop if age==.
(0 observations deleted)

. lab var age "Age at diagnosis"

. 
. recode age 18/39.9999 = 1 /// 
>            40/49.9999 = 2 ///
>                    50/59.9999 = 3 ///
>                60/69.9999 = 4 ///
>                    70/79.9999 = 5 ///
>                    80/max = 6, gen(agegroup) 
(370 differences between age and agegroup)

. 
. label define agegroup   1 "18-39" ///
>                                                 2 "40-49" ///
>                                                 3 "50-59" ///
>                                                 4 "60-69" ///
>                                                 5 "70-79" ///
>                                                 6 "80+"

.                                                 
. label values agegroup agegroup

. lab var agegroup "Age group"

. tab agegroup, missing

  Age group |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-39 |        160       43.24       43.24
      40-49 |         53       14.32       57.57
      50-59 |         33        8.92       66.49
      60-69 |         23        6.22       72.70
      70-79 |         32        8.65       81.35
        80+ |         69       18.65      100.00
------------+-----------------------------------
      Total |        370      100.00

. order agegroup, after(age)

. 
. ***Sex
. gen male = 1 if sex == "male"
(197 missing values generated)

. replace male = 0 if sex == "female"
(197 real changes made)

. lab var male "Male"

. lab define male 0 "No" 1 "Yes", modify

. lab val male male

. tab male, missing

       Male |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        197       53.24       53.24
        Yes |        173       46.76      100.00
------------+-----------------------------------
      Total |        370      100.00

. order male, after(sex)

. 
. ***Ethnicity
. gen ethnicity_n = 1 if ethnicity == "White"
(341 missing values generated)

. replace ethnicity_n = 2 if ethnicity == "Asian or Asian British"
(19 real changes made)

. replace ethnicity_n = 3 if ethnicity == "Black or Black British"
(25 real changes made)

. replace ethnicity_n = 4 if ethnicity == "Mixed"
(14 real changes made)

. replace ethnicity_n = 5 if ethnicity == "Chinese or Other Ethnic Groups"
(29 real changes made)

. replace ethnicity_n = 6 if ethnicity == "Unknown"
(254 real changes made)

. 
. 
. label define ethnicity_n        1 "White"                                             
>   ///
>                                                         2 "Asian or Asian British"    
>           ///
>                                                         3 "Black or Black British"    
>   ///
>                                                         4 "Mixed"                     
>                           ///
>                                                         5 "Chinese or Other Ethnic Gro
> ups" ///
>                                                         6 "Not known", modify

.                                                         
. label values ethnicity_n ethnicity_n

. lab var ethnicity_n "Ethnicity"

. tab ethnicity_n, missing

                     Ethnicity |      Freq.     Percent        Cum.
-------------------------------+-----------------------------------
                         White |         29        7.84        7.84
        Asian or Asian British |         19        5.14       12.97
        Black or Black British |         25        6.76       19.73
                         Mixed |         14        3.78       23.51
Chinese or Other Ethnic Groups |         29        7.84       31.35
                     Not known |        254       68.65      100.00
-------------------------------+-----------------------------------
                         Total |        370      100.00

. drop ethnicity

. rename ethnicity_n ethnicity 

. 
. ***Practice regions
. encode region, gen(nuts_region)

. tab region, missing

                  region |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
                         |         84       22.70       22.70
                    East |         43       11.62       34.32
           East Midlands |         22        5.95       40.27
                  London |         31        8.38       48.65
              North East |         32        8.65       57.30
              North West |         30        8.11       65.41
              South East |         32        8.65       74.05
              South West |         34        9.19       83.24
           West Midlands |         36        9.73       92.97
Yorkshire and The Humber |         26        7.03      100.00
-------------------------+-----------------------------------
                   Total |        370      100.00

. replace region="Not known" if region==""
(84 real changes made)

. gen region_nospace=region

. replace region_nospace="SouthWest" if region=="South West"
(34 real changes made)

. replace region_nospace="EastMidlands" if region=="East Midlands"
(22 real changes made)

. replace region_nospace="East" if region=="East"
(0 real changes made)

. replace region_nospace="London" if region=="London"
(0 real changes made)

. replace region_nospace="NorthEast" if region=="North East"
(32 real changes made)

. replace region_nospace="NorthWest" if region=="North West"
(30 real changes made)

. replace region_nospace="SouthEast" if region=="South East"
(32 real changes made)

. replace region_nospace="WestMidlands" if region=="West Midlands"
(36 real changes made)

. replace region_nospace="YorkshireandTheHumber" if region=="Yorkshire and The Humber"
(26 real changes made)

. 
. ***IMD
. gen imd = 1 if imd_quintile == "1 (most deprived)"
(303 missing values generated)

. replace imd = 2 if imd_quintile == "2"
(55 real changes made)

. replace imd = 3 if imd_quintile == "3"
(51 real changes made)

. replace imd = 4 if imd_quintile == "4"
(53 real changes made)

. replace imd = 5 if imd_quintile == "5 (least deprived)"
(57 real changes made)

. replace imd = .u if imd_quintile == "Unknown"
(87 real changes made, 87 to missing)

. lab var imd "Index of multiple deprivation"

. lab define imd 1 "1 (most deprived)" ///
>                            2 "2" ///
>                            3 "3" ///
>                            4 "4" ///
>                            5 "5 (least deprived)" ///
>                            .u "Not known"

. lab val imd imd                    

. tab imd, missing

 Index of multiple |
       deprivation |      Freq.     Percent        Cum.
-------------------+-----------------------------------
 1 (most deprived) |         67       18.11       18.11
                 2 |         55       14.86       32.97
                 3 |         51       13.78       46.76
                 4 |         53       14.32       61.08
5 (least deprived) |         57       15.41       76.49
         Not known |         87       23.51      100.00
-------------------+-----------------------------------
             Total |        370      100.00

. drop imd_quintile

. 
. ***Body Mass Index
. *Recode strange values 
. replace bmi_value = . if bmi_value == 0 
(0 real changes made)

. replace bmi_value = . if !inrange(bmi_value, 10, 80)
(0 real changes made)

. 
. *Restrict to within 10 years of EIA diagnosis date and aged>16 
. gen bmi_time = (eia_code_date - bmi_date)/365.25
(370 missing values generated)

. gen bmi_age = age - bmi_time
(370 missing values generated)

. replace bmi_value = . if bmi_age < 16 
(0 real changes made)

. replace bmi_value = . if bmi_time > 10 & bmi_time != . 
(0 real changes made)

. 
. *Set to missing if no date, and vice versa 
. replace bmi_value = . if bmi_date == . 
(0 real changes made)

. replace bmi_date = . if bmi_value == . 
(0 real changes made)

. replace bmi_time = . if bmi_value == . 
(0 real changes made)

. replace bmi_age = . if bmi_value == . 
(0 real changes made)

. 
. *Create BMI categories
. gen     bmicat = .
(370 missing values generated)

. recode  bmicat . = 1 if bmi_value < 18.5
(0 changes made to bmicat)

. recode  bmicat . = 2 if bmi_value < 25
(0 changes made to bmicat)

. recode  bmicat . = 3 if bmi_value < 30
(0 changes made to bmicat)

. recode  bmicat . = 4 if bmi_value < 35
(0 changes made to bmicat)

. recode  bmicat . = 5 if bmi_value < 40
(0 changes made to bmicat)

. recode  bmicat . = 6 if bmi_value < .
(0 changes made to bmicat)

. replace bmicat = .u if bmi_value >= .
(370 real changes made, 370 to missing)

. 
. label define bmicat 1 "Underweight (<18.5)"     ///
>                                         2 "Normal (18.5-24.9)"          ///
>                                         3 "Overweight (25-29.9)"        ///
>                                         4 "Obese I (30-34.9)"           ///
>                                         5 "Obese II (35-39.9)"          ///
>                                         6 "Obese III (40+)"                     ///
>                                         .u "Not known"

.                                         
. label values bmicat bmicat

. lab var bmicat "BMI"

. tab bmicat, missing

                 BMI |      Freq.     Percent        Cum.
---------------------+-----------------------------------
           Not known |        370      100.00      100.00
---------------------+-----------------------------------
               Total |        370      100.00

. order bmicat, after (bmi_value)

. drop bmi_age bmi_time

. 
. *Create less granular categorisation
. recode bmicat 1/3 .u = 1 4 = 2 5 = 3 6 = 4, gen(obese4cat)
(370 differences between bmicat and obese4cat)

. 
. label define obese4cat  1 "No record of obesity"        ///
>                                                 2 "Obese I (30-34.9)"           ///
>                                                 3 "Obese II (35-39.9)"          ///
>                                                 4 "Obese III (40+)"             

. 
. label values obese4cat obese4cat

. order obese4cat, after(bmicat)

. 
. ***Smoking 
. label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Not known"

. 
. gen     smoke = 1  if smoking_status == "N"
(369 missing values generated)

. replace smoke = 2  if smoking_status == "E"
(133 real changes made)

. replace smoke = 3  if smoking_status == "S"
(235 real changes made)

. replace smoke = .u if smoking_status == "M"
(1 real change made, 1 to missing)

. replace smoke = .u if smoking_status == "" 
(0 real changes made)

. 
. label values smoke smoke

. lab var smoke "Smoking status"

. drop smoking_status

. tab smoke, missing

    Smoking |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
      Never |          1        0.27        0.27
     Former |        133       35.95       36.22
    Current |        235       63.51       99.73
  Not known |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. *Create non-missing 3-category variable for current smoking (assumes missing smoking i
> s never smoking)
. recode smoke .u = 1, gen(smoke_nomiss)
(1 differences between smoke and smoke_nomiss)

. order smoke_nomiss, after(smoke)

. label values smoke_nomiss smoke

. 
. **Clinical comorbidities
. ***Nb. not using creatinine of HBA1c values for now, just codes
. foreach disease in ckd dm ild copd cva lung_ca solid_ca haem_ca depr osteop frac dem c
> hd {
  2.         label define `disease'_before 0 "No" 1 "Yes"
  3.         label values `disease'_before `disease'_before
  4.         tab `disease'_before, missing
  5.         label define `disease'_after 0 "No" 1 "Yes"
  6.         label values `disease'_after `disease'_after
  7.         tab `disease'_after, missing
  8.         gen `disease'_new = 1 if (`disease'_after == 1 & `disease'_before == 0)
  9.         recode `disease'_new .=0
 10.         label define `disease'_new 0 "No" 1 "Yes"
 11.         label values `disease'_new `disease'_new
 12.         tab `disease'_new, missing
 13.         order `disease'_new, after(`disease'_after)
 14. }

 ckd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        294       79.46       79.46
        Yes |         76       20.54      100.00
------------+-----------------------------------
      Total |        370      100.00

  ckd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to ckd_new)

    ckd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

  dm_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        334       90.27       90.27
        Yes |         36        9.73      100.00
------------+-----------------------------------
      Total |        370      100.00

   dm_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to dm_new)

     dm_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 ild_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  ild_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        366       98.92       98.92
        Yes |          4        1.08      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to ild_new)

    ild_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

copd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        357       96.49       96.49
        Yes |         13        3.51      100.00
------------+-----------------------------------
      Total |        370      100.00

 copd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00
(369 missing values generated)
(369 changes made to copd_new)

   copd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

 cva_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        321       86.76       86.76
        Yes |         49       13.24      100.00
------------+-----------------------------------
      Total |        370      100.00

  cva_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        363       98.11       98.11
        Yes |          7        1.89      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to cva_new)

    cva_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        287       77.57       77.57
        Yes |         83       22.43      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to lung_ca_new)

lung_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_be |
       fore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |         39       10.54       10.54
        Yes |        331       89.46      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_af |
        ter |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        256       69.19       69.19
        Yes |        114       30.81      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to solid_ca_new)

solid_ca_ne |
          w |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        209       56.49       56.49
        Yes |        161       43.51      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        344       92.97       92.97
        Yes |         26        7.03      100.00
------------+-----------------------------------
      Total |        370      100.00
(359 missing values generated)
(359 changes made to haem_ca_new)

haem_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00

depr_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        349       94.32       94.32
        Yes |         21        5.68      100.00
------------+-----------------------------------
      Total |        370      100.00

 depr_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to depr_new)

   depr_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_befo |
         re |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_afte |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to osteop_new)

 osteop_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

frac_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 frac_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00
(370 missing values generated)
(370 changes made to frac_new)

   frac_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

 dem_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  dem_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to dem_new)

    dem_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

 chd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  chd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00
(361 missing values generated)
(361 changes made to chd_new)

    chd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        361       97.57       97.57
        Yes |          9        2.43      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. lab var ckd_before "Chronic kidney disease"

. lab var ckd_after "Chronic kidney disease"

. lab var ckd_new "Chronic kidney disease"

. lab var dm_before "Type 2 diabetes mellitus"

. lab var dm_after "Type 2 diabetes mellitus"

. lab var dm_new "Type 2 diabetes mellitus"

. lab var ild_before "Interstitial lung disease"

. lab var ild_after "Interstitial lung disease"

. lab var ild_new "Interstitial lung disease"

. lab var copd_before "COPD"

. lab var copd_after "COPD"

. lab var copd_new "COPD"

. lab var lung_ca_before "Lung cancer"

. lab var lung_ca_after "Lung cancer"

. lab var lung_ca_new "Lung cancer"

. lab var solid_ca_before "Solid organ cancer"

. lab var solid_ca_after "Solid organ cancer"

. lab var solid_ca_new "Solid organ cancer"

. lab var haem_ca_before "Haematological cancer"

. lab var haem_ca_after "Haematological cancer"

. lab var haem_ca_new "Haematological cancer"

. lab var depr_before "Depression"

. lab var depr_after "Depression"

. lab var depr_new "Depression"

. lab var osteop_before "Osteoporosis"

. lab var osteop_after "Osteoporosis"

. lab var osteop_new "Osteoporosis"

. lab var frac_before "Fragility fracture"

. lab var frac_after "Fragility fracture"

. lab var frac_new "Fragility fracture"

. lab var dem_before "Dementia"

. lab var dem_after "Dementia"

. lab var dem_new "Dementia"

. lab var chd_before "Coronary heart disease"

. lab var chd_after "Coronary heart disease"

. lab var chd_new "Coronary heart disease"

. 
. lab var rheum_appt "Rheumatology appointment"

. lab define rheum_appt 0 "No" 1 "Yes", modify

. lab val rheum_appt rheum_appt

. 
. **All patients should have diagnostic code============================================
> =================*/
. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

. keep if eia_code==1
(0 observations deleted)

. 
. **Check first rheum appt date was before diagnostic code date=========================
> =========*/
. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before EIA code appeared in GP recor
> d; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

. tab rheum_appt if rheum_appt_date>eia_code_date & rheum_appt_date!=. //confirm proport
> ion who had first rheum appt (i.e. not missing) after EIA code

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |          1      100.00      100.00
------------+-----------------------------------
      Total |          1      100.00

. tab rheum_appt if rheum_appt_date>(eia_code_date + 30) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 30 days after EIA code 
no observations

. tab rheum_appt if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 60 days after EIA code - should be none
no observations

. replace rheum_appt=0 if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //re
> place as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. replace rheum_appt_date=. if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=.
>  //replace as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. 
. **As above - for differently specified rheumatology appointments
. replace rheum_appt_any=0 if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt_any_
> date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt_any_date=. if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt
> _any_date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2=0 if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2_date=. if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date
> !=. //replace as missing those appts >60 days after EIA code_yea
(0 real changes made)

. replace rheum_appt3=0 if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt3_date=. if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date
> !=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt4=0 if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date!=. /
> /replace as missing those appts >60 days after EIA code
(8 real changes made)

. replace rheum_appt4_date=. if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date
> !=. //replace as missing those appts >60 days after EIA code
(8 real changes made, 8 to missing)

. 
. *Check if first csDMARD/biologic was after rheum appt date============================
> =========================*/
. **csDMARDs (not including high cost MTX; wouldn't be shared care)
. gen csdmard=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methotrexa
> te_inj==1 | sulfasalazine==1
(76 missing values generated)

. recode csdmard .=0 
(76 changes made to csdmard)

. tab csdmard, missing

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |         76       20.54       20.54
          1 |        294       79.46      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. **Date of first csDMARD script (not including high cost MTX prescriptions)
. gen csdmard_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date, met
> hotrexate_inj_date, sulfasalazine_date)
(76 missing values generated)

. format %td csdmard_date

. 
. /*
> **csDMARDs (including high cost MTX)
> gen csdmard_hcd=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methot
> rexate_inj==1 | methotrexate_hcd==1 | sulfasalazine==1
> recode csdmard_hcd .=0 
> tab csdmard_hcd, missing
> 
> **Date of first csDMARD script (including high cost MTX prescriptions)
> gen csdmard_hcd_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date,
>  methotrexate_inj_date, methotrexate_hcd_date, sulfasalazine_date)
> format %td csdmard_hcd_date
> 
> **Biologic use
> gen biologic=1 if abatacept==1 | adalimumab==1 | baricitinib==1 | certolizumab==1 | et
> anercept==1 | golimumab==1 | guselkumab==1 | infliximab==1 | ixekizumab==1 | rituximab
> ==1 | sarilumab==1 | secukinumab==1 | tocilizumab==1 | tofacitinib==1 | upadacitinib==
> 1 | ustekinumab==1 
> recode biologic .=0
> tab biologic, missing
> 
> **Date of first biologic script
> gen biologic_date=min(abatacept_date, adalimumab_date, baricitinib_date, certolizumab_
> date, etanercept_date, golimumab_date, guselkumab_date, infliximab_date, ixekizumab_da
> te, rituximab_date, sarilumab_date, secukinumab_date, tocilizumab_date, tofacitinib_da
> te, upadacitinib_date, ustekinumab_date)
> format %td biologic_date
> */
. 
. **Exclude if first csdmard was more than 60 days before first rheum appt
. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & csdmard_date<rheum_appt_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_d
> ate 

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_date //d
> rop if first csDMARD more than 60 days before first attendance at a rheum appt 
(7 observations deleted)

. tab csdmard if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmar
> d_date + 60)<rheum_appt_any_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmard_date 
> + 60)<rheum_appt_any_date //drop if first csDMARD more than 60 days before first captu
> red rheum appt that did not have first attendance tag
(7 observations deleted)

. 
. /*
> tab biologic if rheum_appt_date!=. & biologic_date!=. & biologic_date<rheum_appt_date 
> tab biologic if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_app
> t_date 
> drop if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_appt_date /
> /drop if first biologic more than 60 days before first rheum_appt_date
> tab biologic if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biol
> ogic_date + 60)<rheum_appt_any_date
> drop if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biologic_dat
> e + 60)<rheum_appt_any_date //drop if first biologic more than 60 days before first ca
> ptured rheum appt that did not have first attendance tag
> */
. 
. *Generate diagnosis date==============================================================
> =*/
. **Use diagnostic code date (in GP record) as diagnosis date
. gen diagnosis_date=eia_code_date

. format diagnosis_date %td

. 
. *Refine diagnostic window=============================================================
> */
. **Keep patients with diagnosis date after start date and before end date - should be n
> one dropped
. keep if diagnosis_date>=date("$start_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. keep if diagnosis_date<date("$end_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. 
. *Include only most recent EIA sub-diagnosis===========================================
> ==*/
. replace ra_code =0 if psa_code_date > ra_code_date & psa_code_date !=.
(0 real changes made)

. replace ra_code =0 if anksp_code_date > ra_code_date & anksp_code_date !=.
(0 real changes made)

. replace ra_code =0 if undiff_code_date > ra_code_date & undiff_code_date !=.
(0 real changes made)

. replace psa_code =0 if ra_code_date >= psa_code_date & ra_code_date !=.
(0 real changes made)

. replace psa_code =0 if anksp_code_date > psa_code_date & anksp_code_date !=.
(0 real changes made)

. replace psa_code =0 if undiff_code_date > psa_code_date & undiff_code_date !=.
(0 real changes made)

. replace anksp_code =0 if psa_code_date >= anksp_code_date & psa_code_date !=.
(0 real changes made)

. replace anksp_code =0 if ra_code_date >= anksp_code_date & ra_code_date !=.
(0 real changes made)

. replace anksp_code =0 if undiff_code_date > anksp_code_date & undiff_code_date !=.
(0 real changes made)

. replace undiff_code =0 if ra_code_date >= undiff_code_date & ra_code_date !=.
(0 real changes made)

. replace undiff_code =0 if psa_code_date >= undiff_code_date & psa_code_date !=.
(0 real changes made)

. replace undiff_code =0 if anksp_code_date >= undiff_code_date & anksp_code_date !=.
(0 real changes made)

. gen eia_diagnosis=1 if ra_code==1
(67 missing values generated)

. replace eia_diagnosis=2 if psa_code==1
(31 real changes made)

. replace eia_diagnosis=3 if anksp_code==1
(29 real changes made)

. replace eia_diagnosis=4 if undiff_code==1
(7 real changes made)

. lab define eia_diagnosis 1 "RA" 2 "PsA" 3 "AxSpA" 4 "Undiff IA", modify

. lab val eia_diagnosis eia_diagnosis

. tab eia_diagnosis, missing

eia_diagnos |
         is |      Freq.     Percent        Cum.
------------+-----------------------------------
         RA |        289       81.18       81.18
        PsA |         31        8.71       89.89
      AxSpA |         29        8.15       98.03
  Undiff IA |          7        1.97      100.00
------------+-----------------------------------
      Total |        356      100.00

. drop if eia_diagnosis==. //should be none
(0 observations deleted)

. 
. decode eia_diagnosis, gen(eia_diag)

. replace eia_diag="Undiff_IA" if eia_diagnosis==4
(7 real changes made)

. 
. *Split into 6-month time windows=========================================*/
. **Month/Year of GP diagnostic code
. gen year_diag=year(eia_code_date)

. format year_diag %ty

. gen month_diag=month(eia_code_date)

. gen mo_year_diagn=ym(year_diag, month_diag)

. format mo_year_diagn %tmMon-CCYY

. generate str16 mo_year_diagn_s = strofreal(mo_year_diagn,"%tmCCYY!mNN")

. lab var mo_year_diagn "Month/Year of Diagnosis"

. lab var mo_year_diagn_s "Month/Year of Diagnosis"

. 
. **Month/Year of rheum appt
. gen year_appt=year(rheum_appt_date) if rheum_appt_date!=.
(355 missing values generated)

. format year_appt %ty

. gen month_appt=month(rheum_appt_date) if rheum_appt_date!=. 
(355 missing values generated)

. gen mo_year_appt=ym(year_appt, month_appt)
(355 missing values generated)

. format mo_year_appt %tmMon-CCYY

. generate str16 mo_year_appt_s = strofreal(mo_year_appt,"%tmCCYY!mNN")

. 
. **Separate into 3-month time windows (for diagnosis date)
. gen diagnosis_3m = qofd(diagnosis_date)

. format diagnosis_3m %tq

. lab var diagnosis_3m "Time period for diagnosis"

. tab diagnosis_3m, missing

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        1.97        1.97
     2016q3 |          6        1.69        3.65
     2016q4 |         11        3.09        6.74
     2017q1 |          7        1.97        8.71
     2017q2 |          7        1.97       10.67
     2017q3 |         13        3.65       14.33
     2017q4 |          9        2.53       16.85
     2018q1 |         14        3.93       20.79
     2018q2 |         10        2.81       23.60
     2018q3 |         15        4.21       27.81
     2018q4 |         13        3.65       31.46
     2019q1 |          7        1.97       33.43
     2019q2 |         16        4.49       37.92
     2019q3 |          7        1.97       39.89
     2019q4 |          8        2.25       42.13
     2020q1 |         12        3.37       45.51
     2020q2 |          9        2.53       48.03
     2020q3 |         10        2.81       50.84
     2020q4 |         11        3.09       53.93
     2021q1 |         10        2.81       56.74
     2021q2 |          9        2.53       59.27
     2021q3 |         14        3.93       63.20
     2021q4 |         17        4.78       67.98
     2022q1 |          8        2.25       70.22
     2022q2 |          7        1.97       72.19
     2022q3 |          6        1.69       73.88
     2022q4 |          7        1.97       75.84
     2023q1 |         13        3.65       79.49
     2023q2 |          6        1.69       81.18
     2023q3 |          6        1.69       82.87
     2023q4 |         14        3.93       86.80
     2024q1 |         10        2.81       89.61
     2024q2 |         13        3.65       93.26
     2024q3 |         12        3.37       96.63
     2024q4 |          7        1.97       98.60
     2025q1 |          5        1.40      100.00
------------+-----------------------------------
      Total |        356      100.00

. bys eia_diagnosis: tab diagnosis_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        2.42        2.42
     2016q3 |          5        1.73        4.15
     2016q4 |          9        3.11        7.27
     2017q1 |          7        2.42        9.69
     2017q2 |          7        2.42       12.11
     2017q3 |         12        4.15       16.26
     2017q4 |          9        3.11       19.38
     2018q1 |         12        4.15       23.53
     2018q2 |          6        2.08       25.61
     2018q3 |         11        3.81       29.41
     2018q4 |         11        3.81       33.22
     2019q1 |          7        2.42       35.64
     2019q2 |         10        3.46       39.10
     2019q3 |          5        1.73       40.83
     2019q4 |          5        1.73       42.56
     2020q1 |          9        3.11       45.67
     2020q2 |          9        3.11       48.79
     2020q3 |          7        2.42       51.21
     2020q4 |          8        2.77       53.98
     2021q1 |          8        2.77       56.75
     2021q2 |          7        2.42       59.17
     2021q3 |         11        3.81       62.98
     2021q4 |         15        5.19       68.17
     2022q1 |          7        2.42       70.59
     2022q2 |          5        1.73       72.32
     2022q3 |          4        1.38       73.70
     2022q4 |          6        2.08       75.78
     2023q1 |          7        2.42       78.20
     2023q2 |          4        1.38       79.58
     2023q3 |          5        1.73       81.31
     2023q4 |         11        3.81       85.12
     2024q1 |         10        3.46       88.58
     2024q2 |         12        4.15       92.73
     2024q3 |         11        3.81       96.54
     2024q4 |          5        1.73       98.27
     2025q1 |          5        1.73      100.00
------------+-----------------------------------
      Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q4 |          2        6.45        6.45
     2018q2 |          4       12.90       19.35
     2018q3 |          1        3.23       22.58
     2019q2 |          3        9.68       32.26
     2019q3 |          2        6.45       38.71
     2019q4 |          1        3.23       41.94
     2020q1 |          1        3.23       45.16
     2020q3 |          1        3.23       48.39
     2020q4 |          2        6.45       54.84
     2021q1 |          2        6.45       61.29
     2021q3 |          2        6.45       67.74
     2022q1 |          1        3.23       70.97
     2022q2 |          1        3.23       74.19
     2022q3 |          1        3.23       77.42
     2022q4 |          1        3.23       80.65
     2023q1 |          2        6.45       87.10
     2023q3 |          1        3.23       90.32
     2023q4 |          2        6.45       96.77
     2024q4 |          1        3.23      100.00
------------+-----------------------------------
      Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q3 |          1        3.45        3.45
     2017q3 |          1        3.45        6.90
     2018q1 |          2        6.90       13.79
     2018q3 |          3       10.34       24.14
     2018q4 |          1        3.45       27.59
     2019q2 |          3       10.34       37.93
     2019q4 |          1        3.45       41.38
     2020q1 |          2        6.90       48.28
     2020q3 |          2        6.90       55.17
     2020q4 |          1        3.45       58.62
     2021q2 |          2        6.90       65.52
     2021q3 |          1        3.45       68.97
     2021q4 |          1        3.45       72.41
     2023q1 |          2        6.90       79.31
     2023q2 |          2        6.90       86.21
     2023q4 |          1        3.45       89.66
     2024q2 |          1        3.45       93.10
     2024q3 |          1        3.45       96.55
     2024q4 |          1        3.45      100.00
------------+-----------------------------------
      Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2018q4 |          1       14.29       14.29
     2019q4 |          1       14.29       28.57
     2021q4 |          1       14.29       42.86
     2022q2 |          1       14.29       57.14
     2022q3 |          1       14.29       71.43
     2023q1 |          2       28.57      100.00
------------+-----------------------------------
      Total |          7      100.00


. 
. **Separate into 12-month time windows (for diagnosis date)
. gen base_date = date("$start_date", "DMY")

. gen diagnosis_year = (floor((diagnosis_date - base_date) / 365.25) + 1) if ((diagnosis
> _date >= base_date) & (diagnosis_date <= (date("$end_date", "DMY"))))

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. lab var diagnosis_year "Year of diagnosis"

. gen base_year = year(date("$start_date", "DMY"))

. gen end_year = year(date("$end_date", "DMY"))

. local max_year = end_year - base_year

. forvalues i = 1/`max_year' {
  2.     local start = `base_year' + `i' - 1
  3.     local end = `start' + 1
  4.     label define diagnosis_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val diagnosis_year diagnosis_year_lbl

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. 
. import delimited "$projectdir/output/dataset.csv", clear
(encoding automatically selected: ISO-8859-1)
(88 vars, 374 obs)

. 
. **Set Ado file path
. adopath + "$projectdir/analysis/extra_ados"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\documents/"
  [5]  (PLUS)      "C:\users\PUBLIC\documents/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/an
> alysis/extra_ados"
  [8]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory
> _rheum/analysis/extra_ados"

. 
. **Set index dates ===========================================================*/
. global year_preceding = "01/04/2015"

. global start_date = "01/04/2016"

. global end_date = "31/03/2025"

. 
. **Conversion for dates====================================================*
. ***Variables ending in _date that are string
. ds *_date, has(type string)
eia_code_d~e  cva_before~e  chd_after_~e  depr_after~e  rheum~4_date  rtt_cl_sta~e
ra_code_date  lung_ca_be~e  dm_after_d~e  osteop_aft~e  rheum~e_date  rtt_cl_ref~e
psa_code_d~e  solid_ca_b~e  ild_after_~e  dem_after_~e  ~erheum_date  rtt_cl_end~e
anksp_code~e  haem_ca_be~e  copd_after~e  creatinin~te  l~ecode_date  rtt_op_sta~e
undiff_cod~e  ckd_before~e  cva_after_~e  rf_date       leflunomid~e  rtt_op_ref~e
chd_before~e  depr_befor~e  lung_ca_af~e  r~_appt_date  metho~e_date  rtt_op_end~e
dm_before_~e  osteop_bef~e  solid_ca_a~e  rheum~y_date  metho~j_date
ild_before~e  frac_befor~e  haem_ca_af~e  rheum~2_date  sulfasalaz~e
copd_befor~e  dem_before~e  ckd_after_~e  rheum~3_date  hydroxychl~e

. local string_dates `r(varlist)'

. foreach var of local string_dates {
  2.     gen `var'_num = date(`var', "YMD")
  3.     format `var'_num %td
  4.     order `var'_num, after(`var')
  5.     drop `var'
  6.     rename `var'_num `var'
  7. }
(74 missing values generated)
(339 missing values generated)
(343 missing values generated)
(366 missing values generated)
(311 missing values generated)
(337 missing values generated)
(311 missing values generated)
(361 missing values generated)
(324 missing values generated)
(291 missing values generated)
(40 missing values generated)
(213 missing values generated)
(297 missing values generated)
(353 missing values generated)
(369 missing values generated)
(372 missing values generated)
(311 missing values generated)
(363 missing values generated)
(372 missing values generated)
(370 missing values generated)
(373 missing values generated)
(367 missing values generated)
(366 missing values generated)
(259 missing values generated)
(348 missing values generated)
(366 missing values generated)
(368 missing values generated)
(372 missing values generated)
(366 missing values generated)
(373 missing values generated)
(373 missing values generated)
(366 missing values generated)
(356 missing values generated)
(368 missing values generated)
(343 missing values generated)
(335 missing values generated)
(373 missing values generated)
(373 missing values generated)
(346 missing values generated)
(285 missing values generated)
(220 missing values generated)
(133 missing values generated)
(260 missing values generated)
(234 missing values generated)
(364 missing values generated)
(364 missing values generated)
(364 missing values generated)
(365 missing values generated)
(365 missing values generated)
(365 missing values generated)

. 
. ***Variables ending in _date that are numeric
. foreach var of varlist *_date {
  2.     capture confirm string variable `var'
  3.     if _rc != 0 {
  4.         format `var' %td
  5.     }
  6. }

. 
. ***Create binary indicator for each
. ds *_date
eia_code_d~e  lung_ca_be~e  ild_after_~e  dem_after_~e  rheum~e_date  rtt_cl_sta~e
ra_code_date  solid_ca_b~e  copd_after~e  creatinin~te  ~erheum_date  rtt_cl_ref~e
psa_code_d~e  haem_ca_be~e  cva_after_~e  rf_date       l~ecode_date  rtt_cl_end~e
anksp_code~e  ckd_before~e  lung_ca_af~e  bmi_date      ~frheum_date  rtt_op_sta~e
undiff_cod~e  depr_befor~e  solid_ca_a~e  r~_appt_date  l~fcode_date  rtt_op_ref~e
chd_before~e  osteop_bef~e  haem_ca_af~e  rheum~y_date  leflunomid~e  rtt_op_end~e
dm_before_~e  frac_befor~e  ckd_after_~e  rheum~2_date  metho~e_date
ild_before~e  dem_before~e  depr_after~e  rheum~3_date  metho~j_date
copd_befor~e  chd_after_~e  osteop_aft~e  rheum~4_date  sulfasalaz~e
cva_before~e  dm_after_d~e  frac_after~e  r~eappt_date  hydroxychl~e

. local dates `r(varlist)'

. foreach var of local dates {
  2.         local newvar =  substr("`var'", 1, length("`var'") - 5)
  3.         gen `newvar' = (`var'!=. )
  4.         order `newvar', after(`var')
  5. }

. 
. /*
> **Will also need to amend conversion for biologic dates ==============================
> ======================*
> ***Some dates are given with month/year only, so adding day 15 to enable them to be pr
> ocessed as dates 
> 
> foreach var of varlist   abatacept_date                                         ///
>                                                  adalimumab_date                      
>                   ///     
>                                                  baricitinib_date                     
>                   ///
>                                                  certolizumab_date                    
>                   ///
>                                                  etanercept_date                      
>                   ///
>                                                  golimumab_date                       
>                   ///
>                                                  guselkumab_date                      
>                   ///     
>                                                  infliximab_date                      
>                   ///
>                                                  ixekizumab_date                      
>                   ///
>                                                  methotrexate_hcd_date                
>           ///
>                                                  rituximab_date                       
>                   ///
>                                                  sarilumab_date                       
>                   ///
>                                                  secukinumab_date                     
>                   ///     
>                                                  tocilizumab_date                     
>                   ///
>                                                  tofacitinib_date                     
>                   ///
>                                                  upadacitinib_date                    
>                   ///
>                                                  ustekinumab_date                     
>                   ///
>                                                  {
>                                                         
>                 capture confirm string variable `var'
>                 if _rc!=0 {
>                         assert `var'==.
>                         rename `var' `var'_date
>                 }
>         
>                 else {
>                                 replace `var' = `var' + "-15"
>                                 rename `var' `var'_dstr
>                                 replace `var'_dstr = " " if `var'_dstr == "-15"
>                                 gen `var'_date = date(`var'_dstr, "YMD") 
>                                 order `var'_date, after(`var'_dstr)
>                                 drop `var'_dstr
>                 }
>         
>         format `var'_date %td
> }
> */
.                                          
. **Create and label variables =========================================================
> ==*/
. 
. ***Age variables
. *Create categorised age
. drop if age<18 & age !=.
(0 observations deleted)

. drop if age>109 & age !=.
(4 observations deleted)

. drop if age==.
(0 observations deleted)

. lab var age "Age at diagnosis"

. 
. recode age 18/39.9999 = 1 /// 
>            40/49.9999 = 2 ///
>                    50/59.9999 = 3 ///
>                60/69.9999 = 4 ///
>                    70/79.9999 = 5 ///
>                    80/max = 6, gen(agegroup) 
(370 differences between age and agegroup)

. 
. label define agegroup   1 "18-39" ///
>                                                 2 "40-49" ///
>                                                 3 "50-59" ///
>                                                 4 "60-69" ///
>                                                 5 "70-79" ///
>                                                 6 "80+"

.                                                 
. label values agegroup agegroup

. lab var agegroup "Age group"

. tab agegroup, missing

  Age group |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-39 |        160       43.24       43.24
      40-49 |         53       14.32       57.57
      50-59 |         33        8.92       66.49
      60-69 |         23        6.22       72.70
      70-79 |         32        8.65       81.35
        80+ |         69       18.65      100.00
------------+-----------------------------------
      Total |        370      100.00

. order agegroup, after(age)

. 
. ***Sex
. gen male = 1 if sex == "male"
(197 missing values generated)

. replace male = 0 if sex == "female"
(197 real changes made)

. lab var male "Male"

. lab define male 0 "No" 1 "Yes", modify

. lab val male male

. tab male, missing

       Male |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        197       53.24       53.24
        Yes |        173       46.76      100.00
------------+-----------------------------------
      Total |        370      100.00

. order male, after(sex)

. 
. ***Ethnicity
. gen ethnicity_n = 1 if ethnicity == "White"
(341 missing values generated)

. replace ethnicity_n = 2 if ethnicity == "Asian or Asian British"
(19 real changes made)

. replace ethnicity_n = 3 if ethnicity == "Black or Black British"
(25 real changes made)

. replace ethnicity_n = 4 if ethnicity == "Mixed"
(14 real changes made)

. replace ethnicity_n = 5 if ethnicity == "Chinese or Other Ethnic Groups"
(29 real changes made)

. replace ethnicity_n = 6 if ethnicity == "Unknown"
(254 real changes made)

. 
. 
. label define ethnicity_n        1 "White"                                             
>   ///
>                                                         2 "Asian or Asian British"    
>           ///
>                                                         3 "Black or Black British"    
>   ///
>                                                         4 "Mixed"                     
>                           ///
>                                                         5 "Chinese or Other Ethnic Gro
> ups" ///
>                                                         6 "Not known", modify

.                                                         
. label values ethnicity_n ethnicity_n

. lab var ethnicity_n "Ethnicity"

. tab ethnicity_n, missing

                     Ethnicity |      Freq.     Percent        Cum.
-------------------------------+-----------------------------------
                         White |         29        7.84        7.84
        Asian or Asian British |         19        5.14       12.97
        Black or Black British |         25        6.76       19.73
                         Mixed |         14        3.78       23.51
Chinese or Other Ethnic Groups |         29        7.84       31.35
                     Not known |        254       68.65      100.00
-------------------------------+-----------------------------------
                         Total |        370      100.00

. drop ethnicity

. rename ethnicity_n ethnicity 

. 
. ***Practice regions
. encode region, gen(nuts_region)

. tab region, missing

                  region |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
                         |         84       22.70       22.70
                    East |         43       11.62       34.32
           East Midlands |         22        5.95       40.27
                  London |         31        8.38       48.65
              North East |         32        8.65       57.30
              North West |         30        8.11       65.41
              South East |         32        8.65       74.05
              South West |         34        9.19       83.24
           West Midlands |         36        9.73       92.97
Yorkshire and The Humber |         26        7.03      100.00
-------------------------+-----------------------------------
                   Total |        370      100.00

. replace region="Not known" if region==""
(84 real changes made)

. gen region_nospace=region

. replace region_nospace="SouthWest" if region=="South West"
(34 real changes made)

. replace region_nospace="EastMidlands" if region=="East Midlands"
(22 real changes made)

. replace region_nospace="East" if region=="East"
(0 real changes made)

. replace region_nospace="London" if region=="London"
(0 real changes made)

. replace region_nospace="NorthEast" if region=="North East"
(32 real changes made)

. replace region_nospace="NorthWest" if region=="North West"
(30 real changes made)

. replace region_nospace="SouthEast" if region=="South East"
(32 real changes made)

. replace region_nospace="WestMidlands" if region=="West Midlands"
(36 real changes made)

. replace region_nospace="YorkshireandTheHumber" if region=="Yorkshire and The Humber"
(26 real changes made)

. 
. ***IMD
. gen imd = 1 if imd_quintile == "1 (most deprived)"
(303 missing values generated)

. replace imd = 2 if imd_quintile == "2"
(55 real changes made)

. replace imd = 3 if imd_quintile == "3"
(51 real changes made)

. replace imd = 4 if imd_quintile == "4"
(53 real changes made)

. replace imd = 5 if imd_quintile == "5 (least deprived)"
(57 real changes made)

. replace imd = .u if imd_quintile == "Unknown"
(87 real changes made, 87 to missing)

. lab var imd "Index of multiple deprivation"

. lab define imd 1 "1 (most deprived)" ///
>                            2 "2" ///
>                            3 "3" ///
>                            4 "4" ///
>                            5 "5 (least deprived)" ///
>                            .u "Not known"

. lab val imd imd                    

. tab imd, missing

 Index of multiple |
       deprivation |      Freq.     Percent        Cum.
-------------------+-----------------------------------
 1 (most deprived) |         67       18.11       18.11
                 2 |         55       14.86       32.97
                 3 |         51       13.78       46.76
                 4 |         53       14.32       61.08
5 (least deprived) |         57       15.41       76.49
         Not known |         87       23.51      100.00
-------------------+-----------------------------------
             Total |        370      100.00

. drop imd_quintile

. 
. ***Body Mass Index
. *Recode strange values 
. replace bmi_value = . if bmi_value == 0 
(0 real changes made)

. replace bmi_value = . if !inrange(bmi_value, 10, 80)
(0 real changes made)

. 
. *Restrict to within 10 years of EIA diagnosis date and aged>16 
. gen bmi_time = (eia_code_date - bmi_date)/365.25
(370 missing values generated)

. gen bmi_age = age - bmi_time
(370 missing values generated)

. replace bmi_value = . if bmi_age < 16 
(0 real changes made)

. replace bmi_value = . if bmi_time > 10 & bmi_time != . 
(0 real changes made)

. 
. *Set to missing if no date, and vice versa 
. replace bmi_value = . if bmi_date == . 
(0 real changes made)

. replace bmi_date = . if bmi_value == . 
(0 real changes made)

. replace bmi_time = . if bmi_value == . 
(0 real changes made)

. replace bmi_age = . if bmi_value == . 
(0 real changes made)

. 
. *Create BMI categories
. gen     bmicat = .
(370 missing values generated)

. recode  bmicat . = 1 if bmi_value < 18.5
(0 changes made to bmicat)

. recode  bmicat . = 2 if bmi_value < 25
(0 changes made to bmicat)

. recode  bmicat . = 3 if bmi_value < 30
(0 changes made to bmicat)

. recode  bmicat . = 4 if bmi_value < 35
(0 changes made to bmicat)

. recode  bmicat . = 5 if bmi_value < 40
(0 changes made to bmicat)

. recode  bmicat . = 6 if bmi_value < .
(0 changes made to bmicat)

. replace bmicat = .u if bmi_value >= .
(370 real changes made, 370 to missing)

. 
. label define bmicat 1 "Underweight (<18.5)"     ///
>                                         2 "Normal (18.5-24.9)"          ///
>                                         3 "Overweight (25-29.9)"        ///
>                                         4 "Obese I (30-34.9)"           ///
>                                         5 "Obese II (35-39.9)"          ///
>                                         6 "Obese III (40+)"                     ///
>                                         .u "Not known"

.                                         
. label values bmicat bmicat

. lab var bmicat "BMI"

. tab bmicat, missing

                 BMI |      Freq.     Percent        Cum.
---------------------+-----------------------------------
           Not known |        370      100.00      100.00
---------------------+-----------------------------------
               Total |        370      100.00

. order bmicat, after (bmi_value)

. drop bmi_age bmi_time

. 
. *Create less granular categorisation
. recode bmicat 1/3 .u = 1 4 = 2 5 = 3 6 = 4, gen(obese4cat)
(370 differences between bmicat and obese4cat)

. 
. label define obese4cat  1 "No record of obesity"        ///
>                                                 2 "Obese I (30-34.9)"           ///
>                                                 3 "Obese II (35-39.9)"          ///
>                                                 4 "Obese III (40+)"             

. 
. label values obese4cat obese4cat

. order obese4cat, after(bmicat)

. 
. ***Smoking 
. label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Not known"

. 
. gen     smoke = 1  if smoking_status == "N"
(369 missing values generated)

. replace smoke = 2  if smoking_status == "E"
(133 real changes made)

. replace smoke = 3  if smoking_status == "S"
(235 real changes made)

. replace smoke = .u if smoking_status == "M"
(1 real change made, 1 to missing)

. replace smoke = .u if smoking_status == "" 
(0 real changes made)

. 
. label values smoke smoke

. lab var smoke "Smoking status"

. drop smoking_status

. tab smoke, missing

    Smoking |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
      Never |          1        0.27        0.27
     Former |        133       35.95       36.22
    Current |        235       63.51       99.73
  Not known |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. *Create non-missing 3-category variable for current smoking (assumes missing smoking i
> s never smoking)
. recode smoke .u = 1, gen(smoke_nomiss)
(1 differences between smoke and smoke_nomiss)

. order smoke_nomiss, after(smoke)

. label values smoke_nomiss smoke

. 
. **Clinical comorbidities
. ***Nb. not using creatinine of HBA1c values for now, just codes
. foreach disease in ckd dm ild copd cva lung_ca solid_ca haem_ca depr osteop frac dem c
> hd {
  2.         label define `disease'_before 0 "No" 1 "Yes"
  3.         label values `disease'_before `disease'_before
  4.         tab `disease'_before, missing
  5.         label define `disease'_after 0 "No" 1 "Yes"
  6.         label values `disease'_after `disease'_after
  7.         tab `disease'_after, missing
  8.         gen `disease'_new = 1 if (`disease'_after == 1 & `disease'_before == 0)
  9.         recode `disease'_new .=0
 10.         label define `disease'_new 0 "No" 1 "Yes"
 11.         label values `disease'_new `disease'_new
 12.         tab `disease'_new, missing
 13.         order `disease'_new, after(`disease'_after)
 14. }

 ckd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        294       79.46       79.46
        Yes |         76       20.54      100.00
------------+-----------------------------------
      Total |        370      100.00

  ckd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to ckd_new)

    ckd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

  dm_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        334       90.27       90.27
        Yes |         36        9.73      100.00
------------+-----------------------------------
      Total |        370      100.00

   dm_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to dm_new)

     dm_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 ild_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  ild_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        366       98.92       98.92
        Yes |          4        1.08      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to ild_new)

    ild_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

copd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        357       96.49       96.49
        Yes |         13        3.51      100.00
------------+-----------------------------------
      Total |        370      100.00

 copd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00
(369 missing values generated)
(369 changes made to copd_new)

   copd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

 cva_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        321       86.76       86.76
        Yes |         49       13.24      100.00
------------+-----------------------------------
      Total |        370      100.00

  cva_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        363       98.11       98.11
        Yes |          7        1.89      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to cva_new)

    cva_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        287       77.57       77.57
        Yes |         83       22.43      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to lung_ca_new)

lung_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_be |
       fore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |         39       10.54       10.54
        Yes |        331       89.46      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_af |
        ter |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        256       69.19       69.19
        Yes |        114       30.81      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to solid_ca_new)

solid_ca_ne |
          w |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        209       56.49       56.49
        Yes |        161       43.51      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        344       92.97       92.97
        Yes |         26        7.03      100.00
------------+-----------------------------------
      Total |        370      100.00
(359 missing values generated)
(359 changes made to haem_ca_new)

haem_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00

depr_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        349       94.32       94.32
        Yes |         21        5.68      100.00
------------+-----------------------------------
      Total |        370      100.00

 depr_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to depr_new)

   depr_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_befo |
         re |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_afte |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to osteop_new)

 osteop_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

frac_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 frac_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00
(370 missing values generated)
(370 changes made to frac_new)

   frac_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

 dem_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  dem_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to dem_new)

    dem_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

 chd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  chd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00
(361 missing values generated)
(361 changes made to chd_new)

    chd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        361       97.57       97.57
        Yes |          9        2.43      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. lab var ckd_before "Chronic kidney disease"

. lab var ckd_after "Chronic kidney disease"

. lab var ckd_new "Chronic kidney disease"

. lab var dm_before "Type 2 diabetes mellitus"

. lab var dm_after "Type 2 diabetes mellitus"

. lab var dm_new "Type 2 diabetes mellitus"

. lab var ild_before "Interstitial lung disease"

. lab var ild_after "Interstitial lung disease"

. lab var ild_new "Interstitial lung disease"

. lab var copd_before "COPD"

. lab var copd_after "COPD"

. lab var copd_new "COPD"

. lab var lung_ca_before "Lung cancer"

. lab var lung_ca_after "Lung cancer"

. lab var lung_ca_new "Lung cancer"

. lab var solid_ca_before "Solid organ cancer"

. lab var solid_ca_after "Solid organ cancer"

. lab var solid_ca_new "Solid organ cancer"

. lab var haem_ca_before "Haematological cancer"

. lab var haem_ca_after "Haematological cancer"

. lab var haem_ca_new "Haematological cancer"

. lab var depr_before "Depression"

. lab var depr_after "Depression"

. lab var depr_new "Depression"

. lab var osteop_before "Osteoporosis"

. lab var osteop_after "Osteoporosis"

. lab var osteop_new "Osteoporosis"

. lab var frac_before "Fragility fracture"

. lab var frac_after "Fragility fracture"

. lab var frac_new "Fragility fracture"

. lab var dem_before "Dementia"

. lab var dem_after "Dementia"

. lab var dem_new "Dementia"

. lab var chd_before "Coronary heart disease"

. lab var chd_after "Coronary heart disease"

. lab var chd_new "Coronary heart disease"

. 
. lab var rheum_appt "Rheumatology appointment"

. lab define rheum_appt 0 "No" 1 "Yes", modify

. lab val rheum_appt rheum_appt

. 
. **All patients should have diagnostic code============================================
> =================*/
. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

. keep if eia_code==1
(0 observations deleted)

. 
. **Check first rheum appt date was before diagnostic code date=========================
> =========*/
. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before EIA code appeared in GP recor
> d; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

. tab rheum_appt if rheum_appt_date>eia_code_date & rheum_appt_date!=. //confirm proport
> ion who had first rheum appt (i.e. not missing) after EIA code

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |          1      100.00      100.00
------------+-----------------------------------
      Total |          1      100.00

. tab rheum_appt if rheum_appt_date>(eia_code_date + 30) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 30 days after EIA code 
no observations

. tab rheum_appt if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 60 days after EIA code - should be none
no observations

. replace rheum_appt=0 if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //re
> place as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. replace rheum_appt_date=. if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=.
>  //replace as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. 
. **As above - for differently specified rheumatology appointments
. replace rheum_appt_any=0 if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt_any_
> date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt_any_date=. if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt
> _any_date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2=0 if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2_date=. if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date
> !=. //replace as missing those appts >60 days after EIA code_yea
(0 real changes made)

. replace rheum_appt3=0 if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt3_date=. if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date
> !=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt4=0 if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date!=. /
> /replace as missing those appts >60 days after EIA code
(8 real changes made)

. replace rheum_appt4_date=. if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date
> !=. //replace as missing those appts >60 days after EIA code
(8 real changes made, 8 to missing)

. 
. *Check if first csDMARD/biologic was after rheum appt date============================
> =========================*/
. **csDMARDs (not including high cost MTX; wouldn't be shared care)
. gen csdmard=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methotrexa
> te_inj==1 | sulfasalazine==1
(76 missing values generated)

. recode csdmard .=0 
(76 changes made to csdmard)

. tab csdmard, missing

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |         76       20.54       20.54
          1 |        294       79.46      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. **Date of first csDMARD script (not including high cost MTX prescriptions)
. gen csdmard_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date, met
> hotrexate_inj_date, sulfasalazine_date)
(76 missing values generated)

. format %td csdmard_date

. 
. /*
> **csDMARDs (including high cost MTX)
> gen csdmard_hcd=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methot
> rexate_inj==1 | methotrexate_hcd==1 | sulfasalazine==1
> recode csdmard_hcd .=0 
> tab csdmard_hcd, missing
> 
> **Date of first csDMARD script (including high cost MTX prescriptions)
> gen csdmard_hcd_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date,
>  methotrexate_inj_date, methotrexate_hcd_date, sulfasalazine_date)
> format %td csdmard_hcd_date
> 
> **Biologic use
> gen biologic=1 if abatacept==1 | adalimumab==1 | baricitinib==1 | certolizumab==1 | et
> anercept==1 | golimumab==1 | guselkumab==1 | infliximab==1 | ixekizumab==1 | rituximab
> ==1 | sarilumab==1 | secukinumab==1 | tocilizumab==1 | tofacitinib==1 | upadacitinib==
> 1 | ustekinumab==1 
> recode biologic .=0
> tab biologic, missing
> 
> **Date of first biologic script
> gen biologic_date=min(abatacept_date, adalimumab_date, baricitinib_date, certolizumab_
> date, etanercept_date, golimumab_date, guselkumab_date, infliximab_date, ixekizumab_da
> te, rituximab_date, sarilumab_date, secukinumab_date, tocilizumab_date, tofacitinib_da
> te, upadacitinib_date, ustekinumab_date)
> format %td biologic_date
> */
. 
. **Exclude if first csdmard was more than 60 days before first rheum appt
. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & csdmard_date<rheum_appt_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_d
> ate 

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_date //d
> rop if first csDMARD more than 60 days before first attendance at a rheum appt 
(7 observations deleted)

. tab csdmard if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmar
> d_date + 60)<rheum_appt_any_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmard_date 
> + 60)<rheum_appt_any_date //drop if first csDMARD more than 60 days before first captu
> red rheum appt that did not have first attendance tag
(7 observations deleted)

. 
. /*
> tab biologic if rheum_appt_date!=. & biologic_date!=. & biologic_date<rheum_appt_date 
> tab biologic if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_app
> t_date 
> drop if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_appt_date /
> /drop if first biologic more than 60 days before first rheum_appt_date
> tab biologic if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biol
> ogic_date + 60)<rheum_appt_any_date
> drop if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biologic_dat
> e + 60)<rheum_appt_any_date //drop if first biologic more than 60 days before first ca
> ptured rheum appt that did not have first attendance tag
> */
. 
. *Generate diagnosis date==============================================================
> =*/
. **Use diagnostic code date (in GP record) as diagnosis date
. gen diagnosis_date=eia_code_date

. format diagnosis_date %td

. 
. *Refine diagnostic window=============================================================
> */
. **Keep patients with diagnosis date after start date and before end date - should be n
> one dropped
. keep if diagnosis_date>=date("$start_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. keep if diagnosis_date<date("$end_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. 
. *Include only most recent EIA sub-diagnosis===========================================
> ==*/
. replace ra_code =0 if psa_code_date > ra_code_date & psa_code_date !=.
(0 real changes made)

. replace ra_code =0 if anksp_code_date > ra_code_date & anksp_code_date !=.
(0 real changes made)

. replace ra_code =0 if undiff_code_date > ra_code_date & undiff_code_date !=.
(0 real changes made)

. replace psa_code =0 if ra_code_date >= psa_code_date & ra_code_date !=.
(0 real changes made)

. replace psa_code =0 if anksp_code_date > psa_code_date & anksp_code_date !=.
(0 real changes made)

. replace psa_code =0 if undiff_code_date > psa_code_date & undiff_code_date !=.
(0 real changes made)

. replace anksp_code =0 if psa_code_date >= anksp_code_date & psa_code_date !=.
(0 real changes made)

. replace anksp_code =0 if ra_code_date >= anksp_code_date & ra_code_date !=.
(0 real changes made)

. replace anksp_code =0 if undiff_code_date > anksp_code_date & undiff_code_date !=.
(0 real changes made)

. replace undiff_code =0 if ra_code_date >= undiff_code_date & ra_code_date !=.
(0 real changes made)

. replace undiff_code =0 if psa_code_date >= undiff_code_date & psa_code_date !=.
(0 real changes made)

. replace undiff_code =0 if anksp_code_date >= undiff_code_date & anksp_code_date !=.
(0 real changes made)

. gen eia_diagnosis=1 if ra_code==1
(67 missing values generated)

. replace eia_diagnosis=2 if psa_code==1
(31 real changes made)

. replace eia_diagnosis=3 if anksp_code==1
(29 real changes made)

. replace eia_diagnosis=4 if undiff_code==1
(7 real changes made)

. lab define eia_diagnosis 1 "RA" 2 "PsA" 3 "AxSpA" 4 "Undiff IA", modify

. lab val eia_diagnosis eia_diagnosis

. tab eia_diagnosis, missing

eia_diagnos |
         is |      Freq.     Percent        Cum.
------------+-----------------------------------
         RA |        289       81.18       81.18
        PsA |         31        8.71       89.89
      AxSpA |         29        8.15       98.03
  Undiff IA |          7        1.97      100.00
------------+-----------------------------------
      Total |        356      100.00

. drop if eia_diagnosis==. //should be none
(0 observations deleted)

. 
. decode eia_diagnosis, gen(eia_diag)

. replace eia_diag="Undiff_IA" if eia_diagnosis==4
(7 real changes made)

. 
. *Split into 6-month time windows=========================================*/
. **Month/Year of GP diagnostic code
. gen year_diag=year(eia_code_date)

. format year_diag %ty

. gen month_diag=month(eia_code_date)

. gen mo_year_diagn=ym(year_diag, month_diag)

. format mo_year_diagn %tmMon-CCYY

. generate str16 mo_year_diagn_s = strofreal(mo_year_diagn,"%tmCCYY!mNN")

. lab var mo_year_diagn "Month/Year of Diagnosis"

. lab var mo_year_diagn_s "Month/Year of Diagnosis"

. 
. **Month/Year of rheum appt
. gen year_appt=year(rheum_appt_date) if rheum_appt_date!=.
(355 missing values generated)

. format year_appt %ty

. gen month_appt=month(rheum_appt_date) if rheum_appt_date!=. 
(355 missing values generated)

. gen mo_year_appt=ym(year_appt, month_appt)
(355 missing values generated)

. format mo_year_appt %tmMon-CCYY

. generate str16 mo_year_appt_s = strofreal(mo_year_appt,"%tmCCYY!mNN")

. 
. **Separate into 3-month time windows (for diagnosis date)
. gen diagnosis_3m = qofd(diagnosis_date)

. format diagnosis_3m %tq

. lab var diagnosis_3m "Time period for diagnosis"

. tab diagnosis_3m, missing

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        1.97        1.97
     2016q3 |          6        1.69        3.65
     2016q4 |         11        3.09        6.74
     2017q1 |          7        1.97        8.71
     2017q2 |          7        1.97       10.67
     2017q3 |         13        3.65       14.33
     2017q4 |          9        2.53       16.85
     2018q1 |         14        3.93       20.79
     2018q2 |         10        2.81       23.60
     2018q3 |         15        4.21       27.81
     2018q4 |         13        3.65       31.46
     2019q1 |          7        1.97       33.43
     2019q2 |         16        4.49       37.92
     2019q3 |          7        1.97       39.89
     2019q4 |          8        2.25       42.13
     2020q1 |         12        3.37       45.51
     2020q2 |          9        2.53       48.03
     2020q3 |         10        2.81       50.84
     2020q4 |         11        3.09       53.93
     2021q1 |         10        2.81       56.74
     2021q2 |          9        2.53       59.27
     2021q3 |         14        3.93       63.20
     2021q4 |         17        4.78       67.98
     2022q1 |          8        2.25       70.22
     2022q2 |          7        1.97       72.19
     2022q3 |          6        1.69       73.88
     2022q4 |          7        1.97       75.84
     2023q1 |         13        3.65       79.49
     2023q2 |          6        1.69       81.18
     2023q3 |          6        1.69       82.87
     2023q4 |         14        3.93       86.80
     2024q1 |         10        2.81       89.61
     2024q2 |         13        3.65       93.26
     2024q3 |         12        3.37       96.63
     2024q4 |          7        1.97       98.60
     2025q1 |          5        1.40      100.00
------------+-----------------------------------
      Total |        356      100.00

. bys eia_diagnosis: tab diagnosis_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        2.42        2.42
     2016q3 |          5        1.73        4.15
     2016q4 |          9        3.11        7.27
     2017q1 |          7        2.42        9.69
     2017q2 |          7        2.42       12.11
     2017q3 |         12        4.15       16.26
     2017q4 |          9        3.11       19.38
     2018q1 |         12        4.15       23.53
     2018q2 |          6        2.08       25.61
     2018q3 |         11        3.81       29.41
     2018q4 |         11        3.81       33.22
     2019q1 |          7        2.42       35.64
     2019q2 |         10        3.46       39.10
     2019q3 |          5        1.73       40.83
     2019q4 |          5        1.73       42.56
     2020q1 |          9        3.11       45.67
     2020q2 |          9        3.11       48.79
     2020q3 |          7        2.42       51.21
     2020q4 |          8        2.77       53.98
     2021q1 |          8        2.77       56.75
     2021q2 |          7        2.42       59.17
     2021q3 |         11        3.81       62.98
     2021q4 |         15        5.19       68.17
     2022q1 |          7        2.42       70.59
     2022q2 |          5        1.73       72.32
     2022q3 |          4        1.38       73.70
     2022q4 |          6        2.08       75.78
     2023q1 |          7        2.42       78.20
     2023q2 |          4        1.38       79.58
     2023q3 |          5        1.73       81.31
     2023q4 |         11        3.81       85.12
     2024q1 |         10        3.46       88.58
     2024q2 |         12        4.15       92.73
     2024q3 |         11        3.81       96.54
     2024q4 |          5        1.73       98.27
     2025q1 |          5        1.73      100.00
------------+-----------------------------------
      Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q4 |          2        6.45        6.45
     2018q2 |          4       12.90       19.35
     2018q3 |          1        3.23       22.58
     2019q2 |          3        9.68       32.26
     2019q3 |          2        6.45       38.71
     2019q4 |          1        3.23       41.94
     2020q1 |          1        3.23       45.16
     2020q3 |          1        3.23       48.39
     2020q4 |          2        6.45       54.84
     2021q1 |          2        6.45       61.29
     2021q3 |          2        6.45       67.74
     2022q1 |          1        3.23       70.97
     2022q2 |          1        3.23       74.19
     2022q3 |          1        3.23       77.42
     2022q4 |          1        3.23       80.65
     2023q1 |          2        6.45       87.10
     2023q3 |          1        3.23       90.32
     2023q4 |          2        6.45       96.77
     2024q4 |          1        3.23      100.00
------------+-----------------------------------
      Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q3 |          1        3.45        3.45
     2017q3 |          1        3.45        6.90
     2018q1 |          2        6.90       13.79
     2018q3 |          3       10.34       24.14
     2018q4 |          1        3.45       27.59
     2019q2 |          3       10.34       37.93
     2019q4 |          1        3.45       41.38
     2020q1 |          2        6.90       48.28
     2020q3 |          2        6.90       55.17
     2020q4 |          1        3.45       58.62
     2021q2 |          2        6.90       65.52
     2021q3 |          1        3.45       68.97
     2021q4 |          1        3.45       72.41
     2023q1 |          2        6.90       79.31
     2023q2 |          2        6.90       86.21
     2023q4 |          1        3.45       89.66
     2024q2 |          1        3.45       93.10
     2024q3 |          1        3.45       96.55
     2024q4 |          1        3.45      100.00
------------+-----------------------------------
      Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2018q4 |          1       14.29       14.29
     2019q4 |          1       14.29       28.57
     2021q4 |          1       14.29       42.86
     2022q2 |          1       14.29       57.14
     2022q3 |          1       14.29       71.43
     2023q1 |          2       28.57      100.00
------------+-----------------------------------
      Total |          7      100.00


. 
. **Separate into 12-month time windows (for diagnosis date)
. gen base_date = date("$start_date", "DMY")

. gen diagnosis_year = (floor((diagnosis_date - base_date) / 365.25) + 1) if ((diagnosis
> _date >= base_date) & (diagnosis_date <= (date("$end_date", "DMY"))))

. lab var diagnosis_year "Year of diagnosis"

. local base_year = year(date("$start_date", "DMY"))

. local end_year = year(date("$end_date", "DMY"))

. local max_year = end_year - base_year
end_year not found
r(111);

end of do-file

r(111);

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. 
. **Set index dates ===========================================================*/
. global year_preceding = "01/04/2015"

. global start_date = "01/04/2016"

. global end_date = "31/03/2025"

. global base_year = year(date("$start_date", "DMY"))

. global end_year = year(date("$end_date", "DMY"))

. 
. **Conversion for dates====================================================*
. ***Variables ending in _date that are string
. ds *_date, has(type string)

. local string_dates `r(varlist)'

. foreach var of local string_dates {
  2.     gen `var'_num = date(`var', "YMD")
  3.     format `var'_num %td
  4.     order `var'_num, after(`var')
  5.     drop `var'
  6.     rename `var'_num `var'
  7. }

. 
. ***Variables ending in _date that are numeric
. foreach var of varlist *_date {
  2.     capture confirm string variable `var'
  3.     if _rc != 0 {
  4.         format `var' %td
  5.     }
  6. }

. 
. ***Create binary indicator for each
. ds *_date
eia_code_d~e  lung_ca_b~te  ild_after_~e  dem_after_~e  rheum~e_date  rtt_cl_sta~e
ra_code_date  solid~e_date  copd_after~e  creatinin~te  ~erheum_date  rtt_cl_ref~e
psa_code_d~e  haem_ca_b~te  cva_after_~e  rf_date       l~ecode_date  rtt_cl_end~e
anksp_code~e  ckd_before~e  lung_ca_af~e  bmi_date      ~frheum_date  rtt_op_sta~e
undiff_co~te  depr_befo~te  solid_ca_a~e  r~_appt_date  l~fcode_date  rtt_op_ref~e
chd_before~e  osteop_be~te  haem_ca_af~e  rheum~y_date  leflunomi~te  rtt_op_end~e
dm_before_~e  frac_befo~te  ckd_after_~e  rheum~2_date  metho~e_date  csdmard_date
ild_before~e  dem_before~e  depr_after~e  rheum~3_date  metho~j_date  diagnosis_~e
copd_befo~te  chd_after_~e  osteop_aft~e  rheum~4_date  sulfasala~te  base_date
cva_before~e  dm_after_d~e  frac_after~e  r~eappt_date  hydroxych~te

. local dates `r(varlist)'

. foreach var of local dates {
  2.         local newvar =  substr("`var'", 1, length("`var'") - 5)
  3.         gen `newvar' = (`var'!=. )
  4.         order `newvar', after(`var')
  5. }
variable eia_code already defined
r(110);

end of do-file

r(110);

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. global base_year = year(date("$start_date", "DMY"))

. global end_year = year(date("$end_date", "DMY"))

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. 
. import delimited "$projectdir/output/dataset.csv", clear
(encoding automatically selected: ISO-8859-1)
(88 vars, 374 obs)

. 
. **Set Ado file path
. adopath + "$projectdir/analysis/extra_ados"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\documents/"
  [5]  (PLUS)      "C:\users\PUBLIC\documents/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/an
> alysis/extra_ados"
  [8]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory
> _rheum/analysis/extra_ados"

. 
. **Set index dates ===========================================================*/
. global year_preceding = "01/04/2015"

. global start_date = "01/04/2016"

. global end_date = "31/03/2025"

. global base_year = year(date("$start_date", "DMY"))

. global end_year = year(date("$end_date", "DMY"))

. 
. **Conversion for dates====================================================*
. ***Variables ending in _date that are string
. ds *_date, has(type string)
eia_code_d~e  cva_before~e  chd_after_~e  depr_after~e  rheum~4_date  rtt_cl_sta~e
ra_code_date  lung_ca_be~e  dm_after_d~e  osteop_aft~e  rheum~e_date  rtt_cl_ref~e
psa_code_d~e  solid_ca_b~e  ild_after_~e  dem_after_~e  ~erheum_date  rtt_cl_end~e
anksp_code~e  haem_ca_be~e  copd_after~e  creatinin~te  l~ecode_date  rtt_op_sta~e
undiff_cod~e  ckd_before~e  cva_after_~e  rf_date       leflunomid~e  rtt_op_ref~e
chd_before~e  depr_befor~e  lung_ca_af~e  r~_appt_date  metho~e_date  rtt_op_end~e
dm_before_~e  osteop_bef~e  solid_ca_a~e  rheum~y_date  metho~j_date
ild_before~e  frac_befor~e  haem_ca_af~e  rheum~2_date  sulfasalaz~e
copd_befor~e  dem_before~e  ckd_after_~e  rheum~3_date  hydroxychl~e

. local string_dates `r(varlist)'

. foreach var of local string_dates {
  2.     gen `var'_num = date(`var', "YMD")
  3.     format `var'_num %td
  4.     order `var'_num, after(`var')
  5.     drop `var'
  6.     rename `var'_num `var'
  7. }
(74 missing values generated)
(339 missing values generated)
(343 missing values generated)
(366 missing values generated)
(311 missing values generated)
(337 missing values generated)
(311 missing values generated)
(361 missing values generated)
(324 missing values generated)
(291 missing values generated)
(40 missing values generated)
(213 missing values generated)
(297 missing values generated)
(353 missing values generated)
(369 missing values generated)
(372 missing values generated)
(311 missing values generated)
(363 missing values generated)
(372 missing values generated)
(370 missing values generated)
(373 missing values generated)
(367 missing values generated)
(366 missing values generated)
(259 missing values generated)
(348 missing values generated)
(366 missing values generated)
(368 missing values generated)
(372 missing values generated)
(366 missing values generated)
(373 missing values generated)
(373 missing values generated)
(366 missing values generated)
(356 missing values generated)
(368 missing values generated)
(343 missing values generated)
(335 missing values generated)
(373 missing values generated)
(373 missing values generated)
(346 missing values generated)
(285 missing values generated)
(220 missing values generated)
(133 missing values generated)
(260 missing values generated)
(234 missing values generated)
(364 missing values generated)
(364 missing values generated)
(364 missing values generated)
(365 missing values generated)
(365 missing values generated)
(365 missing values generated)

. 
. ***Variables ending in _date that are numeric
. foreach var of varlist *_date {
  2.     capture confirm string variable `var'
  3.     if _rc != 0 {
  4.         format `var' %td
  5.     }
  6. }

. 
. ***Create binary indicator for each
. ds *_date
eia_code_d~e  lung_ca_be~e  ild_after_~e  dem_after_~e  rheum~e_date  rtt_cl_sta~e
ra_code_date  solid_ca_b~e  copd_after~e  creatinin~te  ~erheum_date  rtt_cl_ref~e
psa_code_d~e  haem_ca_be~e  cva_after_~e  rf_date       l~ecode_date  rtt_cl_end~e
anksp_code~e  ckd_before~e  lung_ca_af~e  bmi_date      ~frheum_date  rtt_op_sta~e
undiff_cod~e  depr_befor~e  solid_ca_a~e  r~_appt_date  l~fcode_date  rtt_op_ref~e
chd_before~e  osteop_bef~e  haem_ca_af~e  rheum~y_date  leflunomid~e  rtt_op_end~e
dm_before_~e  frac_befor~e  ckd_after_~e  rheum~2_date  metho~e_date
ild_before~e  dem_before~e  depr_after~e  rheum~3_date  metho~j_date
copd_befor~e  chd_after_~e  osteop_aft~e  rheum~4_date  sulfasalaz~e
cva_before~e  dm_after_d~e  frac_after~e  r~eappt_date  hydroxychl~e

. local dates `r(varlist)'

. foreach var of local dates {
  2.         local newvar =  substr("`var'", 1, length("`var'") - 5)
  3.         gen `newvar' = (`var'!=. )
  4.         order `newvar', after(`var')
  5. }

. 
. /*
> **Will also need to amend conversion for biologic dates ==============================
> ======================*
> ***Some dates are given with month/year only, so adding day 15 to enable them to be pr
> ocessed as dates 
> 
> foreach var of varlist   abatacept_date                                         ///
>                                                  adalimumab_date                      
>                   ///     
>                                                  baricitinib_date                     
>                   ///
>                                                  certolizumab_date                    
>                   ///
>                                                  etanercept_date                      
>                   ///
>                                                  golimumab_date                       
>                   ///
>                                                  guselkumab_date                      
>                   ///     
>                                                  infliximab_date                      
>                   ///
>                                                  ixekizumab_date                      
>                   ///
>                                                  methotrexate_hcd_date                
>           ///
>                                                  rituximab_date                       
>                   ///
>                                                  sarilumab_date                       
>                   ///
>                                                  secukinumab_date                     
>                   ///     
>                                                  tocilizumab_date                     
>                   ///
>                                                  tofacitinib_date                     
>                   ///
>                                                  upadacitinib_date                    
>                   ///
>                                                  ustekinumab_date                     
>                   ///
>                                                  {
>                                                         
>                 capture confirm string variable `var'
>                 if _rc!=0 {
>                         assert `var'==.
>                         rename `var' `var'_date
>                 }
>         
>                 else {
>                                 replace `var' = `var' + "-15"
>                                 rename `var' `var'_dstr
>                                 replace `var'_dstr = " " if `var'_dstr == "-15"
>                                 gen `var'_date = date(`var'_dstr, "YMD") 
>                                 order `var'_date, after(`var'_dstr)
>                                 drop `var'_dstr
>                 }
>         
>         format `var'_date %td
> }
> */
.                                          
. **Create and label variables =========================================================
> ==*/
. 
. ***Age variables
. *Create categorised age
. drop if age<18 & age !=.
(0 observations deleted)

. drop if age>109 & age !=.
(4 observations deleted)

. drop if age==.
(0 observations deleted)

. lab var age "Age at diagnosis"

. 
. recode age 18/39.9999 = 1 /// 
>            40/49.9999 = 2 ///
>                    50/59.9999 = 3 ///
>                60/69.9999 = 4 ///
>                    70/79.9999 = 5 ///
>                    80/max = 6, gen(agegroup) 
(370 differences between age and agegroup)

. 
. label define agegroup   1 "18-39" ///
>                                                 2 "40-49" ///
>                                                 3 "50-59" ///
>                                                 4 "60-69" ///
>                                                 5 "70-79" ///
>                                                 6 "80+"

.                                                 
. label values agegroup agegroup

. lab var agegroup "Age group"

. tab agegroup, missing

  Age group |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-39 |        160       43.24       43.24
      40-49 |         53       14.32       57.57
      50-59 |         33        8.92       66.49
      60-69 |         23        6.22       72.70
      70-79 |         32        8.65       81.35
        80+ |         69       18.65      100.00
------------+-----------------------------------
      Total |        370      100.00

. order agegroup, after(age)

. 
. ***Sex
. gen male = 1 if sex == "male"
(197 missing values generated)

. replace male = 0 if sex == "female"
(197 real changes made)

. lab var male "Male"

. lab define male 0 "No" 1 "Yes", modify

. lab val male male

. tab male, missing

       Male |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        197       53.24       53.24
        Yes |        173       46.76      100.00
------------+-----------------------------------
      Total |        370      100.00

. order male, after(sex)

. 
. ***Ethnicity
. gen ethnicity_n = 1 if ethnicity == "White"
(341 missing values generated)

. replace ethnicity_n = 2 if ethnicity == "Asian or Asian British"
(19 real changes made)

. replace ethnicity_n = 3 if ethnicity == "Black or Black British"
(25 real changes made)

. replace ethnicity_n = 4 if ethnicity == "Mixed"
(14 real changes made)

. replace ethnicity_n = 5 if ethnicity == "Chinese or Other Ethnic Groups"
(29 real changes made)

. replace ethnicity_n = 6 if ethnicity == "Unknown"
(254 real changes made)

. 
. 
. label define ethnicity_n        1 "White"                                             
>   ///
>                                                         2 "Asian or Asian British"    
>           ///
>                                                         3 "Black or Black British"    
>   ///
>                                                         4 "Mixed"                     
>                           ///
>                                                         5 "Chinese or Other Ethnic Gro
> ups" ///
>                                                         6 "Not known", modify

.                                                         
. label values ethnicity_n ethnicity_n

. lab var ethnicity_n "Ethnicity"

. tab ethnicity_n, missing

                     Ethnicity |      Freq.     Percent        Cum.
-------------------------------+-----------------------------------
                         White |         29        7.84        7.84
        Asian or Asian British |         19        5.14       12.97
        Black or Black British |         25        6.76       19.73
                         Mixed |         14        3.78       23.51
Chinese or Other Ethnic Groups |         29        7.84       31.35
                     Not known |        254       68.65      100.00
-------------------------------+-----------------------------------
                         Total |        370      100.00

. drop ethnicity

. rename ethnicity_n ethnicity 

. 
. ***Practice regions
. encode region, gen(nuts_region)

. tab region, missing

                  region |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
                         |         84       22.70       22.70
                    East |         43       11.62       34.32
           East Midlands |         22        5.95       40.27
                  London |         31        8.38       48.65
              North East |         32        8.65       57.30
              North West |         30        8.11       65.41
              South East |         32        8.65       74.05
              South West |         34        9.19       83.24
           West Midlands |         36        9.73       92.97
Yorkshire and The Humber |         26        7.03      100.00
-------------------------+-----------------------------------
                   Total |        370      100.00

. replace region="Not known" if region==""
(84 real changes made)

. gen region_nospace=region

. replace region_nospace="SouthWest" if region=="South West"
(34 real changes made)

. replace region_nospace="EastMidlands" if region=="East Midlands"
(22 real changes made)

. replace region_nospace="East" if region=="East"
(0 real changes made)

. replace region_nospace="London" if region=="London"
(0 real changes made)

. replace region_nospace="NorthEast" if region=="North East"
(32 real changes made)

. replace region_nospace="NorthWest" if region=="North West"
(30 real changes made)

. replace region_nospace="SouthEast" if region=="South East"
(32 real changes made)

. replace region_nospace="WestMidlands" if region=="West Midlands"
(36 real changes made)

. replace region_nospace="YorkshireandTheHumber" if region=="Yorkshire and The Humber"
(26 real changes made)

. 
. ***IMD
. gen imd = 1 if imd_quintile == "1 (most deprived)"
(303 missing values generated)

. replace imd = 2 if imd_quintile == "2"
(55 real changes made)

. replace imd = 3 if imd_quintile == "3"
(51 real changes made)

. replace imd = 4 if imd_quintile == "4"
(53 real changes made)

. replace imd = 5 if imd_quintile == "5 (least deprived)"
(57 real changes made)

. replace imd = .u if imd_quintile == "Unknown"
(87 real changes made, 87 to missing)

. lab var imd "Index of multiple deprivation"

. lab define imd 1 "1 (most deprived)" ///
>                            2 "2" ///
>                            3 "3" ///
>                            4 "4" ///
>                            5 "5 (least deprived)" ///
>                            .u "Not known"

. lab val imd imd                    

. tab imd, missing

 Index of multiple |
       deprivation |      Freq.     Percent        Cum.
-------------------+-----------------------------------
 1 (most deprived) |         67       18.11       18.11
                 2 |         55       14.86       32.97
                 3 |         51       13.78       46.76
                 4 |         53       14.32       61.08
5 (least deprived) |         57       15.41       76.49
         Not known |         87       23.51      100.00
-------------------+-----------------------------------
             Total |        370      100.00

. drop imd_quintile

. 
. ***Body Mass Index
. *Recode strange values 
. replace bmi_value = . if bmi_value == 0 
(0 real changes made)

. replace bmi_value = . if !inrange(bmi_value, 10, 80)
(0 real changes made)

. 
. *Restrict to within 10 years of EIA diagnosis date and aged>16 
. gen bmi_time = (eia_code_date - bmi_date)/365.25
(370 missing values generated)

. gen bmi_age = age - bmi_time
(370 missing values generated)

. replace bmi_value = . if bmi_age < 16 
(0 real changes made)

. replace bmi_value = . if bmi_time > 10 & bmi_time != . 
(0 real changes made)

. 
. *Set to missing if no date, and vice versa 
. replace bmi_value = . if bmi_date == . 
(0 real changes made)

. replace bmi_date = . if bmi_value == . 
(0 real changes made)

. replace bmi_time = . if bmi_value == . 
(0 real changes made)

. replace bmi_age = . if bmi_value == . 
(0 real changes made)

. 
. *Create BMI categories
. gen     bmicat = .
(370 missing values generated)

. recode  bmicat . = 1 if bmi_value < 18.5
(0 changes made to bmicat)

. recode  bmicat . = 2 if bmi_value < 25
(0 changes made to bmicat)

. recode  bmicat . = 3 if bmi_value < 30
(0 changes made to bmicat)

. recode  bmicat . = 4 if bmi_value < 35
(0 changes made to bmicat)

. recode  bmicat . = 5 if bmi_value < 40
(0 changes made to bmicat)

. recode  bmicat . = 6 if bmi_value < .
(0 changes made to bmicat)

. replace bmicat = .u if bmi_value >= .
(370 real changes made, 370 to missing)

. 
. label define bmicat 1 "Underweight (<18.5)"     ///
>                                         2 "Normal (18.5-24.9)"          ///
>                                         3 "Overweight (25-29.9)"        ///
>                                         4 "Obese I (30-34.9)"           ///
>                                         5 "Obese II (35-39.9)"          ///
>                                         6 "Obese III (40+)"                     ///
>                                         .u "Not known"

.                                         
. label values bmicat bmicat

. lab var bmicat "BMI"

. tab bmicat, missing

                 BMI |      Freq.     Percent        Cum.
---------------------+-----------------------------------
           Not known |        370      100.00      100.00
---------------------+-----------------------------------
               Total |        370      100.00

. order bmicat, after (bmi_value)

. drop bmi_age bmi_time

. 
. *Create less granular categorisation
. recode bmicat 1/3 .u = 1 4 = 2 5 = 3 6 = 4, gen(obese4cat)
(370 differences between bmicat and obese4cat)

. 
. label define obese4cat  1 "No record of obesity"        ///
>                                                 2 "Obese I (30-34.9)"           ///
>                                                 3 "Obese II (35-39.9)"          ///
>                                                 4 "Obese III (40+)"             

. 
. label values obese4cat obese4cat

. order obese4cat, after(bmicat)

. 
. ***Smoking 
. label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Not known"

. 
. gen     smoke = 1  if smoking_status == "N"
(369 missing values generated)

. replace smoke = 2  if smoking_status == "E"
(133 real changes made)

. replace smoke = 3  if smoking_status == "S"
(235 real changes made)

. replace smoke = .u if smoking_status == "M"
(1 real change made, 1 to missing)

. replace smoke = .u if smoking_status == "" 
(0 real changes made)

. 
. label values smoke smoke

. lab var smoke "Smoking status"

. drop smoking_status

. tab smoke, missing

    Smoking |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
      Never |          1        0.27        0.27
     Former |        133       35.95       36.22
    Current |        235       63.51       99.73
  Not known |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. *Create non-missing 3-category variable for current smoking (assumes missing smoking i
> s never smoking)
. recode smoke .u = 1, gen(smoke_nomiss)
(1 differences between smoke and smoke_nomiss)

. order smoke_nomiss, after(smoke)

. label values smoke_nomiss smoke

. 
. **Clinical comorbidities
. ***Nb. not using creatinine of HBA1c values for now, just codes
. foreach disease in ckd dm ild copd cva lung_ca solid_ca haem_ca depr osteop frac dem c
> hd {
  2.         label define `disease'_before 0 "No" 1 "Yes"
  3.         label values `disease'_before `disease'_before
  4.         tab `disease'_before, missing
  5.         label define `disease'_after 0 "No" 1 "Yes"
  6.         label values `disease'_after `disease'_after
  7.         tab `disease'_after, missing
  8.         gen `disease'_new = 1 if (`disease'_after == 1 & `disease'_before == 0)
  9.         recode `disease'_new .=0
 10.         label define `disease'_new 0 "No" 1 "Yes"
 11.         label values `disease'_new `disease'_new
 12.         tab `disease'_new, missing
 13.         order `disease'_new, after(`disease'_after)
 14. }

 ckd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        294       79.46       79.46
        Yes |         76       20.54      100.00
------------+-----------------------------------
      Total |        370      100.00

  ckd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to ckd_new)

    ckd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

  dm_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        334       90.27       90.27
        Yes |         36        9.73      100.00
------------+-----------------------------------
      Total |        370      100.00

   dm_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to dm_new)

     dm_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 ild_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  ild_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        366       98.92       98.92
        Yes |          4        1.08      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to ild_new)

    ild_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

copd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        357       96.49       96.49
        Yes |         13        3.51      100.00
------------+-----------------------------------
      Total |        370      100.00

 copd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00
(369 missing values generated)
(369 changes made to copd_new)

   copd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

 cva_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        321       86.76       86.76
        Yes |         49       13.24      100.00
------------+-----------------------------------
      Total |        370      100.00

  cva_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        363       98.11       98.11
        Yes |          7        1.89      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to cva_new)

    cva_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        287       77.57       77.57
        Yes |         83       22.43      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to lung_ca_new)

lung_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_be |
       fore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |         39       10.54       10.54
        Yes |        331       89.46      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_af |
        ter |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        256       69.19       69.19
        Yes |        114       30.81      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to solid_ca_new)

solid_ca_ne |
          w |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        209       56.49       56.49
        Yes |        161       43.51      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        344       92.97       92.97
        Yes |         26        7.03      100.00
------------+-----------------------------------
      Total |        370      100.00
(359 missing values generated)
(359 changes made to haem_ca_new)

haem_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00

depr_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        349       94.32       94.32
        Yes |         21        5.68      100.00
------------+-----------------------------------
      Total |        370      100.00

 depr_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to depr_new)

   depr_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_befo |
         re |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_afte |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to osteop_new)

 osteop_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

frac_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 frac_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00
(370 missing values generated)
(370 changes made to frac_new)

   frac_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

 dem_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  dem_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to dem_new)

    dem_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

 chd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  chd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00
(361 missing values generated)
(361 changes made to chd_new)

    chd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        361       97.57       97.57
        Yes |          9        2.43      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. lab var ckd_before "Chronic kidney disease"

. lab var ckd_after "Chronic kidney disease"

. lab var ckd_new "Chronic kidney disease"

. lab var dm_before "Type 2 diabetes mellitus"

. lab var dm_after "Type 2 diabetes mellitus"

. lab var dm_new "Type 2 diabetes mellitus"

. lab var ild_before "Interstitial lung disease"

. lab var ild_after "Interstitial lung disease"

. lab var ild_new "Interstitial lung disease"

. lab var copd_before "COPD"

. lab var copd_after "COPD"

. lab var copd_new "COPD"

. lab var lung_ca_before "Lung cancer"

. lab var lung_ca_after "Lung cancer"

. lab var lung_ca_new "Lung cancer"

. lab var solid_ca_before "Solid organ cancer"

. lab var solid_ca_after "Solid organ cancer"

. lab var solid_ca_new "Solid organ cancer"

. lab var haem_ca_before "Haematological cancer"

. lab var haem_ca_after "Haematological cancer"

. lab var haem_ca_new "Haematological cancer"

. lab var depr_before "Depression"

. lab var depr_after "Depression"

. lab var depr_new "Depression"

. lab var osteop_before "Osteoporosis"

. lab var osteop_after "Osteoporosis"

. lab var osteop_new "Osteoporosis"

. lab var frac_before "Fragility fracture"

. lab var frac_after "Fragility fracture"

. lab var frac_new "Fragility fracture"

. lab var dem_before "Dementia"

. lab var dem_after "Dementia"

. lab var dem_new "Dementia"

. lab var chd_before "Coronary heart disease"

. lab var chd_after "Coronary heart disease"

. lab var chd_new "Coronary heart disease"

. 
. lab var rheum_appt "Rheumatology appointment"

. lab define rheum_appt 0 "No" 1 "Yes", modify

. lab val rheum_appt rheum_appt

. 
. **All patients should have diagnostic code============================================
> =================*/
. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

. keep if eia_code==1
(0 observations deleted)

. 
. **Check first rheum appt date was before diagnostic code date=========================
> =========*/
. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before EIA code appeared in GP recor
> d; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

. tab rheum_appt if rheum_appt_date>eia_code_date & rheum_appt_date!=. //confirm proport
> ion who had first rheum appt (i.e. not missing) after EIA code

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |          1      100.00      100.00
------------+-----------------------------------
      Total |          1      100.00

. tab rheum_appt if rheum_appt_date>(eia_code_date + 30) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 30 days after EIA code 
no observations

. tab rheum_appt if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 60 days after EIA code - should be none
no observations

. replace rheum_appt=0 if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //re
> place as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. replace rheum_appt_date=. if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=.
>  //replace as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. 
. **As above - for differently specified rheumatology appointments
. replace rheum_appt_any=0 if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt_any_
> date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt_any_date=. if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt
> _any_date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2=0 if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2_date=. if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date
> !=. //replace as missing those appts >60 days after EIA code_yea
(0 real changes made)

. replace rheum_appt3=0 if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt3_date=. if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date
> !=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt4=0 if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date!=. /
> /replace as missing those appts >60 days after EIA code
(8 real changes made)

. replace rheum_appt4_date=. if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date
> !=. //replace as missing those appts >60 days after EIA code
(8 real changes made, 8 to missing)

. 
. *Check if first csDMARD/biologic was after rheum appt date============================
> =========================*/
. **csDMARDs (not including high cost MTX; wouldn't be shared care)
. gen csdmard=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methotrexa
> te_inj==1 | sulfasalazine==1
(76 missing values generated)

. recode csdmard .=0 
(76 changes made to csdmard)

. tab csdmard, missing

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |         76       20.54       20.54
          1 |        294       79.46      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. **Date of first csDMARD script (not including high cost MTX prescriptions)
. gen csdmard_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date, met
> hotrexate_inj_date, sulfasalazine_date)
(76 missing values generated)

. format %td csdmard_date

. 
. /*
> **csDMARDs (including high cost MTX)
> gen csdmard_hcd=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methot
> rexate_inj==1 | methotrexate_hcd==1 | sulfasalazine==1
> recode csdmard_hcd .=0 
> tab csdmard_hcd, missing
> 
> **Date of first csDMARD script (including high cost MTX prescriptions)
> gen csdmard_hcd_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date,
>  methotrexate_inj_date, methotrexate_hcd_date, sulfasalazine_date)
> format %td csdmard_hcd_date
> 
> **Biologic use
> gen biologic=1 if abatacept==1 | adalimumab==1 | baricitinib==1 | certolizumab==1 | et
> anercept==1 | golimumab==1 | guselkumab==1 | infliximab==1 | ixekizumab==1 | rituximab
> ==1 | sarilumab==1 | secukinumab==1 | tocilizumab==1 | tofacitinib==1 | upadacitinib==
> 1 | ustekinumab==1 
> recode biologic .=0
> tab biologic, missing
> 
> **Date of first biologic script
> gen biologic_date=min(abatacept_date, adalimumab_date, baricitinib_date, certolizumab_
> date, etanercept_date, golimumab_date, guselkumab_date, infliximab_date, ixekizumab_da
> te, rituximab_date, sarilumab_date, secukinumab_date, tocilizumab_date, tofacitinib_da
> te, upadacitinib_date, ustekinumab_date)
> format %td biologic_date
> */
. 
. **Exclude if first csdmard was more than 60 days before first rheum appt
. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & csdmard_date<rheum_appt_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_d
> ate 

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_date //d
> rop if first csDMARD more than 60 days before first attendance at a rheum appt 
(7 observations deleted)

. tab csdmard if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmar
> d_date + 60)<rheum_appt_any_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmard_date 
> + 60)<rheum_appt_any_date //drop if first csDMARD more than 60 days before first captu
> red rheum appt that did not have first attendance tag
(7 observations deleted)

. 
. /*
> tab biologic if rheum_appt_date!=. & biologic_date!=. & biologic_date<rheum_appt_date 
> tab biologic if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_app
> t_date 
> drop if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_appt_date /
> /drop if first biologic more than 60 days before first rheum_appt_date
> tab biologic if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biol
> ogic_date + 60)<rheum_appt_any_date
> drop if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biologic_dat
> e + 60)<rheum_appt_any_date //drop if first biologic more than 60 days before first ca
> ptured rheum appt that did not have first attendance tag
> */
. 
. *Generate diagnosis date==============================================================
> =*/
. **Use diagnostic code date (in GP record) as diagnosis date
. gen diagnosis_date=eia_code_date

. format diagnosis_date %td

. 
. *Refine diagnostic window=============================================================
> */
. **Keep patients with diagnosis date after start date and before end date - should be n
> one dropped
. keep if diagnosis_date>=date("$start_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. keep if diagnosis_date<date("$end_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. 
. *Include only most recent EIA sub-diagnosis===========================================
> ==*/
. replace ra_code =0 if psa_code_date > ra_code_date & psa_code_date !=.
(0 real changes made)

. replace ra_code =0 if anksp_code_date > ra_code_date & anksp_code_date !=.
(0 real changes made)

. replace ra_code =0 if undiff_code_date > ra_code_date & undiff_code_date !=.
(0 real changes made)

. replace psa_code =0 if ra_code_date >= psa_code_date & ra_code_date !=.
(0 real changes made)

. replace psa_code =0 if anksp_code_date > psa_code_date & anksp_code_date !=.
(0 real changes made)

. replace psa_code =0 if undiff_code_date > psa_code_date & undiff_code_date !=.
(0 real changes made)

. replace anksp_code =0 if psa_code_date >= anksp_code_date & psa_code_date !=.
(0 real changes made)

. replace anksp_code =0 if ra_code_date >= anksp_code_date & ra_code_date !=.
(0 real changes made)

. replace anksp_code =0 if undiff_code_date > anksp_code_date & undiff_code_date !=.
(0 real changes made)

. replace undiff_code =0 if ra_code_date >= undiff_code_date & ra_code_date !=.
(0 real changes made)

. replace undiff_code =0 if psa_code_date >= undiff_code_date & psa_code_date !=.
(0 real changes made)

. replace undiff_code =0 if anksp_code_date >= undiff_code_date & anksp_code_date !=.
(0 real changes made)

. gen eia_diagnosis=1 if ra_code==1
(67 missing values generated)

. replace eia_diagnosis=2 if psa_code==1
(31 real changes made)

. replace eia_diagnosis=3 if anksp_code==1
(29 real changes made)

. replace eia_diagnosis=4 if undiff_code==1
(7 real changes made)

. lab define eia_diagnosis 1 "RA" 2 "PsA" 3 "AxSpA" 4 "Undiff IA", modify

. lab val eia_diagnosis eia_diagnosis

. tab eia_diagnosis, missing

eia_diagnos |
         is |      Freq.     Percent        Cum.
------------+-----------------------------------
         RA |        289       81.18       81.18
        PsA |         31        8.71       89.89
      AxSpA |         29        8.15       98.03
  Undiff IA |          7        1.97      100.00
------------+-----------------------------------
      Total |        356      100.00

. drop if eia_diagnosis==. //should be none
(0 observations deleted)

. 
. decode eia_diagnosis, gen(eia_diag)

. replace eia_diag="Undiff_IA" if eia_diagnosis==4
(7 real changes made)

. 
. *Split into 6-month time windows=========================================*/
. **Month/Year of GP diagnostic code
. gen year_diag=year(eia_code_date)

. format year_diag %ty

. gen month_diag=month(eia_code_date)

. gen mo_year_diagn=ym(year_diag, month_diag)

. format mo_year_diagn %tmMon-CCYY

. generate str16 mo_year_diagn_s = strofreal(mo_year_diagn,"%tmCCYY!mNN")

. lab var mo_year_diagn "Month/Year of Diagnosis"

. lab var mo_year_diagn_s "Month/Year of Diagnosis"

. 
. **Month/Year of rheum appt
. gen year_appt=year(rheum_appt_date) if rheum_appt_date!=.
(355 missing values generated)

. format year_appt %ty

. gen month_appt=month(rheum_appt_date) if rheum_appt_date!=. 
(355 missing values generated)

. gen mo_year_appt=ym(year_appt, month_appt)
(355 missing values generated)

. format mo_year_appt %tmMon-CCYY

. generate str16 mo_year_appt_s = strofreal(mo_year_appt,"%tmCCYY!mNN")

. 
. **Separate into 3-month time windows (for diagnosis date)
. gen diagnosis_3m = qofd(diagnosis_date)

. format diagnosis_3m %tq

. lab var diagnosis_3m "Time period for diagnosis"

. tab diagnosis_3m, missing

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        1.97        1.97
     2016q3 |          6        1.69        3.65
     2016q4 |         11        3.09        6.74
     2017q1 |          7        1.97        8.71
     2017q2 |          7        1.97       10.67
     2017q3 |         13        3.65       14.33
     2017q4 |          9        2.53       16.85
     2018q1 |         14        3.93       20.79
     2018q2 |         10        2.81       23.60
     2018q3 |         15        4.21       27.81
     2018q4 |         13        3.65       31.46
     2019q1 |          7        1.97       33.43
     2019q2 |         16        4.49       37.92
     2019q3 |          7        1.97       39.89
     2019q4 |          8        2.25       42.13
     2020q1 |         12        3.37       45.51
     2020q2 |          9        2.53       48.03
     2020q3 |         10        2.81       50.84
     2020q4 |         11        3.09       53.93
     2021q1 |         10        2.81       56.74
     2021q2 |          9        2.53       59.27
     2021q3 |         14        3.93       63.20
     2021q4 |         17        4.78       67.98
     2022q1 |          8        2.25       70.22
     2022q2 |          7        1.97       72.19
     2022q3 |          6        1.69       73.88
     2022q4 |          7        1.97       75.84
     2023q1 |         13        3.65       79.49
     2023q2 |          6        1.69       81.18
     2023q3 |          6        1.69       82.87
     2023q4 |         14        3.93       86.80
     2024q1 |         10        2.81       89.61
     2024q2 |         13        3.65       93.26
     2024q3 |         12        3.37       96.63
     2024q4 |          7        1.97       98.60
     2025q1 |          5        1.40      100.00
------------+-----------------------------------
      Total |        356      100.00

. bys eia_diagnosis: tab diagnosis_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        2.42        2.42
     2016q3 |          5        1.73        4.15
     2016q4 |          9        3.11        7.27
     2017q1 |          7        2.42        9.69
     2017q2 |          7        2.42       12.11
     2017q3 |         12        4.15       16.26
     2017q4 |          9        3.11       19.38
     2018q1 |         12        4.15       23.53
     2018q2 |          6        2.08       25.61
     2018q3 |         11        3.81       29.41
     2018q4 |         11        3.81       33.22
     2019q1 |          7        2.42       35.64
     2019q2 |         10        3.46       39.10
     2019q3 |          5        1.73       40.83
     2019q4 |          5        1.73       42.56
     2020q1 |          9        3.11       45.67
     2020q2 |          9        3.11       48.79
     2020q3 |          7        2.42       51.21
     2020q4 |          8        2.77       53.98
     2021q1 |          8        2.77       56.75
     2021q2 |          7        2.42       59.17
     2021q3 |         11        3.81       62.98
     2021q4 |         15        5.19       68.17
     2022q1 |          7        2.42       70.59
     2022q2 |          5        1.73       72.32
     2022q3 |          4        1.38       73.70
     2022q4 |          6        2.08       75.78
     2023q1 |          7        2.42       78.20
     2023q2 |          4        1.38       79.58
     2023q3 |          5        1.73       81.31
     2023q4 |         11        3.81       85.12
     2024q1 |         10        3.46       88.58
     2024q2 |         12        4.15       92.73
     2024q3 |         11        3.81       96.54
     2024q4 |          5        1.73       98.27
     2025q1 |          5        1.73      100.00
------------+-----------------------------------
      Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q4 |          2        6.45        6.45
     2018q2 |          4       12.90       19.35
     2018q3 |          1        3.23       22.58
     2019q2 |          3        9.68       32.26
     2019q3 |          2        6.45       38.71
     2019q4 |          1        3.23       41.94
     2020q1 |          1        3.23       45.16
     2020q3 |          1        3.23       48.39
     2020q4 |          2        6.45       54.84
     2021q1 |          2        6.45       61.29
     2021q3 |          2        6.45       67.74
     2022q1 |          1        3.23       70.97
     2022q2 |          1        3.23       74.19
     2022q3 |          1        3.23       77.42
     2022q4 |          1        3.23       80.65
     2023q1 |          2        6.45       87.10
     2023q3 |          1        3.23       90.32
     2023q4 |          2        6.45       96.77
     2024q4 |          1        3.23      100.00
------------+-----------------------------------
      Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q3 |          1        3.45        3.45
     2017q3 |          1        3.45        6.90
     2018q1 |          2        6.90       13.79
     2018q3 |          3       10.34       24.14
     2018q4 |          1        3.45       27.59
     2019q2 |          3       10.34       37.93
     2019q4 |          1        3.45       41.38
     2020q1 |          2        6.90       48.28
     2020q3 |          2        6.90       55.17
     2020q4 |          1        3.45       58.62
     2021q2 |          2        6.90       65.52
     2021q3 |          1        3.45       68.97
     2021q4 |          1        3.45       72.41
     2023q1 |          2        6.90       79.31
     2023q2 |          2        6.90       86.21
     2023q4 |          1        3.45       89.66
     2024q2 |          1        3.45       93.10
     2024q3 |          1        3.45       96.55
     2024q4 |          1        3.45      100.00
------------+-----------------------------------
      Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2018q4 |          1       14.29       14.29
     2019q4 |          1       14.29       28.57
     2021q4 |          1       14.29       42.86
     2022q2 |          1       14.29       57.14
     2022q3 |          1       14.29       71.43
     2023q1 |          2       28.57      100.00
------------+-----------------------------------
      Total |          7      100.00


. 
. **Separate into 12-month time windows (for diagnosis date)
. gen base_date = date("$start_date", "DMY")

. gen diagnosis_year = (floor((diagnosis_date - base_date) / 365.25) + 1) if ((diagnosis
> _date >= base_date) & (diagnosis_date <= (date("$end_date", "DMY"))))

. lab var diagnosis_year "Year of diagnosis"

. forvalues i = $base_year/$end_year {
  2.     local start = `base_year' + `i' - 1
  3.     local end = `start' + 1
  4.     label define diagnosis_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val diagnosis_year diagnosis_year_lbl

. 
. * Clear any existing label definition
. label define diagnosis_year_lbl, remove
option remove not allowed
r(198);

end of do-file

r(198);

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. 
. import delimited "$projectdir/output/dataset.csv", clear
(encoding automatically selected: ISO-8859-1)
(88 vars, 374 obs)

. 
. **Set Ado file path
. adopath + "$projectdir/analysis/extra_ados"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\documents/"
  [5]  (PLUS)      "C:\users\PUBLIC\documents/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/an
> alysis/extra_ados"
  [8]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory
> _rheum/analysis/extra_ados"

. 
. **Set index dates ===========================================================*/
. global year_preceding = "01/04/2015"

. global start_date = "01/04/2016"

. global end_date = "31/03/2025"

. global base_year = year(date("$start_date", "DMY"))

. global end_year = year(date("$end_date", "DMY"))

. 
. **Conversion for dates====================================================*
. ***Variables ending in _date that are string
. ds *_date, has(type string)
eia_code_d~e  cva_before~e  chd_after_~e  depr_after~e  rheum~4_date  rtt_cl_sta~e
ra_code_date  lung_ca_be~e  dm_after_d~e  osteop_aft~e  rheum~e_date  rtt_cl_ref~e
psa_code_d~e  solid_ca_b~e  ild_after_~e  dem_after_~e  ~erheum_date  rtt_cl_end~e
anksp_code~e  haem_ca_be~e  copd_after~e  creatinin~te  l~ecode_date  rtt_op_sta~e
undiff_cod~e  ckd_before~e  cva_after_~e  rf_date       leflunomid~e  rtt_op_ref~e
chd_before~e  depr_befor~e  lung_ca_af~e  r~_appt_date  metho~e_date  rtt_op_end~e
dm_before_~e  osteop_bef~e  solid_ca_a~e  rheum~y_date  metho~j_date
ild_before~e  frac_befor~e  haem_ca_af~e  rheum~2_date  sulfasalaz~e
copd_befor~e  dem_before~e  ckd_after_~e  rheum~3_date  hydroxychl~e

. local string_dates `r(varlist)'

. foreach var of local string_dates {
  2.     gen `var'_num = date(`var', "YMD")
  3.     format `var'_num %td
  4.     order `var'_num, after(`var')
  5.     drop `var'
  6.     rename `var'_num `var'
  7. }
(74 missing values generated)
(339 missing values generated)
(343 missing values generated)
(366 missing values generated)
(311 missing values generated)
(337 missing values generated)
(311 missing values generated)
(361 missing values generated)
(324 missing values generated)
(291 missing values generated)
(40 missing values generated)
(213 missing values generated)
(297 missing values generated)
(353 missing values generated)
(369 missing values generated)
(372 missing values generated)
(311 missing values generated)
(363 missing values generated)
(372 missing values generated)
(370 missing values generated)
(373 missing values generated)
(367 missing values generated)
(366 missing values generated)
(259 missing values generated)
(348 missing values generated)
(366 missing values generated)
(368 missing values generated)
(372 missing values generated)
(366 missing values generated)
(373 missing values generated)
(373 missing values generated)
(366 missing values generated)
(356 missing values generated)
(368 missing values generated)
(343 missing values generated)
(335 missing values generated)
(373 missing values generated)
(373 missing values generated)
(346 missing values generated)
(285 missing values generated)
(220 missing values generated)
(133 missing values generated)
(260 missing values generated)
(234 missing values generated)
(364 missing values generated)
(364 missing values generated)
(364 missing values generated)
(365 missing values generated)
(365 missing values generated)
(365 missing values generated)

. 
. ***Variables ending in _date that are numeric
. foreach var of varlist *_date {
  2.     capture confirm string variable `var'
  3.     if _rc != 0 {
  4.         format `var' %td
  5.     }
  6. }

. 
. ***Create binary indicator for each
. ds *_date
eia_code_d~e  lung_ca_be~e  ild_after_~e  dem_after_~e  rheum~e_date  rtt_cl_sta~e
ra_code_date  solid_ca_b~e  copd_after~e  creatinin~te  ~erheum_date  rtt_cl_ref~e
psa_code_d~e  haem_ca_be~e  cva_after_~e  rf_date       l~ecode_date  rtt_cl_end~e
anksp_code~e  ckd_before~e  lung_ca_af~e  bmi_date      ~frheum_date  rtt_op_sta~e
undiff_cod~e  depr_befor~e  solid_ca_a~e  r~_appt_date  l~fcode_date  rtt_op_ref~e
chd_before~e  osteop_bef~e  haem_ca_af~e  rheum~y_date  leflunomid~e  rtt_op_end~e
dm_before_~e  frac_befor~e  ckd_after_~e  rheum~2_date  metho~e_date
ild_before~e  dem_before~e  depr_after~e  rheum~3_date  metho~j_date
copd_befor~e  chd_after_~e  osteop_aft~e  rheum~4_date  sulfasalaz~e
cva_before~e  dm_after_d~e  frac_after~e  r~eappt_date  hydroxychl~e

. local dates `r(varlist)'

. foreach var of local dates {
  2.         local newvar =  substr("`var'", 1, length("`var'") - 5)
  3.         gen `newvar' = (`var'!=. )
  4.         order `newvar', after(`var')
  5. }

. 
. /*
> **Will also need to amend conversion for biologic dates ==============================
> ======================*
> ***Some dates are given with month/year only, so adding day 15 to enable them to be pr
> ocessed as dates 
> 
> foreach var of varlist   abatacept_date                                         ///
>                                                  adalimumab_date                      
>                   ///     
>                                                  baricitinib_date                     
>                   ///
>                                                  certolizumab_date                    
>                   ///
>                                                  etanercept_date                      
>                   ///
>                                                  golimumab_date                       
>                   ///
>                                                  guselkumab_date                      
>                   ///     
>                                                  infliximab_date                      
>                   ///
>                                                  ixekizumab_date                      
>                   ///
>                                                  methotrexate_hcd_date                
>           ///
>                                                  rituximab_date                       
>                   ///
>                                                  sarilumab_date                       
>                   ///
>                                                  secukinumab_date                     
>                   ///     
>                                                  tocilizumab_date                     
>                   ///
>                                                  tofacitinib_date                     
>                   ///
>                                                  upadacitinib_date                    
>                   ///
>                                                  ustekinumab_date                     
>                   ///
>                                                  {
>                                                         
>                 capture confirm string variable `var'
>                 if _rc!=0 {
>                         assert `var'==.
>                         rename `var' `var'_date
>                 }
>         
>                 else {
>                                 replace `var' = `var' + "-15"
>                                 rename `var' `var'_dstr
>                                 replace `var'_dstr = " " if `var'_dstr == "-15"
>                                 gen `var'_date = date(`var'_dstr, "YMD") 
>                                 order `var'_date, after(`var'_dstr)
>                                 drop `var'_dstr
>                 }
>         
>         format `var'_date %td
> }
> */
.                                          
. **Create and label variables =========================================================
> ==*/
. 
. ***Age variables
. *Create categorised age
. drop if age<18 & age !=.
(0 observations deleted)

. drop if age>109 & age !=.
(4 observations deleted)

. drop if age==.
(0 observations deleted)

. lab var age "Age at diagnosis"

. 
. recode age 18/39.9999 = 1 /// 
>            40/49.9999 = 2 ///
>                    50/59.9999 = 3 ///
>                60/69.9999 = 4 ///
>                    70/79.9999 = 5 ///
>                    80/max = 6, gen(agegroup) 
(370 differences between age and agegroup)

. 
. label define agegroup   1 "18-39" ///
>                                                 2 "40-49" ///
>                                                 3 "50-59" ///
>                                                 4 "60-69" ///
>                                                 5 "70-79" ///
>                                                 6 "80+"

.                                                 
. label values agegroup agegroup

. lab var agegroup "Age group"

. tab agegroup, missing

  Age group |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-39 |        160       43.24       43.24
      40-49 |         53       14.32       57.57
      50-59 |         33        8.92       66.49
      60-69 |         23        6.22       72.70
      70-79 |         32        8.65       81.35
        80+ |         69       18.65      100.00
------------+-----------------------------------
      Total |        370      100.00

. order agegroup, after(age)

. 
. ***Sex
. gen male = 1 if sex == "male"
(197 missing values generated)

. replace male = 0 if sex == "female"
(197 real changes made)

. lab var male "Male"

. lab define male 0 "No" 1 "Yes", modify

. lab val male male

. tab male, missing

       Male |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        197       53.24       53.24
        Yes |        173       46.76      100.00
------------+-----------------------------------
      Total |        370      100.00

. order male, after(sex)

. 
. ***Ethnicity
. gen ethnicity_n = 1 if ethnicity == "White"
(341 missing values generated)

. replace ethnicity_n = 2 if ethnicity == "Asian or Asian British"
(19 real changes made)

. replace ethnicity_n = 3 if ethnicity == "Black or Black British"
(25 real changes made)

. replace ethnicity_n = 4 if ethnicity == "Mixed"
(14 real changes made)

. replace ethnicity_n = 5 if ethnicity == "Chinese or Other Ethnic Groups"
(29 real changes made)

. replace ethnicity_n = 6 if ethnicity == "Unknown"
(254 real changes made)

. 
. 
. label define ethnicity_n        1 "White"                                             
>   ///
>                                                         2 "Asian or Asian British"    
>           ///
>                                                         3 "Black or Black British"    
>   ///
>                                                         4 "Mixed"                     
>                           ///
>                                                         5 "Chinese or Other Ethnic Gro
> ups" ///
>                                                         6 "Not known", modify

.                                                         
. label values ethnicity_n ethnicity_n

. lab var ethnicity_n "Ethnicity"

. tab ethnicity_n, missing

                     Ethnicity |      Freq.     Percent        Cum.
-------------------------------+-----------------------------------
                         White |         29        7.84        7.84
        Asian or Asian British |         19        5.14       12.97
        Black or Black British |         25        6.76       19.73
                         Mixed |         14        3.78       23.51
Chinese or Other Ethnic Groups |         29        7.84       31.35
                     Not known |        254       68.65      100.00
-------------------------------+-----------------------------------
                         Total |        370      100.00

. drop ethnicity

. rename ethnicity_n ethnicity 

. 
. ***Practice regions
. encode region, gen(nuts_region)

. tab region, missing

                  region |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
                         |         84       22.70       22.70
                    East |         43       11.62       34.32
           East Midlands |         22        5.95       40.27
                  London |         31        8.38       48.65
              North East |         32        8.65       57.30
              North West |         30        8.11       65.41
              South East |         32        8.65       74.05
              South West |         34        9.19       83.24
           West Midlands |         36        9.73       92.97
Yorkshire and The Humber |         26        7.03      100.00
-------------------------+-----------------------------------
                   Total |        370      100.00

. replace region="Not known" if region==""
(84 real changes made)

. gen region_nospace=region

. replace region_nospace="SouthWest" if region=="South West"
(34 real changes made)

. replace region_nospace="EastMidlands" if region=="East Midlands"
(22 real changes made)

. replace region_nospace="East" if region=="East"
(0 real changes made)

. replace region_nospace="London" if region=="London"
(0 real changes made)

. replace region_nospace="NorthEast" if region=="North East"
(32 real changes made)

. replace region_nospace="NorthWest" if region=="North West"
(30 real changes made)

. replace region_nospace="SouthEast" if region=="South East"
(32 real changes made)

. replace region_nospace="WestMidlands" if region=="West Midlands"
(36 real changes made)

. replace region_nospace="YorkshireandTheHumber" if region=="Yorkshire and The Humber"
(26 real changes made)

. 
. ***IMD
. gen imd = 1 if imd_quintile == "1 (most deprived)"
(303 missing values generated)

. replace imd = 2 if imd_quintile == "2"
(55 real changes made)

. replace imd = 3 if imd_quintile == "3"
(51 real changes made)

. replace imd = 4 if imd_quintile == "4"
(53 real changes made)

. replace imd = 5 if imd_quintile == "5 (least deprived)"
(57 real changes made)

. replace imd = .u if imd_quintile == "Unknown"
(87 real changes made, 87 to missing)

. lab var imd "Index of multiple deprivation"

. lab define imd 1 "1 (most deprived)" ///
>                            2 "2" ///
>                            3 "3" ///
>                            4 "4" ///
>                            5 "5 (least deprived)" ///
>                            .u "Not known"

. lab val imd imd                    

. tab imd, missing

 Index of multiple |
       deprivation |      Freq.     Percent        Cum.
-------------------+-----------------------------------
 1 (most deprived) |         67       18.11       18.11
                 2 |         55       14.86       32.97
                 3 |         51       13.78       46.76
                 4 |         53       14.32       61.08
5 (least deprived) |         57       15.41       76.49
         Not known |         87       23.51      100.00
-------------------+-----------------------------------
             Total |        370      100.00

. drop imd_quintile

. 
. ***Body Mass Index
. *Recode strange values 
. replace bmi_value = . if bmi_value == 0 
(0 real changes made)

. replace bmi_value = . if !inrange(bmi_value, 10, 80)
(0 real changes made)

. 
. *Restrict to within 10 years of EIA diagnosis date and aged>16 
. gen bmi_time = (eia_code_date - bmi_date)/365.25
(370 missing values generated)

. gen bmi_age = age - bmi_time
(370 missing values generated)

. replace bmi_value = . if bmi_age < 16 
(0 real changes made)

. replace bmi_value = . if bmi_time > 10 & bmi_time != . 
(0 real changes made)

. 
. *Set to missing if no date, and vice versa 
. replace bmi_value = . if bmi_date == . 
(0 real changes made)

. replace bmi_date = . if bmi_value == . 
(0 real changes made)

. replace bmi_time = . if bmi_value == . 
(0 real changes made)

. replace bmi_age = . if bmi_value == . 
(0 real changes made)

. 
. *Create BMI categories
. gen     bmicat = .
(370 missing values generated)

. recode  bmicat . = 1 if bmi_value < 18.5
(0 changes made to bmicat)

. recode  bmicat . = 2 if bmi_value < 25
(0 changes made to bmicat)

. recode  bmicat . = 3 if bmi_value < 30
(0 changes made to bmicat)

. recode  bmicat . = 4 if bmi_value < 35
(0 changes made to bmicat)

. recode  bmicat . = 5 if bmi_value < 40
(0 changes made to bmicat)

. recode  bmicat . = 6 if bmi_value < .
(0 changes made to bmicat)

. replace bmicat = .u if bmi_value >= .
(370 real changes made, 370 to missing)

. 
. label define bmicat 1 "Underweight (<18.5)"     ///
>                                         2 "Normal (18.5-24.9)"          ///
>                                         3 "Overweight (25-29.9)"        ///
>                                         4 "Obese I (30-34.9)"           ///
>                                         5 "Obese II (35-39.9)"          ///
>                                         6 "Obese III (40+)"                     ///
>                                         .u "Not known"

.                                         
. label values bmicat bmicat

. lab var bmicat "BMI"

. tab bmicat, missing

                 BMI |      Freq.     Percent        Cum.
---------------------+-----------------------------------
           Not known |        370      100.00      100.00
---------------------+-----------------------------------
               Total |        370      100.00

. order bmicat, after (bmi_value)

. drop bmi_age bmi_time

. 
. *Create less granular categorisation
. recode bmicat 1/3 .u = 1 4 = 2 5 = 3 6 = 4, gen(obese4cat)
(370 differences between bmicat and obese4cat)

. 
. label define obese4cat  1 "No record of obesity"        ///
>                                                 2 "Obese I (30-34.9)"           ///
>                                                 3 "Obese II (35-39.9)"          ///
>                                                 4 "Obese III (40+)"             

. 
. label values obese4cat obese4cat

. order obese4cat, after(bmicat)

. 
. ***Smoking 
. label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Not known"

. 
. gen     smoke = 1  if smoking_status == "N"
(369 missing values generated)

. replace smoke = 2  if smoking_status == "E"
(133 real changes made)

. replace smoke = 3  if smoking_status == "S"
(235 real changes made)

. replace smoke = .u if smoking_status == "M"
(1 real change made, 1 to missing)

. replace smoke = .u if smoking_status == "" 
(0 real changes made)

. 
. label values smoke smoke

. lab var smoke "Smoking status"

. drop smoking_status

. tab smoke, missing

    Smoking |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
      Never |          1        0.27        0.27
     Former |        133       35.95       36.22
    Current |        235       63.51       99.73
  Not known |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. *Create non-missing 3-category variable for current smoking (assumes missing smoking i
> s never smoking)
. recode smoke .u = 1, gen(smoke_nomiss)
(1 differences between smoke and smoke_nomiss)

. order smoke_nomiss, after(smoke)

. label values smoke_nomiss smoke

. 
. **Clinical comorbidities
. ***Nb. not using creatinine of HBA1c values for now, just codes
. foreach disease in ckd dm ild copd cva lung_ca solid_ca haem_ca depr osteop frac dem c
> hd {
  2.         label define `disease'_before 0 "No" 1 "Yes"
  3.         label values `disease'_before `disease'_before
  4.         tab `disease'_before, missing
  5.         label define `disease'_after 0 "No" 1 "Yes"
  6.         label values `disease'_after `disease'_after
  7.         tab `disease'_after, missing
  8.         gen `disease'_new = 1 if (`disease'_after == 1 & `disease'_before == 0)
  9.         recode `disease'_new .=0
 10.         label define `disease'_new 0 "No" 1 "Yes"
 11.         label values `disease'_new `disease'_new
 12.         tab `disease'_new, missing
 13.         order `disease'_new, after(`disease'_after)
 14. }

 ckd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        294       79.46       79.46
        Yes |         76       20.54      100.00
------------+-----------------------------------
      Total |        370      100.00

  ckd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to ckd_new)

    ckd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

  dm_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        334       90.27       90.27
        Yes |         36        9.73      100.00
------------+-----------------------------------
      Total |        370      100.00

   dm_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to dm_new)

     dm_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 ild_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  ild_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        366       98.92       98.92
        Yes |          4        1.08      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to ild_new)

    ild_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

copd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        357       96.49       96.49
        Yes |         13        3.51      100.00
------------+-----------------------------------
      Total |        370      100.00

 copd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00
(369 missing values generated)
(369 changes made to copd_new)

   copd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

 cva_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        321       86.76       86.76
        Yes |         49       13.24      100.00
------------+-----------------------------------
      Total |        370      100.00

  cva_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        363       98.11       98.11
        Yes |          7        1.89      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to cva_new)

    cva_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        287       77.57       77.57
        Yes |         83       22.43      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to lung_ca_new)

lung_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_be |
       fore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |         39       10.54       10.54
        Yes |        331       89.46      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_af |
        ter |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        256       69.19       69.19
        Yes |        114       30.81      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to solid_ca_new)

solid_ca_ne |
          w |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        209       56.49       56.49
        Yes |        161       43.51      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        344       92.97       92.97
        Yes |         26        7.03      100.00
------------+-----------------------------------
      Total |        370      100.00
(359 missing values generated)
(359 changes made to haem_ca_new)

haem_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00

depr_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        349       94.32       94.32
        Yes |         21        5.68      100.00
------------+-----------------------------------
      Total |        370      100.00

 depr_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to depr_new)

   depr_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_befo |
         re |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_afte |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to osteop_new)

 osteop_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

frac_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 frac_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00
(370 missing values generated)
(370 changes made to frac_new)

   frac_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

 dem_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  dem_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to dem_new)

    dem_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

 chd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  chd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00
(361 missing values generated)
(361 changes made to chd_new)

    chd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        361       97.57       97.57
        Yes |          9        2.43      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. lab var ckd_before "Chronic kidney disease"

. lab var ckd_after "Chronic kidney disease"

. lab var ckd_new "Chronic kidney disease"

. lab var dm_before "Type 2 diabetes mellitus"

. lab var dm_after "Type 2 diabetes mellitus"

. lab var dm_new "Type 2 diabetes mellitus"

. lab var ild_before "Interstitial lung disease"

. lab var ild_after "Interstitial lung disease"

. lab var ild_new "Interstitial lung disease"

. lab var copd_before "COPD"

. lab var copd_after "COPD"

. lab var copd_new "COPD"

. lab var lung_ca_before "Lung cancer"

. lab var lung_ca_after "Lung cancer"

. lab var lung_ca_new "Lung cancer"

. lab var solid_ca_before "Solid organ cancer"

. lab var solid_ca_after "Solid organ cancer"

. lab var solid_ca_new "Solid organ cancer"

. lab var haem_ca_before "Haematological cancer"

. lab var haem_ca_after "Haematological cancer"

. lab var haem_ca_new "Haematological cancer"

. lab var depr_before "Depression"

. lab var depr_after "Depression"

. lab var depr_new "Depression"

. lab var osteop_before "Osteoporosis"

. lab var osteop_after "Osteoporosis"

. lab var osteop_new "Osteoporosis"

. lab var frac_before "Fragility fracture"

. lab var frac_after "Fragility fracture"

. lab var frac_new "Fragility fracture"

. lab var dem_before "Dementia"

. lab var dem_after "Dementia"

. lab var dem_new "Dementia"

. lab var chd_before "Coronary heart disease"

. lab var chd_after "Coronary heart disease"

. lab var chd_new "Coronary heart disease"

. 
. lab var rheum_appt "Rheumatology appointment"

. lab define rheum_appt 0 "No" 1 "Yes", modify

. lab val rheum_appt rheum_appt

. 
. **All patients should have diagnostic code============================================
> =================*/
. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

. keep if eia_code==1
(0 observations deleted)

. 
. **Check first rheum appt date was before diagnostic code date=========================
> =========*/
. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before EIA code appeared in GP recor
> d; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

. tab rheum_appt if rheum_appt_date>eia_code_date & rheum_appt_date!=. //confirm proport
> ion who had first rheum appt (i.e. not missing) after EIA code

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |          1      100.00      100.00
------------+-----------------------------------
      Total |          1      100.00

. tab rheum_appt if rheum_appt_date>(eia_code_date + 30) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 30 days after EIA code 
no observations

. tab rheum_appt if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 60 days after EIA code - should be none
no observations

. replace rheum_appt=0 if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //re
> place as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. replace rheum_appt_date=. if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=.
>  //replace as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. 
. **As above - for differently specified rheumatology appointments
. replace rheum_appt_any=0 if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt_any_
> date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt_any_date=. if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt
> _any_date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2=0 if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2_date=. if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date
> !=. //replace as missing those appts >60 days after EIA code_yea
(0 real changes made)

. replace rheum_appt3=0 if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt3_date=. if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date
> !=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt4=0 if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date!=. /
> /replace as missing those appts >60 days after EIA code
(8 real changes made)

. replace rheum_appt4_date=. if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date
> !=. //replace as missing those appts >60 days after EIA code
(8 real changes made, 8 to missing)

. 
. *Check if first csDMARD/biologic was after rheum appt date============================
> =========================*/
. **csDMARDs (not including high cost MTX; wouldn't be shared care)
. gen csdmard=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methotrexa
> te_inj==1 | sulfasalazine==1
(76 missing values generated)

. recode csdmard .=0 
(76 changes made to csdmard)

. tab csdmard, missing

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |         76       20.54       20.54
          1 |        294       79.46      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. **Date of first csDMARD script (not including high cost MTX prescriptions)
. gen csdmard_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date, met
> hotrexate_inj_date, sulfasalazine_date)
(76 missing values generated)

. format %td csdmard_date

. 
. /*
> **csDMARDs (including high cost MTX)
> gen csdmard_hcd=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methot
> rexate_inj==1 | methotrexate_hcd==1 | sulfasalazine==1
> recode csdmard_hcd .=0 
> tab csdmard_hcd, missing
> 
> **Date of first csDMARD script (including high cost MTX prescriptions)
> gen csdmard_hcd_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date,
>  methotrexate_inj_date, methotrexate_hcd_date, sulfasalazine_date)
> format %td csdmard_hcd_date
> 
> **Biologic use
> gen biologic=1 if abatacept==1 | adalimumab==1 | baricitinib==1 | certolizumab==1 | et
> anercept==1 | golimumab==1 | guselkumab==1 | infliximab==1 | ixekizumab==1 | rituximab
> ==1 | sarilumab==1 | secukinumab==1 | tocilizumab==1 | tofacitinib==1 | upadacitinib==
> 1 | ustekinumab==1 
> recode biologic .=0
> tab biologic, missing
> 
> **Date of first biologic script
> gen biologic_date=min(abatacept_date, adalimumab_date, baricitinib_date, certolizumab_
> date, etanercept_date, golimumab_date, guselkumab_date, infliximab_date, ixekizumab_da
> te, rituximab_date, sarilumab_date, secukinumab_date, tocilizumab_date, tofacitinib_da
> te, upadacitinib_date, ustekinumab_date)
> format %td biologic_date
> */
. 
. **Exclude if first csdmard was more than 60 days before first rheum appt
. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & csdmard_date<rheum_appt_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_d
> ate 

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_date //d
> rop if first csDMARD more than 60 days before first attendance at a rheum appt 
(7 observations deleted)

. tab csdmard if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmar
> d_date + 60)<rheum_appt_any_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmard_date 
> + 60)<rheum_appt_any_date //drop if first csDMARD more than 60 days before first captu
> red rheum appt that did not have first attendance tag
(7 observations deleted)

. 
. /*
> tab biologic if rheum_appt_date!=. & biologic_date!=. & biologic_date<rheum_appt_date 
> tab biologic if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_app
> t_date 
> drop if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_appt_date /
> /drop if first biologic more than 60 days before first rheum_appt_date
> tab biologic if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biol
> ogic_date + 60)<rheum_appt_any_date
> drop if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biologic_dat
> e + 60)<rheum_appt_any_date //drop if first biologic more than 60 days before first ca
> ptured rheum appt that did not have first attendance tag
> */
. 
. *Generate diagnosis date==============================================================
> =*/
. **Use diagnostic code date (in GP record) as diagnosis date
. gen diagnosis_date=eia_code_date

. format diagnosis_date %td

. 
. *Refine diagnostic window=============================================================
> */
. **Keep patients with diagnosis date after start date and before end date - should be n
> one dropped
. keep if diagnosis_date>=date("$start_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. keep if diagnosis_date<date("$end_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. 
. *Include only most recent EIA sub-diagnosis===========================================
> ==*/
. replace ra_code =0 if psa_code_date > ra_code_date & psa_code_date !=.
(0 real changes made)

. replace ra_code =0 if anksp_code_date > ra_code_date & anksp_code_date !=.
(0 real changes made)

. replace ra_code =0 if undiff_code_date > ra_code_date & undiff_code_date !=.
(0 real changes made)

. replace psa_code =0 if ra_code_date >= psa_code_date & ra_code_date !=.
(0 real changes made)

. replace psa_code =0 if anksp_code_date > psa_code_date & anksp_code_date !=.
(0 real changes made)

. replace psa_code =0 if undiff_code_date > psa_code_date & undiff_code_date !=.
(0 real changes made)

. replace anksp_code =0 if psa_code_date >= anksp_code_date & psa_code_date !=.
(0 real changes made)

. replace anksp_code =0 if ra_code_date >= anksp_code_date & ra_code_date !=.
(0 real changes made)

. replace anksp_code =0 if undiff_code_date > anksp_code_date & undiff_code_date !=.
(0 real changes made)

. replace undiff_code =0 if ra_code_date >= undiff_code_date & ra_code_date !=.
(0 real changes made)

. replace undiff_code =0 if psa_code_date >= undiff_code_date & psa_code_date !=.
(0 real changes made)

. replace undiff_code =0 if anksp_code_date >= undiff_code_date & anksp_code_date !=.
(0 real changes made)

. gen eia_diagnosis=1 if ra_code==1
(67 missing values generated)

. replace eia_diagnosis=2 if psa_code==1
(31 real changes made)

. replace eia_diagnosis=3 if anksp_code==1
(29 real changes made)

. replace eia_diagnosis=4 if undiff_code==1
(7 real changes made)

. lab define eia_diagnosis 1 "RA" 2 "PsA" 3 "AxSpA" 4 "Undiff IA", modify

. lab val eia_diagnosis eia_diagnosis

. tab eia_diagnosis, missing

eia_diagnos |
         is |      Freq.     Percent        Cum.
------------+-----------------------------------
         RA |        289       81.18       81.18
        PsA |         31        8.71       89.89
      AxSpA |         29        8.15       98.03
  Undiff IA |          7        1.97      100.00
------------+-----------------------------------
      Total |        356      100.00

. drop if eia_diagnosis==. //should be none
(0 observations deleted)

. 
. decode eia_diagnosis, gen(eia_diag)

. replace eia_diag="Undiff_IA" if eia_diagnosis==4
(7 real changes made)

. 
. *Split into 6-month time windows=========================================*/
. **Month/Year of GP diagnostic code
. gen year_diag=year(eia_code_date)

. format year_diag %ty

. gen month_diag=month(eia_code_date)

. gen mo_year_diagn=ym(year_diag, month_diag)

. format mo_year_diagn %tmMon-CCYY

. generate str16 mo_year_diagn_s = strofreal(mo_year_diagn,"%tmCCYY!mNN")

. lab var mo_year_diagn "Month/Year of Diagnosis"

. lab var mo_year_diagn_s "Month/Year of Diagnosis"

. 
. **Month/Year of rheum appt
. gen year_appt=year(rheum_appt_date) if rheum_appt_date!=.
(355 missing values generated)

. format year_appt %ty

. gen month_appt=month(rheum_appt_date) if rheum_appt_date!=. 
(355 missing values generated)

. gen mo_year_appt=ym(year_appt, month_appt)
(355 missing values generated)

. format mo_year_appt %tmMon-CCYY

. generate str16 mo_year_appt_s = strofreal(mo_year_appt,"%tmCCYY!mNN")

. 
. **Separate into 3-month time windows (for diagnosis date)
. gen diagnosis_3m = qofd(diagnosis_date)

. format diagnosis_3m %tq

. lab var diagnosis_3m "Time period for diagnosis"

. tab diagnosis_3m, missing

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        1.97        1.97
     2016q3 |          6        1.69        3.65
     2016q4 |         11        3.09        6.74
     2017q1 |          7        1.97        8.71
     2017q2 |          7        1.97       10.67
     2017q3 |         13        3.65       14.33
     2017q4 |          9        2.53       16.85
     2018q1 |         14        3.93       20.79
     2018q2 |         10        2.81       23.60
     2018q3 |         15        4.21       27.81
     2018q4 |         13        3.65       31.46
     2019q1 |          7        1.97       33.43
     2019q2 |         16        4.49       37.92
     2019q3 |          7        1.97       39.89
     2019q4 |          8        2.25       42.13
     2020q1 |         12        3.37       45.51
     2020q2 |          9        2.53       48.03
     2020q3 |         10        2.81       50.84
     2020q4 |         11        3.09       53.93
     2021q1 |         10        2.81       56.74
     2021q2 |          9        2.53       59.27
     2021q3 |         14        3.93       63.20
     2021q4 |         17        4.78       67.98
     2022q1 |          8        2.25       70.22
     2022q2 |          7        1.97       72.19
     2022q3 |          6        1.69       73.88
     2022q4 |          7        1.97       75.84
     2023q1 |         13        3.65       79.49
     2023q2 |          6        1.69       81.18
     2023q3 |          6        1.69       82.87
     2023q4 |         14        3.93       86.80
     2024q1 |         10        2.81       89.61
     2024q2 |         13        3.65       93.26
     2024q3 |         12        3.37       96.63
     2024q4 |          7        1.97       98.60
     2025q1 |          5        1.40      100.00
------------+-----------------------------------
      Total |        356      100.00

. bys eia_diagnosis: tab diagnosis_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        2.42        2.42
     2016q3 |          5        1.73        4.15
     2016q4 |          9        3.11        7.27
     2017q1 |          7        2.42        9.69
     2017q2 |          7        2.42       12.11
     2017q3 |         12        4.15       16.26
     2017q4 |          9        3.11       19.38
     2018q1 |         12        4.15       23.53
     2018q2 |          6        2.08       25.61
     2018q3 |         11        3.81       29.41
     2018q4 |         11        3.81       33.22
     2019q1 |          7        2.42       35.64
     2019q2 |         10        3.46       39.10
     2019q3 |          5        1.73       40.83
     2019q4 |          5        1.73       42.56
     2020q1 |          9        3.11       45.67
     2020q2 |          9        3.11       48.79
     2020q3 |          7        2.42       51.21
     2020q4 |          8        2.77       53.98
     2021q1 |          8        2.77       56.75
     2021q2 |          7        2.42       59.17
     2021q3 |         11        3.81       62.98
     2021q4 |         15        5.19       68.17
     2022q1 |          7        2.42       70.59
     2022q2 |          5        1.73       72.32
     2022q3 |          4        1.38       73.70
     2022q4 |          6        2.08       75.78
     2023q1 |          7        2.42       78.20
     2023q2 |          4        1.38       79.58
     2023q3 |          5        1.73       81.31
     2023q4 |         11        3.81       85.12
     2024q1 |         10        3.46       88.58
     2024q2 |         12        4.15       92.73
     2024q3 |         11        3.81       96.54
     2024q4 |          5        1.73       98.27
     2025q1 |          5        1.73      100.00
------------+-----------------------------------
      Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q4 |          2        6.45        6.45
     2018q2 |          4       12.90       19.35
     2018q3 |          1        3.23       22.58
     2019q2 |          3        9.68       32.26
     2019q3 |          2        6.45       38.71
     2019q4 |          1        3.23       41.94
     2020q1 |          1        3.23       45.16
     2020q3 |          1        3.23       48.39
     2020q4 |          2        6.45       54.84
     2021q1 |          2        6.45       61.29
     2021q3 |          2        6.45       67.74
     2022q1 |          1        3.23       70.97
     2022q2 |          1        3.23       74.19
     2022q3 |          1        3.23       77.42
     2022q4 |          1        3.23       80.65
     2023q1 |          2        6.45       87.10
     2023q3 |          1        3.23       90.32
     2023q4 |          2        6.45       96.77
     2024q4 |          1        3.23      100.00
------------+-----------------------------------
      Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q3 |          1        3.45        3.45
     2017q3 |          1        3.45        6.90
     2018q1 |          2        6.90       13.79
     2018q3 |          3       10.34       24.14
     2018q4 |          1        3.45       27.59
     2019q2 |          3       10.34       37.93
     2019q4 |          1        3.45       41.38
     2020q1 |          2        6.90       48.28
     2020q3 |          2        6.90       55.17
     2020q4 |          1        3.45       58.62
     2021q2 |          2        6.90       65.52
     2021q3 |          1        3.45       68.97
     2021q4 |          1        3.45       72.41
     2023q1 |          2        6.90       79.31
     2023q2 |          2        6.90       86.21
     2023q4 |          1        3.45       89.66
     2024q2 |          1        3.45       93.10
     2024q3 |          1        3.45       96.55
     2024q4 |          1        3.45      100.00
------------+-----------------------------------
      Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2018q4 |          1       14.29       14.29
     2019q4 |          1       14.29       28.57
     2021q4 |          1       14.29       42.86
     2022q2 |          1       14.29       57.14
     2022q3 |          1       14.29       71.43
     2023q1 |          2       28.57      100.00
------------+-----------------------------------
      Total |          7      100.00


. 
end of do-file

. preserve

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. gen base_date = date("$start_date", "DMY")

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. gen diagnosis_year = (floor((diagnosis_date - base_date) / 365.25) + 1) if ((diagnosis
> _date >= base_date) & (diagnosis_date <= (date("$end_date", "DMY"))))

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. lab var diagnosis_year "Year of diagnosis"

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. forvalues i = $base_year/$end_year {
  2.     local start = `base_year' + `i' - 1
  3.     local end = `start' + 1
  4.     label define diagnosis_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val diagnosis_year diagnosis_year_lbl

. 
end of do-file

. drop diagnosis_year

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. gen diagnosis_year = (floor((diagnosis_date - base_date) / 365.25) + 1) if ((diagnosis
> _date >= base_date) & (diagnosis_date <= (date("$end_date", "DMY"))))

. lab var diagnosis_year "Year of diagnosis"

. forvalues i = $base_year/$end_year {
  2.     local start = $base_year + `i' - 1
  3.     local end = `start' + 1
  4.     label define diagnosis_year_lbl `i' "Apr `start'Mar `end'", add
  5. }
invalid attempt to modify label
r(180);

end of do-file

r(180);

. drop base_date diagnosis_year

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. gen diagnosis_year = (floor((diagnosis_date - date("$start_date", "DMY")) / 365.25) + 
> 1) if inrange(diagnosis_date, date("$start_date", "DMY"), date("$end_date", "DMY"))

. lab var diagnosis_year "Year of diagnosis"

. local max_year = $end_year - $base_year

. forvalues i = 1/`max_year' {
  2.     local start = $base_year + `i' - 1
  3.     local end = `start' + 1
  4.     label define diagnosis_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val diagnosis_year diagnosis_year_lbl

. 
end of do-file

. br eia_code_date diagnosis_3m diagnosis_year

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. tab diagnosis_year, missing

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |         31        8.71        8.71
Apr 2017Mar 2018 |         43       12.08       20.79
Apr 2018Mar 2019 |         45       12.64       33.43
Apr 2019Mar 2020 |         43       12.08       45.51
Apr 2020Mar 2021 |         40       11.24       56.74
Apr 2021Mar 2022 |         48       13.48       70.22
Apr 2022Mar 2023 |         34        9.55       79.78
Apr 2023Mar 2024 |         35        9.83       89.61
Apr 2024Mar 2025 |         37       10.39      100.00
------------------+-----------------------------------
            Total |        356      100.00

. bys eia_diagnosis: tab diagnosis_year, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |         28        9.69        9.69
Apr 2017Mar 2018 |         40       13.84       23.53
Apr 2018Mar 2019 |         35       12.11       35.64
Apr 2019Mar 2020 |         29       10.03       45.67
Apr 2020Mar 2021 |         32       11.07       56.75
Apr 2021Mar 2022 |         40       13.84       70.59
Apr 2022Mar 2023 |         22        7.61       78.20
Apr 2023Mar 2024 |         30       10.38       88.58
Apr 2024Mar 2025 |         33       11.42      100.00
------------------+-----------------------------------
            Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |          2        6.45        6.45
Apr 2018Mar 2019 |          5       16.13       22.58
Apr 2019Mar 2020 |          7       22.58       45.16
Apr 2020Mar 2021 |          5       16.13       61.29
Apr 2021Mar 2022 |          3        9.68       70.97
Apr 2022Mar 2023 |          5       16.13       87.10
Apr 2023Mar 2024 |          3        9.68       96.77
Apr 2024Mar 2025 |          1        3.23      100.00
------------------+-----------------------------------
            Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |          1        3.45        3.45
Apr 2017Mar 2018 |          3       10.34       13.79
Apr 2018Mar 2019 |          4       13.79       27.59
Apr 2019Mar 2020 |          6       20.69       48.28
Apr 2020Mar 2021 |          3       10.34       58.62
Apr 2021Mar 2022 |          4       13.79       72.41
Apr 2022Mar 2023 |          3       10.34       82.76
Apr 2023Mar 2024 |          2        6.90       89.66
Apr 2024Mar 2025 |          3       10.34      100.00
------------------+-----------------------------------
            Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2018Mar 2019 |          1       14.29       14.29
Apr 2019Mar 2020 |          1       14.29       28.57
Apr 2021Mar 2022 |          1       14.29       42.86
Apr 2022Mar 2023 |          4       57.14      100.00
------------------+-----------------------------------
            Total |          7      100.00


. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. tab diagnosis_3m, missing

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        1.97        1.97
     2016q3 |          6        1.69        3.65
     2016q4 |         11        3.09        6.74
     2017q1 |          7        1.97        8.71
     2017q2 |          7        1.97       10.67
     2017q3 |         13        3.65       14.33
     2017q4 |          9        2.53       16.85
     2018q1 |         14        3.93       20.79
     2018q2 |         10        2.81       23.60
     2018q3 |         15        4.21       27.81
     2018q4 |         13        3.65       31.46
     2019q1 |          7        1.97       33.43
     2019q2 |         16        4.49       37.92
     2019q3 |          7        1.97       39.89
     2019q4 |          8        2.25       42.13
     2020q1 |         12        3.37       45.51
     2020q2 |          9        2.53       48.03
     2020q3 |         10        2.81       50.84
     2020q4 |         11        3.09       53.93
     2021q1 |         10        2.81       56.74
     2021q2 |          9        2.53       59.27
     2021q3 |         14        3.93       63.20
     2021q4 |         17        4.78       67.98
     2022q1 |          8        2.25       70.22
     2022q2 |          7        1.97       72.19
     2022q3 |          6        1.69       73.88
     2022q4 |          7        1.97       75.84
     2023q1 |         13        3.65       79.49
     2023q2 |          6        1.69       81.18
     2023q3 |          6        1.69       82.87
     2023q4 |         14        3.93       86.80
     2024q1 |         10        2.81       89.61
     2024q2 |         13        3.65       93.26
     2024q3 |         12        3.37       96.63
     2024q4 |          7        1.97       98.60
     2025q1 |          5        1.40      100.00
------------+-----------------------------------
      Total |        356      100.00

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. tab diagnosis_year, missing

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |         31        8.71        8.71
Apr 2017Mar 2018 |         43       12.08       20.79
Apr 2018Mar 2019 |         45       12.64       33.43
Apr 2019Mar 2020 |         43       12.08       45.51
Apr 2020Mar 2021 |         40       11.24       56.74
Apr 2021Mar 2022 |         48       13.48       70.22
Apr 2022Mar 2023 |         34        9.55       79.78
Apr 2023Mar 2024 |         35        9.83       89.61
Apr 2024Mar 2025 |         37       10.39      100.00
------------------+-----------------------------------
            Total |        356      100.00

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. gen appt_3m = qofd(rheum_appt_date)
(355 missing values generated)

. format appt_3m %tq

. lab var appt_3m "Time period for appointment"

. tab appt_3m, missing

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q4 |          1        0.28        0.28
          . |        355       99.72      100.00
------------+-----------------------------------
      Total |        356      100.00

. bys eia_diagnosis: tab appt_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q4 |          1        0.35        0.35
          . |        288       99.65      100.00
------------+-----------------------------------
      Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
          . |         31      100.00      100.00
------------+-----------------------------------
      Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
          . |         29      100.00      100.00
------------+-----------------------------------
      Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
          . |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00


. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. 
. **Separate into 12-month time windows (for appt date)
. gen appt_year = (floor((rheum_appt_date - date("$start_date", "DMY")) / 365.25) + 1) i
> f inrange(rheum_appt_date, date("$start_date", "DMY"), date("$end_date", "DMY"))
(355 missing values generated)

. lab var appt_year "Year of appointment"

. local max_year = $end_year - $base_year

. forvalues i = 1/`max_year' {
  2.     local start = $base_year + `i' - 1
  3.     local end = `start' + 1
  4.     label define appt_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val appt_year appt_year_lbl

. tab appt_year, missing

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |          1        0.28        0.28
                . |        355       99.72      100.00
------------------+-----------------------------------
            Total |        356      100.00

. bys eia_diagnosis: tab appt_year, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |          1        0.35        0.35
                . |        288       99.65      100.00
------------------+-----------------------------------
            Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
                . |         31      100.00      100.00
------------------+-----------------------------------
            Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
                . |         29      100.00      100.00
------------------+-----------------------------------
            Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
                . |          7      100.00      100.00
------------------+-----------------------------------
            Total |          7      100.00


. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. 
. import delimited "$projectdir/output/dataset.csv", clear
(encoding automatically selected: ISO-8859-1)
(88 vars, 374 obs)

. 
. **Set Ado file path
. adopath + "$projectdir/analysis/extra_ados"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\documents/"
  [5]  (PLUS)      "C:\users\PUBLIC\documents/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/an
> alysis/extra_ados"
  [8]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory
> _rheum/analysis/extra_ados"

. 
. **Set index dates ===========================================================*/
. global year_preceding = "01/04/2015"

. global start_date = "01/04/2016"

. global end_date = "31/03/2025"

. global base_year = year(date("$start_date", "DMY"))

. global end_year = year(date("$end_date", "DMY"))

. 
. **Conversion for dates====================================================*
. ***Variables ending in _date that are string
. ds *_date, has(type string)
eia_code_d~e  cva_before~e  chd_after_~e  depr_after~e  rheum~4_date  rtt_cl_sta~e
ra_code_date  lung_ca_be~e  dm_after_d~e  osteop_aft~e  rheum~e_date  rtt_cl_ref~e
psa_code_d~e  solid_ca_b~e  ild_after_~e  dem_after_~e  ~erheum_date  rtt_cl_end~e
anksp_code~e  haem_ca_be~e  copd_after~e  creatinin~te  l~ecode_date  rtt_op_sta~e
undiff_cod~e  ckd_before~e  cva_after_~e  rf_date       leflunomid~e  rtt_op_ref~e
chd_before~e  depr_befor~e  lung_ca_af~e  r~_appt_date  metho~e_date  rtt_op_end~e
dm_before_~e  osteop_bef~e  solid_ca_a~e  rheum~y_date  metho~j_date
ild_before~e  frac_befor~e  haem_ca_af~e  rheum~2_date  sulfasalaz~e
copd_befor~e  dem_before~e  ckd_after_~e  rheum~3_date  hydroxychl~e

. local string_dates `r(varlist)'

. foreach var of local string_dates {
  2.     gen `var'_num = date(`var', "YMD")
  3.     format `var'_num %td
  4.     order `var'_num, after(`var')
  5.     drop `var'
  6.     rename `var'_num `var'
  7. }
(74 missing values generated)
(339 missing values generated)
(343 missing values generated)
(366 missing values generated)
(311 missing values generated)
(337 missing values generated)
(311 missing values generated)
(361 missing values generated)
(324 missing values generated)
(291 missing values generated)
(40 missing values generated)
(213 missing values generated)
(297 missing values generated)
(353 missing values generated)
(369 missing values generated)
(372 missing values generated)
(311 missing values generated)
(363 missing values generated)
(372 missing values generated)
(370 missing values generated)
(373 missing values generated)
(367 missing values generated)
(366 missing values generated)
(259 missing values generated)
(348 missing values generated)
(366 missing values generated)
(368 missing values generated)
(372 missing values generated)
(366 missing values generated)
(373 missing values generated)
(373 missing values generated)
(366 missing values generated)
(356 missing values generated)
(368 missing values generated)
(343 missing values generated)
(335 missing values generated)
(373 missing values generated)
(373 missing values generated)
(346 missing values generated)
(285 missing values generated)
(220 missing values generated)
(133 missing values generated)
(260 missing values generated)
(234 missing values generated)
(364 missing values generated)
(364 missing values generated)
(364 missing values generated)
(365 missing values generated)
(365 missing values generated)
(365 missing values generated)

. 
. ***Variables ending in _date that are numeric
. foreach var of varlist *_date {
  2.     capture confirm string variable `var'
  3.     if _rc != 0 {
  4.         format `var' %td
  5.     }
  6. }

. 
. ***Create binary indicator for each
. ds *_date
eia_code_d~e  lung_ca_be~e  ild_after_~e  dem_after_~e  rheum~e_date  rtt_cl_sta~e
ra_code_date  solid_ca_b~e  copd_after~e  creatinin~te  ~erheum_date  rtt_cl_ref~e
psa_code_d~e  haem_ca_be~e  cva_after_~e  rf_date       l~ecode_date  rtt_cl_end~e
anksp_code~e  ckd_before~e  lung_ca_af~e  bmi_date      ~frheum_date  rtt_op_sta~e
undiff_cod~e  depr_befor~e  solid_ca_a~e  r~_appt_date  l~fcode_date  rtt_op_ref~e
chd_before~e  osteop_bef~e  haem_ca_af~e  rheum~y_date  leflunomid~e  rtt_op_end~e
dm_before_~e  frac_befor~e  ckd_after_~e  rheum~2_date  metho~e_date
ild_before~e  dem_before~e  depr_after~e  rheum~3_date  metho~j_date
copd_befor~e  chd_after_~e  osteop_aft~e  rheum~4_date  sulfasalaz~e
cva_before~e  dm_after_d~e  frac_after~e  r~eappt_date  hydroxychl~e

. local dates `r(varlist)'

. foreach var of local dates {
  2.         local newvar =  substr("`var'", 1, length("`var'") - 5)
  3.         gen `newvar' = (`var'!=. )
  4.         order `newvar', after(`var')
  5. }

. 
. /*
> **Will also need to amend conversion for biologic dates ==============================
> ======================*
> ***Some dates are given with month/year only, so adding day 15 to enable them to be pr
> ocessed as dates 
> 
> foreach var of varlist   abatacept_date                                         ///
>                                                  adalimumab_date                      
>                   ///     
>                                                  baricitinib_date                     
>                   ///
>                                                  certolizumab_date                    
>                   ///
>                                                  etanercept_date                      
>                   ///
>                                                  golimumab_date                       
>                   ///
>                                                  guselkumab_date                      
>                   ///     
>                                                  infliximab_date                      
>                   ///
>                                                  ixekizumab_date                      
>                   ///
>                                                  methotrexate_hcd_date                
>           ///
>                                                  rituximab_date                       
>                   ///
>                                                  sarilumab_date                       
>                   ///
>                                                  secukinumab_date                     
>                   ///     
>                                                  tocilizumab_date                     
>                   ///
>                                                  tofacitinib_date                     
>                   ///
>                                                  upadacitinib_date                    
>                   ///
>                                                  ustekinumab_date                     
>                   ///
>                                                  {
>                                                         
>                 capture confirm string variable `var'
>                 if _rc!=0 {
>                         assert `var'==.
>                         rename `var' `var'_date
>                 }
>         
>                 else {
>                                 replace `var' = `var' + "-15"
>                                 rename `var' `var'_dstr
>                                 replace `var'_dstr = " " if `var'_dstr == "-15"
>                                 gen `var'_date = date(`var'_dstr, "YMD") 
>                                 order `var'_date, after(`var'_dstr)
>                                 drop `var'_dstr
>                 }
>         
>         format `var'_date %td
> }
> */
.                                          
. **Create and label variables =========================================================
> ==*/
. 
. ***Age variables
. *Create categorised age
. drop if age<18 & age !=.
(0 observations deleted)

. drop if age>109 & age !=.
(4 observations deleted)

. drop if age==.
(0 observations deleted)

. lab var age "Age at diagnosis"

. 
. recode age 18/39.9999 = 1 /// 
>            40/49.9999 = 2 ///
>                    50/59.9999 = 3 ///
>                60/69.9999 = 4 ///
>                    70/79.9999 = 5 ///
>                    80/max = 6, gen(agegroup) 
(370 differences between age and agegroup)

. 
. label define agegroup   1 "18-39" ///
>                                                 2 "40-49" ///
>                                                 3 "50-59" ///
>                                                 4 "60-69" ///
>                                                 5 "70-79" ///
>                                                 6 "80+"

.                                                 
. label values agegroup agegroup

. lab var agegroup "Age group"

. tab agegroup, missing

  Age group |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-39 |        160       43.24       43.24
      40-49 |         53       14.32       57.57
      50-59 |         33        8.92       66.49
      60-69 |         23        6.22       72.70
      70-79 |         32        8.65       81.35
        80+ |         69       18.65      100.00
------------+-----------------------------------
      Total |        370      100.00

. order agegroup, after(age)

. 
. ***Sex
. gen male = 1 if sex == "male"
(197 missing values generated)

. replace male = 0 if sex == "female"
(197 real changes made)

. lab var male "Male"

. lab define male 0 "No" 1 "Yes", modify

. lab val male male

. tab male, missing

       Male |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        197       53.24       53.24
        Yes |        173       46.76      100.00
------------+-----------------------------------
      Total |        370      100.00

. order male, after(sex)

. 
. ***Ethnicity
. gen ethnicity_n = 1 if ethnicity == "White"
(341 missing values generated)

. replace ethnicity_n = 2 if ethnicity == "Asian or Asian British"
(19 real changes made)

. replace ethnicity_n = 3 if ethnicity == "Black or Black British"
(25 real changes made)

. replace ethnicity_n = 4 if ethnicity == "Mixed"
(14 real changes made)

. replace ethnicity_n = 5 if ethnicity == "Chinese or Other Ethnic Groups"
(29 real changes made)

. replace ethnicity_n = 6 if ethnicity == "Unknown"
(254 real changes made)

. 
. 
. label define ethnicity_n        1 "White"                                             
>   ///
>                                                         2 "Asian or Asian British"    
>           ///
>                                                         3 "Black or Black British"    
>   ///
>                                                         4 "Mixed"                     
>                           ///
>                                                         5 "Chinese or Other Ethnic Gro
> ups" ///
>                                                         6 "Not known", modify

.                                                         
. label values ethnicity_n ethnicity_n

. lab var ethnicity_n "Ethnicity"

. tab ethnicity_n, missing

                     Ethnicity |      Freq.     Percent        Cum.
-------------------------------+-----------------------------------
                         White |         29        7.84        7.84
        Asian or Asian British |         19        5.14       12.97
        Black or Black British |         25        6.76       19.73
                         Mixed |         14        3.78       23.51
Chinese or Other Ethnic Groups |         29        7.84       31.35
                     Not known |        254       68.65      100.00
-------------------------------+-----------------------------------
                         Total |        370      100.00

. drop ethnicity

. rename ethnicity_n ethnicity 

. 
. ***Practice regions
. encode region, gen(nuts_region)

. tab region, missing

                  region |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
                         |         84       22.70       22.70
                    East |         43       11.62       34.32
           East Midlands |         22        5.95       40.27
                  London |         31        8.38       48.65
              North East |         32        8.65       57.30
              North West |         30        8.11       65.41
              South East |         32        8.65       74.05
              South West |         34        9.19       83.24
           West Midlands |         36        9.73       92.97
Yorkshire and The Humber |         26        7.03      100.00
-------------------------+-----------------------------------
                   Total |        370      100.00

. replace region="Not known" if region==""
(84 real changes made)

. gen region_nospace=region

. replace region_nospace="SouthWest" if region=="South West"
(34 real changes made)

. replace region_nospace="EastMidlands" if region=="East Midlands"
(22 real changes made)

. replace region_nospace="East" if region=="East"
(0 real changes made)

. replace region_nospace="London" if region=="London"
(0 real changes made)

. replace region_nospace="NorthEast" if region=="North East"
(32 real changes made)

. replace region_nospace="NorthWest" if region=="North West"
(30 real changes made)

. replace region_nospace="SouthEast" if region=="South East"
(32 real changes made)

. replace region_nospace="WestMidlands" if region=="West Midlands"
(36 real changes made)

. replace region_nospace="YorkshireandTheHumber" if region=="Yorkshire and The Humber"
(26 real changes made)

. 
. ***IMD
. gen imd = 1 if imd_quintile == "1 (most deprived)"
(303 missing values generated)

. replace imd = 2 if imd_quintile == "2"
(55 real changes made)

. replace imd = 3 if imd_quintile == "3"
(51 real changes made)

. replace imd = 4 if imd_quintile == "4"
(53 real changes made)

. replace imd = 5 if imd_quintile == "5 (least deprived)"
(57 real changes made)

. replace imd = .u if imd_quintile == "Unknown"
(87 real changes made, 87 to missing)

. lab var imd "Index of multiple deprivation"

. lab define imd 1 "1 (most deprived)" ///
>                            2 "2" ///
>                            3 "3" ///
>                            4 "4" ///
>                            5 "5 (least deprived)" ///
>                            .u "Not known"

. lab val imd imd                    

. tab imd, missing

 Index of multiple |
       deprivation |      Freq.     Percent        Cum.
-------------------+-----------------------------------
 1 (most deprived) |         67       18.11       18.11
                 2 |         55       14.86       32.97
                 3 |         51       13.78       46.76
                 4 |         53       14.32       61.08
5 (least deprived) |         57       15.41       76.49
         Not known |         87       23.51      100.00
-------------------+-----------------------------------
             Total |        370      100.00

. drop imd_quintile

. 
. ***Body Mass Index
. *Recode strange values 
. replace bmi_value = . if bmi_value == 0 
(0 real changes made)

. replace bmi_value = . if !inrange(bmi_value, 10, 80)
(0 real changes made)

. 
. *Restrict to within 10 years of EIA diagnosis date and aged>16 
. gen bmi_time = (eia_code_date - bmi_date)/365.25
(370 missing values generated)

. gen bmi_age = age - bmi_time
(370 missing values generated)

. replace bmi_value = . if bmi_age < 16 
(0 real changes made)

. replace bmi_value = . if bmi_time > 10 & bmi_time != . 
(0 real changes made)

. 
. *Set to missing if no date, and vice versa 
. replace bmi_value = . if bmi_date == . 
(0 real changes made)

. replace bmi_date = . if bmi_value == . 
(0 real changes made)

. replace bmi_time = . if bmi_value == . 
(0 real changes made)

. replace bmi_age = . if bmi_value == . 
(0 real changes made)

. 
. *Create BMI categories
. gen     bmicat = .
(370 missing values generated)

. recode  bmicat . = 1 if bmi_value < 18.5
(0 changes made to bmicat)

. recode  bmicat . = 2 if bmi_value < 25
(0 changes made to bmicat)

. recode  bmicat . = 3 if bmi_value < 30
(0 changes made to bmicat)

. recode  bmicat . = 4 if bmi_value < 35
(0 changes made to bmicat)

. recode  bmicat . = 5 if bmi_value < 40
(0 changes made to bmicat)

. recode  bmicat . = 6 if bmi_value < .
(0 changes made to bmicat)

. replace bmicat = .u if bmi_value >= .
(370 real changes made, 370 to missing)

. 
. label define bmicat 1 "Underweight (<18.5)"     ///
>                                         2 "Normal (18.5-24.9)"          ///
>                                         3 "Overweight (25-29.9)"        ///
>                                         4 "Obese I (30-34.9)"           ///
>                                         5 "Obese II (35-39.9)"          ///
>                                         6 "Obese III (40+)"                     ///
>                                         .u "Not known"

.                                         
. label values bmicat bmicat

. lab var bmicat "BMI"

. tab bmicat, missing

                 BMI |      Freq.     Percent        Cum.
---------------------+-----------------------------------
           Not known |        370      100.00      100.00
---------------------+-----------------------------------
               Total |        370      100.00

. order bmicat, after (bmi_value)

. drop bmi_age bmi_time

. 
. *Create less granular categorisation
. recode bmicat 1/3 .u = 1 4 = 2 5 = 3 6 = 4, gen(obese4cat)
(370 differences between bmicat and obese4cat)

. 
. label define obese4cat  1 "No record of obesity"        ///
>                                                 2 "Obese I (30-34.9)"           ///
>                                                 3 "Obese II (35-39.9)"          ///
>                                                 4 "Obese III (40+)"             

. 
. label values obese4cat obese4cat

. order obese4cat, after(bmicat)

. 
. ***Smoking 
. label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Not known"

. 
. gen     smoke = 1  if smoking_status == "N"
(369 missing values generated)

. replace smoke = 2  if smoking_status == "E"
(133 real changes made)

. replace smoke = 3  if smoking_status == "S"
(235 real changes made)

. replace smoke = .u if smoking_status == "M"
(1 real change made, 1 to missing)

. replace smoke = .u if smoking_status == "" 
(0 real changes made)

. 
. label values smoke smoke

. lab var smoke "Smoking status"

. drop smoking_status

. tab smoke, missing

    Smoking |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
      Never |          1        0.27        0.27
     Former |        133       35.95       36.22
    Current |        235       63.51       99.73
  Not known |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. *Create non-missing 3-category variable for current smoking (assumes missing smoking i
> s never smoking)
. recode smoke .u = 1, gen(smoke_nomiss)
(1 differences between smoke and smoke_nomiss)

. order smoke_nomiss, after(smoke)

. label values smoke_nomiss smoke

. 
. **Clinical comorbidities
. ***Nb. not using creatinine of HBA1c values for now, just codes
. foreach disease in ckd dm ild copd cva lung_ca solid_ca haem_ca depr osteop frac dem c
> hd {
  2.         label define `disease'_before 0 "No" 1 "Yes"
  3.         label values `disease'_before `disease'_before
  4.         tab `disease'_before, missing
  5.         label define `disease'_after 0 "No" 1 "Yes"
  6.         label values `disease'_after `disease'_after
  7.         tab `disease'_after, missing
  8.         gen `disease'_new = 1 if (`disease'_after == 1 & `disease'_before == 0)
  9.         recode `disease'_new .=0
 10.         label define `disease'_new 0 "No" 1 "Yes"
 11.         label values `disease'_new `disease'_new
 12.         tab `disease'_new, missing
 13.         order `disease'_new, after(`disease'_after)
 14. }

 ckd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        294       79.46       79.46
        Yes |         76       20.54      100.00
------------+-----------------------------------
      Total |        370      100.00

  ckd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to ckd_new)

    ckd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

  dm_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        334       90.27       90.27
        Yes |         36        9.73      100.00
------------+-----------------------------------
      Total |        370      100.00

   dm_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to dm_new)

     dm_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 ild_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  ild_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        366       98.92       98.92
        Yes |          4        1.08      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to ild_new)

    ild_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

copd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        357       96.49       96.49
        Yes |         13        3.51      100.00
------------+-----------------------------------
      Total |        370      100.00

 copd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00
(369 missing values generated)
(369 changes made to copd_new)

   copd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        369       99.73       99.73
        Yes |          1        0.27      100.00
------------+-----------------------------------
      Total |        370      100.00

 cva_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        321       86.76       86.76
        Yes |         49       13.24      100.00
------------+-----------------------------------
      Total |        370      100.00

  cva_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        363       98.11       98.11
        Yes |          7        1.89      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to cva_new)

    cva_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        287       77.57       77.57
        Yes |         83       22.43      100.00
------------+-----------------------------------
      Total |        370      100.00

lung_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to lung_ca_new)

lung_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_be |
       fore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |         39       10.54       10.54
        Yes |        331       89.46      100.00
------------+-----------------------------------
      Total |        370      100.00

solid_ca_af |
        ter |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        256       69.19       69.19
        Yes |        114       30.81      100.00
------------+-----------------------------------
      Total |        370      100.00
(365 missing values generated)
(365 changes made to solid_ca_new)

solid_ca_ne |
          w |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        209       56.49       56.49
        Yes |        161       43.51      100.00
------------+-----------------------------------
      Total |        370      100.00

haem_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        344       92.97       92.97
        Yes |         26        7.03      100.00
------------+-----------------------------------
      Total |        370      100.00
(359 missing values generated)
(359 changes made to haem_ca_new)

haem_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00

depr_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        349       94.32       94.32
        Yes |         21        5.68      100.00
------------+-----------------------------------
      Total |        370      100.00

 depr_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00
(364 missing values generated)
(364 changes made to depr_new)

   depr_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        364       98.38       98.38
        Yes |          6        1.62      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_befo |
         re |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        365       98.65       98.65
        Yes |          5        1.35      100.00
------------+-----------------------------------
      Total |        370      100.00

osteop_afte |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00
(368 missing values generated)
(368 changes made to osteop_new)

 osteop_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

frac_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        368       99.46       99.46
        Yes |          2        0.54      100.00
------------+-----------------------------------
      Total |        370      100.00

 frac_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00
(370 missing values generated)
(370 changes made to frac_new)

   frac_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

 dem_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  dem_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00
(362 missing values generated)
(362 changes made to dem_new)

    dem_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

 chd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        308       83.24       83.24
        Yes |         62       16.76      100.00
------------+-----------------------------------
      Total |        370      100.00

  chd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        359       97.03       97.03
        Yes |         11        2.97      100.00
------------+-----------------------------------
      Total |        370      100.00
(361 missing values generated)
(361 changes made to chd_new)

    chd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        361       97.57       97.57
        Yes |          9        2.43      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. lab var ckd_before "Chronic kidney disease"

. lab var ckd_after "Chronic kidney disease"

. lab var ckd_new "Chronic kidney disease"

. lab var dm_before "Type 2 diabetes mellitus"

. lab var dm_after "Type 2 diabetes mellitus"

. lab var dm_new "Type 2 diabetes mellitus"

. lab var ild_before "Interstitial lung disease"

. lab var ild_after "Interstitial lung disease"

. lab var ild_new "Interstitial lung disease"

. lab var copd_before "COPD"

. lab var copd_after "COPD"

. lab var copd_new "COPD"

. lab var lung_ca_before "Lung cancer"

. lab var lung_ca_after "Lung cancer"

. lab var lung_ca_new "Lung cancer"

. lab var solid_ca_before "Solid organ cancer"

. lab var solid_ca_after "Solid organ cancer"

. lab var solid_ca_new "Solid organ cancer"

. lab var haem_ca_before "Haematological cancer"

. lab var haem_ca_after "Haematological cancer"

. lab var haem_ca_new "Haematological cancer"

. lab var depr_before "Depression"

. lab var depr_after "Depression"

. lab var depr_new "Depression"

. lab var osteop_before "Osteoporosis"

. lab var osteop_after "Osteoporosis"

. lab var osteop_new "Osteoporosis"

. lab var frac_before "Fragility fracture"

. lab var frac_after "Fragility fracture"

. lab var frac_new "Fragility fracture"

. lab var dem_before "Dementia"

. lab var dem_after "Dementia"

. lab var dem_new "Dementia"

. lab var chd_before "Coronary heart disease"

. lab var chd_after "Coronary heart disease"

. lab var chd_new "Coronary heart disease"

. 
. lab var rheum_appt "Rheumatology appointment"

. lab define rheum_appt 0 "No" 1 "Yes", modify

. lab val rheum_appt rheum_appt

. 
. **All patients should have diagnostic code============================================
> =================*/
. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        370      100.00      100.00
------------+-----------------------------------
      Total |        370      100.00

. keep if eia_code==1
(0 observations deleted)

. 
. **Check first rheum appt date was before diagnostic code date=========================
> =========*/
. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before EIA code appeared in GP recor
> d; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        362       97.84       97.84
        Yes |          8        2.16      100.00
------------+-----------------------------------
      Total |        370      100.00

. tab rheum_appt if rheum_appt_date>eia_code_date & rheum_appt_date!=. //confirm proport
> ion who had first rheum appt (i.e. not missing) after EIA code

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |          1      100.00      100.00
------------+-----------------------------------
      Total |          1      100.00

. tab rheum_appt if rheum_appt_date>(eia_code_date + 30) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 30 days after EIA code 
no observations

. tab rheum_appt if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 60 days after EIA code - should be none
no observations

. replace rheum_appt=0 if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //re
> place as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. replace rheum_appt_date=. if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=.
>  //replace as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. 
. **As above - for differently specified rheumatology appointments
. replace rheum_appt_any=0 if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt_any_
> date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt_any_date=. if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt
> _any_date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2=0 if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2_date=. if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date
> !=. //replace as missing those appts >60 days after EIA code_yea
(0 real changes made)

. replace rheum_appt3=0 if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt3_date=. if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date
> !=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt4=0 if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date!=. /
> /replace as missing those appts >60 days after EIA code
(8 real changes made)

. replace rheum_appt4_date=. if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date
> !=. //replace as missing those appts >60 days after EIA code
(8 real changes made, 8 to missing)

. 
. *Check if first csDMARD/biologic was after rheum appt date============================
> =========================*/
. **csDMARDs (not including high cost MTX; wouldn't be shared care)
. gen csdmard=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methotrexa
> te_inj==1 | sulfasalazine==1
(76 missing values generated)

. recode csdmard .=0 
(76 changes made to csdmard)

. tab csdmard, missing

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |         76       20.54       20.54
          1 |        294       79.46      100.00
------------+-----------------------------------
      Total |        370      100.00

. 
. **Date of first csDMARD script (not including high cost MTX prescriptions)
. gen csdmard_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date, met
> hotrexate_inj_date, sulfasalazine_date)
(76 missing values generated)

. format %td csdmard_date

. 
. /*
> **csDMARDs (including high cost MTX)
> gen csdmard_hcd=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methot
> rexate_inj==1 | methotrexate_hcd==1 | sulfasalazine==1
> recode csdmard_hcd .=0 
> tab csdmard_hcd, missing
> 
> **Date of first csDMARD script (including high cost MTX prescriptions)
> gen csdmard_hcd_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date,
>  methotrexate_inj_date, methotrexate_hcd_date, sulfasalazine_date)
> format %td csdmard_hcd_date
> 
> **Biologic use
> gen biologic=1 if abatacept==1 | adalimumab==1 | baricitinib==1 | certolizumab==1 | et
> anercept==1 | golimumab==1 | guselkumab==1 | infliximab==1 | ixekizumab==1 | rituximab
> ==1 | sarilumab==1 | secukinumab==1 | tocilizumab==1 | tofacitinib==1 | upadacitinib==
> 1 | ustekinumab==1 
> recode biologic .=0
> tab biologic, missing
> 
> **Date of first biologic script
> gen biologic_date=min(abatacept_date, adalimumab_date, baricitinib_date, certolizumab_
> date, etanercept_date, golimumab_date, guselkumab_date, infliximab_date, ixekizumab_da
> te, rituximab_date, sarilumab_date, secukinumab_date, tocilizumab_date, tofacitinib_da
> te, upadacitinib_date, ustekinumab_date)
> format %td biologic_date
> */
. 
. **Exclude if first csdmard was more than 60 days before first rheum appt
. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & csdmard_date<rheum_appt_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_d
> ate 

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_date //d
> rop if first csDMARD more than 60 days before first attendance at a rheum appt 
(7 observations deleted)

. tab csdmard if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmar
> d_date + 60)<rheum_appt_any_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00

. drop if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmard_date 
> + 60)<rheum_appt_any_date //drop if first csDMARD more than 60 days before first captu
> red rheum appt that did not have first attendance tag
(7 observations deleted)

. 
. /*
> tab biologic if rheum_appt_date!=. & biologic_date!=. & biologic_date<rheum_appt_date 
> tab biologic if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_app
> t_date 
> drop if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_appt_date /
> /drop if first biologic more than 60 days before first rheum_appt_date
> tab biologic if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biol
> ogic_date + 60)<rheum_appt_any_date
> drop if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biologic_dat
> e + 60)<rheum_appt_any_date //drop if first biologic more than 60 days before first ca
> ptured rheum appt that did not have first attendance tag
> */
. 
. *Generate diagnosis date==============================================================
> =*/
. **Use diagnostic code date (in GP record) as diagnosis date
. gen diagnosis_date=eia_code_date

. format diagnosis_date %td

. 
. *Refine diagnostic window=============================================================
> */
. **Keep patients with diagnosis date after start date and before end date - should be n
> one dropped
. keep if diagnosis_date>=date("$start_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. keep if diagnosis_date<date("$end_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        356      100.00      100.00
------------+-----------------------------------
      Total |        356      100.00

. 
. *Include only most recent EIA sub-diagnosis===========================================
> ==*/
. replace ra_code =0 if psa_code_date > ra_code_date & psa_code_date !=.
(0 real changes made)

. replace ra_code =0 if anksp_code_date > ra_code_date & anksp_code_date !=.
(0 real changes made)

. replace ra_code =0 if undiff_code_date > ra_code_date & undiff_code_date !=.
(0 real changes made)

. replace psa_code =0 if ra_code_date >= psa_code_date & ra_code_date !=.
(0 real changes made)

. replace psa_code =0 if anksp_code_date > psa_code_date & anksp_code_date !=.
(0 real changes made)

. replace psa_code =0 if undiff_code_date > psa_code_date & undiff_code_date !=.
(0 real changes made)

. replace anksp_code =0 if psa_code_date >= anksp_code_date & psa_code_date !=.
(0 real changes made)

. replace anksp_code =0 if ra_code_date >= anksp_code_date & ra_code_date !=.
(0 real changes made)

. replace anksp_code =0 if undiff_code_date > anksp_code_date & undiff_code_date !=.
(0 real changes made)

. replace undiff_code =0 if ra_code_date >= undiff_code_date & ra_code_date !=.
(0 real changes made)

. replace undiff_code =0 if psa_code_date >= undiff_code_date & psa_code_date !=.
(0 real changes made)

. replace undiff_code =0 if anksp_code_date >= undiff_code_date & anksp_code_date !=.
(0 real changes made)

. gen eia_diagnosis=1 if ra_code==1
(67 missing values generated)

. replace eia_diagnosis=2 if psa_code==1
(31 real changes made)

. replace eia_diagnosis=3 if anksp_code==1
(29 real changes made)

. replace eia_diagnosis=4 if undiff_code==1
(7 real changes made)

. lab define eia_diagnosis 1 "RA" 2 "PsA" 3 "AxSpA" 4 "Undiff IA", modify

. lab val eia_diagnosis eia_diagnosis

. tab eia_diagnosis, missing

eia_diagnos |
         is |      Freq.     Percent        Cum.
------------+-----------------------------------
         RA |        289       81.18       81.18
        PsA |         31        8.71       89.89
      AxSpA |         29        8.15       98.03
  Undiff IA |          7        1.97      100.00
------------+-----------------------------------
      Total |        356      100.00

. drop if eia_diagnosis==. //should be none
(0 observations deleted)

. 
. decode eia_diagnosis, gen(eia_diag)

. replace eia_diag="Undiff_IA" if eia_diagnosis==4
(7 real changes made)

. 
. *Split into time windows=========================================*/
. **Month/Year of GP diagnostic code
. gen year_diag=year(eia_code_date)

. format year_diag %ty

. gen month_diag=month(eia_code_date)

. gen mo_year_diagn=ym(year_diag, month_diag)

. format mo_year_diagn %tmMon-CCYY

. generate str16 mo_year_diagn_s = strofreal(mo_year_diagn,"%tmCCYY!mNN")

. lab var mo_year_diagn "Month/Year of Diagnosis"

. lab var mo_year_diagn_s "Month/Year of Diagnosis"

. 
. **Month/Year of rheum appt
. gen year_appt=year(rheum_appt_date) if rheum_appt_date!=.
(355 missing values generated)

. format year_appt %ty

. gen month_appt=month(rheum_appt_date) if rheum_appt_date!=. 
(355 missing values generated)

. gen mo_year_appt=ym(year_appt, month_appt)
(355 missing values generated)

. format mo_year_appt %tmMon-CCYY

. generate str16 mo_year_appt_s = strofreal(mo_year_appt,"%tmCCYY!mNN")

. 
. **Separate into 3-month time windows (for diagnosis date)
. gen diagnosis_3m = qofd(diagnosis_date)

. format diagnosis_3m %tq

. lab var diagnosis_3m "Time period for diagnosis"

. tab diagnosis_3m, missing

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        1.97        1.97
     2016q3 |          6        1.69        3.65
     2016q4 |         11        3.09        6.74
     2017q1 |          7        1.97        8.71
     2017q2 |          7        1.97       10.67
     2017q3 |         13        3.65       14.33
     2017q4 |          9        2.53       16.85
     2018q1 |         14        3.93       20.79
     2018q2 |         10        2.81       23.60
     2018q3 |         15        4.21       27.81
     2018q4 |         13        3.65       31.46
     2019q1 |          7        1.97       33.43
     2019q2 |         16        4.49       37.92
     2019q3 |          7        1.97       39.89
     2019q4 |          8        2.25       42.13
     2020q1 |         12        3.37       45.51
     2020q2 |          9        2.53       48.03
     2020q3 |         10        2.81       50.84
     2020q4 |         11        3.09       53.93
     2021q1 |         10        2.81       56.74
     2021q2 |          9        2.53       59.27
     2021q3 |         14        3.93       63.20
     2021q4 |         17        4.78       67.98
     2022q1 |          8        2.25       70.22
     2022q2 |          7        1.97       72.19
     2022q3 |          6        1.69       73.88
     2022q4 |          7        1.97       75.84
     2023q1 |         13        3.65       79.49
     2023q2 |          6        1.69       81.18
     2023q3 |          6        1.69       82.87
     2023q4 |         14        3.93       86.80
     2024q1 |         10        2.81       89.61
     2024q2 |         13        3.65       93.26
     2024q3 |         12        3.37       96.63
     2024q4 |          7        1.97       98.60
     2025q1 |          5        1.40      100.00
------------+-----------------------------------
      Total |        356      100.00

. bys eia_diagnosis: tab diagnosis_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          7        2.42        2.42
     2016q3 |          5        1.73        4.15
     2016q4 |          9        3.11        7.27
     2017q1 |          7        2.42        9.69
     2017q2 |          7        2.42       12.11
     2017q3 |         12        4.15       16.26
     2017q4 |          9        3.11       19.38
     2018q1 |         12        4.15       23.53
     2018q2 |          6        2.08       25.61
     2018q3 |         11        3.81       29.41
     2018q4 |         11        3.81       33.22
     2019q1 |          7        2.42       35.64
     2019q2 |         10        3.46       39.10
     2019q3 |          5        1.73       40.83
     2019q4 |          5        1.73       42.56
     2020q1 |          9        3.11       45.67
     2020q2 |          9        3.11       48.79
     2020q3 |          7        2.42       51.21
     2020q4 |          8        2.77       53.98
     2021q1 |          8        2.77       56.75
     2021q2 |          7        2.42       59.17
     2021q3 |         11        3.81       62.98
     2021q4 |         15        5.19       68.17
     2022q1 |          7        2.42       70.59
     2022q2 |          5        1.73       72.32
     2022q3 |          4        1.38       73.70
     2022q4 |          6        2.08       75.78
     2023q1 |          7        2.42       78.20
     2023q2 |          4        1.38       79.58
     2023q3 |          5        1.73       81.31
     2023q4 |         11        3.81       85.12
     2024q1 |         10        3.46       88.58
     2024q2 |         12        4.15       92.73
     2024q3 |         11        3.81       96.54
     2024q4 |          5        1.73       98.27
     2025q1 |          5        1.73      100.00
------------+-----------------------------------
      Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q4 |          2        6.45        6.45
     2018q2 |          4       12.90       19.35
     2018q3 |          1        3.23       22.58
     2019q2 |          3        9.68       32.26
     2019q3 |          2        6.45       38.71
     2019q4 |          1        3.23       41.94
     2020q1 |          1        3.23       45.16
     2020q3 |          1        3.23       48.39
     2020q4 |          2        6.45       54.84
     2021q1 |          2        6.45       61.29
     2021q3 |          2        6.45       67.74
     2022q1 |          1        3.23       70.97
     2022q2 |          1        3.23       74.19
     2022q3 |          1        3.23       77.42
     2022q4 |          1        3.23       80.65
     2023q1 |          2        6.45       87.10
     2023q3 |          1        3.23       90.32
     2023q4 |          2        6.45       96.77
     2024q4 |          1        3.23      100.00
------------+-----------------------------------
      Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q3 |          1        3.45        3.45
     2017q3 |          1        3.45        6.90
     2018q1 |          2        6.90       13.79
     2018q3 |          3       10.34       24.14
     2018q4 |          1        3.45       27.59
     2019q2 |          3       10.34       37.93
     2019q4 |          1        3.45       41.38
     2020q1 |          2        6.90       48.28
     2020q3 |          2        6.90       55.17
     2020q4 |          1        3.45       58.62
     2021q2 |          2        6.90       65.52
     2021q3 |          1        3.45       68.97
     2021q4 |          1        3.45       72.41
     2023q1 |          2        6.90       79.31
     2023q2 |          2        6.90       86.21
     2023q4 |          1        3.45       89.66
     2024q2 |          1        3.45       93.10
     2024q3 |          1        3.45       96.55
     2024q4 |          1        3.45      100.00
------------+-----------------------------------
      Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2018q4 |          1       14.29       14.29
     2019q4 |          1       14.29       28.57
     2021q4 |          1       14.29       42.86
     2022q2 |          1       14.29       57.14
     2022q3 |          1       14.29       71.43
     2023q1 |          2       28.57      100.00
------------+-----------------------------------
      Total |          7      100.00


. 
. **Separate into 12-month time windows (for diagnosis date)
. gen diagnosis_year = (floor((diagnosis_date - date("$start_date", "DMY")) / 365.25) + 
> 1) if inrange(diagnosis_date, date("$start_date", "DMY"), date("$end_date", "DMY"))

. lab var diagnosis_year "Year of diagnosis"

. local max_year = $end_year - $base_year

. forvalues i = 1/`max_year' {
  2.     local start = $base_year + `i' - 1
  3.     local end = `start' + 1
  4.     label define diagnosis_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val diagnosis_year diagnosis_year_lbl

. tab diagnosis_year, missing

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |         31        8.71        8.71
Apr 2017Mar 2018 |         43       12.08       20.79
Apr 2018Mar 2019 |         45       12.64       33.43
Apr 2019Mar 2020 |         43       12.08       45.51
Apr 2020Mar 2021 |         40       11.24       56.74
Apr 2021Mar 2022 |         48       13.48       70.22
Apr 2022Mar 2023 |         34        9.55       79.78
Apr 2023Mar 2024 |         35        9.83       89.61
Apr 2024Mar 2025 |         37       10.39      100.00
------------------+-----------------------------------
            Total |        356      100.00

. bys eia_diagnosis: tab diagnosis_year, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |         28        9.69        9.69
Apr 2017Mar 2018 |         40       13.84       23.53
Apr 2018Mar 2019 |         35       12.11       35.64
Apr 2019Mar 2020 |         29       10.03       45.67
Apr 2020Mar 2021 |         32       11.07       56.75
Apr 2021Mar 2022 |         40       13.84       70.59
Apr 2022Mar 2023 |         22        7.61       78.20
Apr 2023Mar 2024 |         30       10.38       88.58
Apr 2024Mar 2025 |         33       11.42      100.00
------------------+-----------------------------------
            Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |          2        6.45        6.45
Apr 2018Mar 2019 |          5       16.13       22.58
Apr 2019Mar 2020 |          7       22.58       45.16
Apr 2020Mar 2021 |          5       16.13       61.29
Apr 2021Mar 2022 |          3        9.68       70.97
Apr 2022Mar 2023 |          5       16.13       87.10
Apr 2023Mar 2024 |          3        9.68       96.77
Apr 2024Mar 2025 |          1        3.23      100.00
------------------+-----------------------------------
            Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |          1        3.45        3.45
Apr 2017Mar 2018 |          3       10.34       13.79
Apr 2018Mar 2019 |          4       13.79       27.59
Apr 2019Mar 2020 |          6       20.69       48.28
Apr 2020Mar 2021 |          3       10.34       58.62
Apr 2021Mar 2022 |          4       13.79       72.41
Apr 2022Mar 2023 |          3       10.34       82.76
Apr 2023Mar 2024 |          2        6.90       89.66
Apr 2024Mar 2025 |          3       10.34      100.00
------------------+-----------------------------------
            Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2018Mar 2019 |          1       14.29       14.29
Apr 2019Mar 2020 |          1       14.29       28.57
Apr 2021Mar 2022 |          1       14.29       42.86
Apr 2022Mar 2023 |          4       57.14      100.00
------------------+-----------------------------------
            Total |          7      100.00


. 
. **Separate into 3-month time windows (for appt date)
. gen appt_3m = qofd(rheum_appt_date)
(355 missing values generated)

. format appt_3m %tq

. lab var appt_3m "Time period for appointment"

. tab appt_3m, missing

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q4 |          1        0.28        0.28
          . |        355       99.72      100.00
------------+-----------------------------------
      Total |        356      100.00

. bys eia_diagnosis: tab appt_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q4 |          1        0.35        0.35
          . |        288       99.65      100.00
------------+-----------------------------------
      Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
          . |         31      100.00      100.00
------------+-----------------------------------
      Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
          . |         29      100.00      100.00
------------+-----------------------------------
      Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
          . |          7      100.00      100.00
------------+-----------------------------------
      Total |          7      100.00


. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. gen appt_year = (floor((rheum_appt_date - date("$start_date", "DMY")) / 365.25) + 1) i
> f inrange(rheum_appt_date, date("$start_date", "DMY"), date("$end_date", "DMY"))
(355 missing values generated)

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. lab var appt_year "Year of appointment"

. local max_year = $end_year - $base_year

. forvalues i = 1/`max_year' {
  2.     local start = $base_year + `i' - 1
  3.     local end = `start' + 1
  4.     label define appt_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val appt_year appt_year_lbl

. tab appt_year, missing

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |          1        0.28        0.28
                . |        355       99.72      100.00
------------------+-----------------------------------
            Total |        356      100.00

. bys eia_diagnosis: tab appt_year, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |          1        0.35        0.35
                . |        288       99.65      100.00
------------------+-----------------------------------
            Total |        289      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
                . |         31      100.00      100.00
------------------+-----------------------------------
            Total |         31      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
                . |         29      100.00      100.00
------------------+-----------------------------------
            Total |         29      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
                . |          7      100.00      100.00
------------------+-----------------------------------
            Total |          7      100.00


. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. rename has_6m_follow_up has_6m_follow_up_s 

. gen has_6m_follow_up=1 if has_6m_follow_up_s=="T"
(355 missing values generated)

. recode has_6m_follow_up .=0
(355 changes made to has_6m_follow_up)

. drop has_6m_follow_up_s

. tab has_6m_follow_up

has_6m_foll |
      ow_up |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        355       99.72       99.72
          1 |          1        0.28      100.00
------------+-----------------------------------
      Total |        356      100.00

. rename has_12m_follow_up has_12m_follow_up_s 

. gen has_12m_follow_up=1 if has_12m_follow_up_s=="T"
(355 missing values generated)

. recode has_12m_follow_up .=0
(355 changes made to has_12m_follow_up)

. drop has_12m_follow_up_s

. tab has_12m_follow_up 

has_12m_fol |
     low_up |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        355       99.72       99.72
          1 |          1        0.28      100.00
------------+-----------------------------------
      Total |        356      100.00

. tab mo_year_diagn has_6m_follow_up

Month/Year |
        of |   has_6m_follow_up
 Diagnosis |         0          1 |     Total
-----------+----------------------+----------
  Apr-2016 |         1          0 |         1 
  May-2016 |         1          0 |         1 
  Jun-2016 |         5          0 |         5 
  Jul-2016 |         3          0 |         3 
  Aug-2016 |         2          0 |         2 
  Sep-2016 |         1          0 |         1 
  Oct-2016 |         7          0 |         7 
  Nov-2016 |         2          0 |         2 
  Dec-2016 |         2          0 |         2 
  Jan-2017 |         2          0 |         2 
  Feb-2017 |         2          0 |         2 
  Mar-2017 |         3          0 |         3 
  Apr-2017 |         1          0 |         1 
  May-2017 |         2          0 |         2 
  Jun-2017 |         4          0 |         4 
  Jul-2017 |         4          0 |         4 
  Aug-2017 |         5          0 |         5 
  Sep-2017 |         3          1 |         4 
  Oct-2017 |         1          0 |         1 
  Nov-2017 |         6          0 |         6 
  Dec-2017 |         2          0 |         2 
  Jan-2018 |         2          0 |         2 
  Feb-2018 |         6          0 |         6 
  Mar-2018 |         6          0 |         6 
  Apr-2018 |         4          0 |         4 
  May-2018 |         4          0 |         4 
  Jun-2018 |         2          0 |         2 
  Jul-2018 |         7          0 |         7 
  Aug-2018 |         4          0 |         4 
  Sep-2018 |         4          0 |         4 
  Oct-2018 |         4          0 |         4 
  Nov-2018 |         5          0 |         5 
  Dec-2018 |         4          0 |         4 
  Jan-2019 |         2          0 |         2 
  Feb-2019 |         4          0 |         4 
  Mar-2019 |         1          0 |         1 
  Apr-2019 |         6          0 |         6 
  May-2019 |         5          0 |         5 
  Jun-2019 |         5          0 |         5 
  Jul-2019 |         3          0 |         3 
  Aug-2019 |         3          0 |         3 
  Sep-2019 |         1          0 |         1 
  Oct-2019 |         3          0 |         3 
  Nov-2019 |         1          0 |         1 
  Dec-2019 |         4          0 |         4 
  Jan-2020 |         1          0 |         1 
  Feb-2020 |         9          0 |         9 
  Mar-2020 |         2          0 |         2 
  Apr-2020 |         1          0 |         1 
  May-2020 |         2          0 |         2 
  Jun-2020 |         6          0 |         6 
  Jul-2020 |         3          0 |         3 
  Aug-2020 |         2          0 |         2 
  Sep-2020 |         5          0 |         5 
  Oct-2020 |         5          0 |         5 
  Nov-2020 |         1          0 |         1 
  Dec-2020 |         5          0 |         5 
  Jan-2021 |         1          0 |         1 
  Feb-2021 |         3          0 |         3 
  Mar-2021 |         6          0 |         6 
  Apr-2021 |         2          0 |         2 
  May-2021 |         2          0 |         2 
  Jun-2021 |         5          0 |         5 
  Jul-2021 |         6          0 |         6 
  Aug-2021 |         2          0 |         2 
  Sep-2021 |         6          0 |         6 
  Oct-2021 |         6          0 |         6 
  Nov-2021 |         4          0 |         4 
  Dec-2021 |         7          0 |         7 
  Jan-2022 |         2          0 |         2 
  Feb-2022 |         3          0 |         3 
  Mar-2022 |         3          0 |         3 
  Apr-2022 |         1          0 |         1 
  May-2022 |         4          0 |         4 
  Jun-2022 |         2          0 |         2 
  Jul-2022 |         4          0 |         4 
  Sep-2022 |         2          0 |         2 
  Oct-2022 |         4          0 |         4 
  Nov-2022 |         1          0 |         1 
  Dec-2022 |         2          0 |         2 
  Jan-2023 |         3          0 |         3 
  Feb-2023 |         6          0 |         6 
  Mar-2023 |         4          0 |         4 
  Apr-2023 |         2          0 |         2 
  May-2023 |         2          0 |         2 
  Jun-2023 |         2          0 |         2 
  Aug-2023 |         3          0 |         3 
  Sep-2023 |         3          0 |         3 
  Oct-2023 |         5          0 |         5 
  Nov-2023 |         5          0 |         5 
  Dec-2023 |         4          0 |         4 
  Jan-2024 |         4          0 |         4 
  Feb-2024 |         4          0 |         4 
  Mar-2024 |         2          0 |         2 
  Apr-2024 |         5          0 |         5 
  May-2024 |         2          0 |         2 
  Jun-2024 |         6          0 |         6 
  Jul-2024 |         2          0 |         2 
  Aug-2024 |         2          0 |         2 
  Sep-2024 |         8          0 |         8 
  Oct-2024 |         2          0 |         2 
  Nov-2024 |         3          0 |         3 
  Dec-2024 |         2          0 |         2 
  Jan-2025 |         1          0 |         1 
  Feb-2025 |         1          0 |         1 
  Mar-2025 |         3          0 |         3 
-----------+----------------------+----------
     Total |       355          1 |       356 

. tab mo_year_diagn has_12m_follow_up

Month/Year |
        of |   has_12m_follow_up
 Diagnosis |         0          1 |     Total
-----------+----------------------+----------
  Apr-2016 |         1          0 |         1 
  May-2016 |         1          0 |         1 
  Jun-2016 |         5          0 |         5 
  Jul-2016 |         3          0 |         3 
  Aug-2016 |         2          0 |         2 
  Sep-2016 |         1          0 |         1 
  Oct-2016 |         7          0 |         7 
  Nov-2016 |         2          0 |         2 
  Dec-2016 |         2          0 |         2 
  Jan-2017 |         2          0 |         2 
  Feb-2017 |         2          0 |         2 
  Mar-2017 |         3          0 |         3 
  Apr-2017 |         1          0 |         1 
  May-2017 |         2          0 |         2 
  Jun-2017 |         4          0 |         4 
  Jul-2017 |         4          0 |         4 
  Aug-2017 |         5          0 |         5 
  Sep-2017 |         3          1 |         4 
  Oct-2017 |         1          0 |         1 
  Nov-2017 |         6          0 |         6 
  Dec-2017 |         2          0 |         2 
  Jan-2018 |         2          0 |         2 
  Feb-2018 |         6          0 |         6 
  Mar-2018 |         6          0 |         6 
  Apr-2018 |         4          0 |         4 
  May-2018 |         4          0 |         4 
  Jun-2018 |         2          0 |         2 
  Jul-2018 |         7          0 |         7 
  Aug-2018 |         4          0 |         4 
  Sep-2018 |         4          0 |         4 
  Oct-2018 |         4          0 |         4 
  Nov-2018 |         5          0 |         5 
  Dec-2018 |         4          0 |         4 
  Jan-2019 |         2          0 |         2 
  Feb-2019 |         4          0 |         4 
  Mar-2019 |         1          0 |         1 
  Apr-2019 |         6          0 |         6 
  May-2019 |         5          0 |         5 
  Jun-2019 |         5          0 |         5 
  Jul-2019 |         3          0 |         3 
  Aug-2019 |         3          0 |         3 
  Sep-2019 |         1          0 |         1 
  Oct-2019 |         3          0 |         3 
  Nov-2019 |         1          0 |         1 
  Dec-2019 |         4          0 |         4 
  Jan-2020 |         1          0 |         1 
  Feb-2020 |         9          0 |         9 
  Mar-2020 |         2          0 |         2 
  Apr-2020 |         1          0 |         1 
  May-2020 |         2          0 |         2 
  Jun-2020 |         6          0 |         6 
  Jul-2020 |         3          0 |         3 
  Aug-2020 |         2          0 |         2 
  Sep-2020 |         5          0 |         5 
  Oct-2020 |         5          0 |         5 
  Nov-2020 |         1          0 |         1 
  Dec-2020 |         5          0 |         5 
  Jan-2021 |         1          0 |         1 
  Feb-2021 |         3          0 |         3 
  Mar-2021 |         6          0 |         6 
  Apr-2021 |         2          0 |         2 
  May-2021 |         2          0 |         2 
  Jun-2021 |         5          0 |         5 
  Jul-2021 |         6          0 |         6 
  Aug-2021 |         2          0 |         2 
  Sep-2021 |         6          0 |         6 
  Oct-2021 |         6          0 |         6 
  Nov-2021 |         4          0 |         4 
  Dec-2021 |         7          0 |         7 
  Jan-2022 |         2          0 |         2 
  Feb-2022 |         3          0 |         3 
  Mar-2022 |         3          0 |         3 
  Apr-2022 |         1          0 |         1 
  May-2022 |         4          0 |         4 
  Jun-2022 |         2          0 |         2 
  Jul-2022 |         4          0 |         4 
  Sep-2022 |         2          0 |         2 
  Oct-2022 |         4          0 |         4 
  Nov-2022 |         1          0 |         1 
  Dec-2022 |         2          0 |         2 
  Jan-2023 |         3          0 |         3 
  Feb-2023 |         6          0 |         6 
  Mar-2023 |         4          0 |         4 
  Apr-2023 |         2          0 |         2 
  May-2023 |         2          0 |         2 
  Jun-2023 |         2          0 |         2 
  Aug-2023 |         3          0 |         3 
  Sep-2023 |         3          0 |         3 
  Oct-2023 |         5          0 |         5 
  Nov-2023 |         5          0 |         5 
  Dec-2023 |         4          0 |         4 
  Jan-2024 |         4          0 |         4 
  Feb-2024 |         4          0 |         4 
  Mar-2024 |         2          0 |         2 
  Apr-2024 |         5          0 |         5 
  May-2024 |         2          0 |         2 
  Jun-2024 |         6          0 |         6 
  Jul-2024 |         2          0 |         2 
  Aug-2024 |         2          0 |         2 
  Sep-2024 |         8          0 |         8 
  Oct-2024 |         2          0 |         2 
  Nov-2024 |         3          0 |         3 
  Dec-2024 |         2          0 |         2 
  Jan-2025 |         1          0 |         1 
  Feb-2025 |         1          0 |         1 
  Mar-2025 |         3          0 |         3 
-----------+----------------------+----------
     Total |       355          1 |       356 

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before EIA code appeared in GP recor
> d; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        355       99.72       99.72
        Yes |          1        0.28      100.00
------------+-----------------------------------
      Total |        356      100.00

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. tab rheum_appt mo_year_diagn, missing //proportion of patients with an rheum outpatien
> t date (with first attendance option selected) in the 12 months before EIA code appear
> ed in GP record; data only April 2019 onwards
too many values
r(134);

end of do-file

r(134);

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. tab mo_year_diagn rheum_appt, missing //proportion of patients with an rheum outpatien
> t date (with first attendance option selected) in the 12 months before EIA code appear
> ed in GP record; data only April 2019 onwards

Month/Year |     Rheumatology
        of |      appointment
 Diagnosis |        No        Yes |     Total
-----------+----------------------+----------
  Apr-2016 |         1          0 |         1 
  May-2016 |         1          0 |         1 
  Jun-2016 |         5          0 |         5 
  Jul-2016 |         3          0 |         3 
  Aug-2016 |         2          0 |         2 
  Sep-2016 |         1          0 |         1 
  Oct-2016 |         7          0 |         7 
  Nov-2016 |         2          0 |         2 
  Dec-2016 |         2          0 |         2 
  Jan-2017 |         2          0 |         2 
  Feb-2017 |         2          0 |         2 
  Mar-2017 |         3          0 |         3 
  Apr-2017 |         1          0 |         1 
  May-2017 |         2          0 |         2 
  Jun-2017 |         4          0 |         4 
  Jul-2017 |         4          0 |         4 
  Aug-2017 |         5          0 |         5 
  Sep-2017 |         3          1 |         4 
  Oct-2017 |         1          0 |         1 
  Nov-2017 |         6          0 |         6 
  Dec-2017 |         2          0 |         2 
  Jan-2018 |         2          0 |         2 
  Feb-2018 |         6          0 |         6 
  Mar-2018 |         6          0 |         6 
  Apr-2018 |         4          0 |         4 
  May-2018 |         4          0 |         4 
  Jun-2018 |         2          0 |         2 
  Jul-2018 |         7          0 |         7 
  Aug-2018 |         4          0 |         4 
  Sep-2018 |         4          0 |         4 
  Oct-2018 |         4          0 |         4 
  Nov-2018 |         5          0 |         5 
  Dec-2018 |         4          0 |         4 
  Jan-2019 |         2          0 |         2 
  Feb-2019 |         4          0 |         4 
  Mar-2019 |         1          0 |         1 
  Apr-2019 |         6          0 |         6 
  May-2019 |         5          0 |         5 
  Jun-2019 |         5          0 |         5 
  Jul-2019 |         3          0 |         3 
  Aug-2019 |         3          0 |         3 
  Sep-2019 |         1          0 |         1 
  Oct-2019 |         3          0 |         3 
  Nov-2019 |         1          0 |         1 
  Dec-2019 |         4          0 |         4 
  Jan-2020 |         1          0 |         1 
  Feb-2020 |         9          0 |         9 
  Mar-2020 |         2          0 |         2 
  Apr-2020 |         1          0 |         1 
  May-2020 |         2          0 |         2 
  Jun-2020 |         6          0 |         6 
  Jul-2020 |         3          0 |         3 
  Aug-2020 |         2          0 |         2 
  Sep-2020 |         5          0 |         5 
  Oct-2020 |         5          0 |         5 
  Nov-2020 |         1          0 |         1 
  Dec-2020 |         5          0 |         5 
  Jan-2021 |         1          0 |         1 
  Feb-2021 |         3          0 |         3 
  Mar-2021 |         6          0 |         6 
  Apr-2021 |         2          0 |         2 
  May-2021 |         2          0 |         2 
  Jun-2021 |         5          0 |         5 
  Jul-2021 |         6          0 |         6 
  Aug-2021 |         2          0 |         2 
  Sep-2021 |         6          0 |         6 
  Oct-2021 |         6          0 |         6 
  Nov-2021 |         4          0 |         4 
  Dec-2021 |         7          0 |         7 
  Jan-2022 |         2          0 |         2 
  Feb-2022 |         3          0 |         3 
  Mar-2022 |         3          0 |         3 
  Apr-2022 |         1          0 |         1 
  May-2022 |         4          0 |         4 
  Jun-2022 |         2          0 |         2 
  Jul-2022 |         4          0 |         4 
  Sep-2022 |         2          0 |         2 
  Oct-2022 |         4          0 |         4 
  Nov-2022 |         1          0 |         1 
  Dec-2022 |         2          0 |         2 
  Jan-2023 |         3          0 |         3 
  Feb-2023 |         6          0 |         6 
  Mar-2023 |         4          0 |         4 
  Apr-2023 |         2          0 |         2 
  May-2023 |         2          0 |         2 
  Jun-2023 |         2          0 |         2 
  Aug-2023 |         3          0 |         3 
  Sep-2023 |         3          0 |         3 
  Oct-2023 |         5          0 |         5 
  Nov-2023 |         5          0 |         5 
  Dec-2023 |         4          0 |         4 
  Jan-2024 |         4          0 |         4 
  Feb-2024 |         4          0 |         4 
  Mar-2024 |         2          0 |         2 
  Apr-2024 |         5          0 |         5 
  May-2024 |         2          0 |         2 
  Jun-2024 |         6          0 |         6 
  Jul-2024 |         2          0 |         2 
  Aug-2024 |         2          0 |         2 
  Sep-2024 |         8          0 |         8 
  Oct-2024 |         2          0 |         2 
  Nov-2024 |         3          0 |         3 
  Dec-2024 |         2          0 |         2 
  Jan-2025 |         1          0 |         1 
  Feb-2025 |         1          0 |         1 
  Mar-2025 |         3          0 |         3 
-----------+----------------------+----------
     Total |       355          1 |       356 

. 
end of do-file

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. import delimited "$projectdir/output/dataset.csv", clear
(encoding automatically selected: ISO-8859-1)
(88 vars, 427 obs)

. 
. **Set Ado file path
. adopath + "$projectdir/analysis/extra_ados"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\documents/"
  [5]  (PLUS)      "C:\users\PUBLIC\documents/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/an
> alysis/extra_ados"
  [8]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory
> _rheum/analysis/extra_ados"

. 
. **Set index dates ===========================================================*/
. global year_preceding = "01/04/2015"

. global start_date = "01/04/2016" //for outpatient analyses, data may only be available
>  from April 2019

. global end_date = "31/03/2025"

. global base_year = year(date("$start_date", "DMY"))

. global end_year = year(date("$end_date", "DMY"))

. global max_year = $end_year - $base_year

. 
. **Conversion for dates====================================================*
. ***Variables ending in _date that are string
. ds *_date, has(type string)
eia_code_d~e  cva_before~e  chd_after_~e  depr_after~e  rheum~3_date  hydroxychl~e
ra_code_date  lung_ca_be~e  dm_after_d~e  osteop_aft~e  rheum~4_date  rtt_cl_sta~e
psa_code_d~e  solid_ca_b~e  ild_after_~e  dem_after_~e  rheum~e_date  rtt_cl_ref~e
anksp_code~e  haem_ca_be~e  copd_after~e  creatinin~te  ~erheum_date  rtt_cl_end~e
undiff_cod~e  ckd_before~e  cva_after_~e  rf_date       l~ecode_date  rtt_op_sta~e
chd_before~e  depr_befor~e  lung_ca_af~e  r~_appt_date  leflunomid~e  rtt_op_ref~e
dm_before_~e  osteop_bef~e  solid_ca_a~e  rheum~f_date  metho~e_date  rtt_op_end~e
ild_before~e  frac_befor~e  haem_ca_af~e  rheum~y_date  metho~j_date
copd_befor~e  dem_before~e  ckd_after_~e  rheum~2_date  sulfasalaz~e

. local string_dates `r(varlist)'

. foreach var of local string_dates {
  2.     gen `var'_num = date(`var', "YMD")
  3.     format `var'_num %td
  4.     order `var'_num, after(`var')
  5.     drop `var'
  6.     rename `var'_num `var'
  7. }
(88 missing values generated)
(387 missing values generated)
(390 missing values generated)
(416 missing values generated)
(354 missing values generated)
(385 missing values generated)
(353 missing values generated)
(414 missing values generated)
(371 missing values generated)
(335 missing values generated)
(44 missing values generated)
(240 missing values generated)
(337 missing values generated)
(404 missing values generated)
(422 missing values generated)
(425 missing values generated)
(348 missing values generated)
(416 missing values generated)
(425 missing values generated)
(421 missing values generated)
(425 missing values generated)
(418 missing values generated)
(417 missing values generated)
(294 missing values generated)
(395 missing values generated)
(418 missing values generated)
(421 missing values generated)
(425 missing values generated)
(416 missing values generated)
(424 missing values generated)
(425 missing values generated)
(422 missing values generated)
(422 missing values generated)
(410 missing values generated)
(418 missing values generated)
(404 missing values generated)
(390 missing values generated)
(426 missing values generated)
(426 missing values generated)
(394 missing values generated)
(312 missing values generated)
(239 missing values generated)
(160 missing values generated)
(296 missing values generated)
(254 missing values generated)
(406 missing values generated)
(406 missing values generated)
(406 missing values generated)
(414 missing values generated)
(414 missing values generated)
(414 missing values generated)

. 
. ***Variables ending in _date that are numeric
. foreach var of varlist *_date {
  2.     capture confirm string variable `var'
  3.     if _rc != 0 {
  4.         format `var' %td
  5.     }
  6. }

. 
. ***Create binary indicator for each
. ds *_date
eia_code_d~e  lung_ca_be~e  ild_after_~e  dem_after_~e  r~eappt_date  hydroxychl~e
ra_code_date  solid_ca_b~e  copd_after~e  creatinin~te  rheum~e_date  rtt_cl_sta~e
psa_code_d~e  haem_ca_be~e  cva_after_~e  rf_date       ~erheum_date  rtt_cl_ref~e
anksp_code~e  ckd_before~e  lung_ca_af~e  bmi_date      l~ecode_date  rtt_cl_end~e
undiff_cod~e  depr_befor~e  solid_ca_a~e  r~_appt_date  ~frheum_date  rtt_op_sta~e
chd_before~e  osteop_bef~e  haem_ca_af~e  rheum~f_date  l~fcode_date  rtt_op_ref~e
dm_before_~e  frac_befor~e  ckd_after_~e  rheum~y_date  leflunomid~e  rtt_op_end~e
ild_before~e  dem_before~e  depr_after~e  rheum~2_date  metho~e_date
copd_befor~e  chd_after_~e  osteop_aft~e  rheum~3_date  metho~j_date
cva_before~e  dm_after_d~e  frac_after~e  rheum~4_date  sulfasalaz~e

. local dates `r(varlist)'

. foreach var of local dates {
  2.         local newvar =  substr("`var'", 1, length("`var'") - 5)
  3.         gen `newvar' = (`var'!=. )
  4.         order `newvar', after(`var')
  5. }

. 
. /*
> **Will also need to amend conversion for biologic dates ==============================
> ======================*
> ***Some dates are given with month/year only, so adding day 15 to enable them to be pr
> ocessed as dates 
> 
> foreach var of varlist   abatacept_date                                         ///
>                                                  adalimumab_date                      
>                   ///     
>                                                  baricitinib_date                     
>                   ///
>                                                  certolizumab_date                    
>                   ///
>                                                  etanercept_date                      
>                   ///
>                                                  golimumab_date                       
>                   ///
>                                                  guselkumab_date                      
>                   ///     
>                                                  infliximab_date                      
>                   ///
>                                                  ixekizumab_date                      
>                   ///
>                                                  methotrexate_hcd_date                
>           ///
>                                                  rituximab_date                       
>                   ///
>                                                  sarilumab_date                       
>                   ///
>                                                  secukinumab_date                     
>                   ///     
>                                                  tocilizumab_date                     
>                   ///
>                                                  tofacitinib_date                     
>                   ///
>                                                  upadacitinib_date                    
>                   ///
>                                                  ustekinumab_date                     
>                   ///
>                                                  {
>                                                         
>                 capture confirm string variable `var'
>                 if _rc!=0 {
>                         assert `var'==.
>                         rename `var' `var'_date
>                 }
>         
>                 else {
>                                 replace `var' = `var' + "-15"
>                                 rename `var' `var'_dstr
>                                 replace `var'_dstr = " " if `var'_dstr == "-15"
>                                 gen `var'_date = date(`var'_dstr, "YMD") 
>                                 order `var'_date, after(`var'_dstr)
>                                 drop `var'_dstr
>                 }
>         
>         format `var'_date %td
> }
> */
.                                          
. **Create and label variables =========================================================
> ==*/
. 
. ***Age variables
. *Create categorised age
. drop if age<18 & age !=.
(0 observations deleted)

. drop if age>109 & age !=.
(5 observations deleted)

. drop if age==.
(0 observations deleted)

. lab var age "Age at diagnosis"

. 
. recode age 18/39.9999 = 1 /// 
>            40/49.9999 = 2 ///
>                    50/59.9999 = 3 ///
>                60/69.9999 = 4 ///
>                    70/79.9999 = 5 ///
>                    80/max = 6, gen(agegroup) 
(422 differences between age and agegroup)

. 
. label define agegroup   1 "18-39" ///
>                                                 2 "40-49" ///
>                                                 3 "50-59" ///
>                                                 4 "60-69" ///
>                                                 5 "70-79" ///
>                                                 6 "80+"

.                                                 
. label values agegroup agegroup

. lab var agegroup "Age group"

. tab agegroup, missing

  Age group |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-39 |        187       44.31       44.31
      40-49 |         58       13.74       58.06
      50-59 |         37        8.77       66.82
      60-69 |         30        7.11       73.93
      70-79 |         37        8.77       82.70
        80+ |         73       17.30      100.00
------------+-----------------------------------
      Total |        422      100.00

. order agegroup, after(age)

. 
. ***Sex
. gen male = 1 if sex == "male"
(220 missing values generated)

. replace male = 0 if sex == "female"
(220 real changes made)

. lab var male "Male"

. lab define male 0 "No" 1 "Yes", modify

. lab val male male

. tab male, missing

       Male |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        220       52.13       52.13
        Yes |        202       47.87      100.00
------------+-----------------------------------
      Total |        422      100.00

. order male, after(sex)

. 
. ***Ethnicity
. gen ethnicity_n = 1 if ethnicity == "White"
(394 missing values generated)

. replace ethnicity_n = 2 if ethnicity == "Asian or Asian British"
(20 real changes made)

. replace ethnicity_n = 3 if ethnicity == "Black or Black British"
(31 real changes made)

. replace ethnicity_n = 4 if ethnicity == "Mixed"
(13 real changes made)

. replace ethnicity_n = 5 if ethnicity == "Chinese or Other Ethnic Groups"
(31 real changes made)

. replace ethnicity_n = 6 if ethnicity == "Unknown"
(299 real changes made)

. 
. 
. label define ethnicity_n        1 "White"                                             
>   ///
>                                                         2 "Asian or Asian British"    
>           ///
>                                                         3 "Black or Black British"    
>   ///
>                                                         4 "Mixed"                     
>                           ///
>                                                         5 "Chinese or Other Ethnic Gro
> ups" ///
>                                                         6 "Not known", modify

.                                                         
. label values ethnicity_n ethnicity_n

. lab var ethnicity_n "Ethnicity"

. tab ethnicity_n, missing

                     Ethnicity |      Freq.     Percent        Cum.
-------------------------------+-----------------------------------
                         White |         28        6.64        6.64
        Asian or Asian British |         20        4.74       11.37
        Black or Black British |         31        7.35       18.72
                         Mixed |         13        3.08       21.80
Chinese or Other Ethnic Groups |         31        7.35       29.15
                     Not known |        299       70.85      100.00
-------------------------------+-----------------------------------
                         Total |        422      100.00

. drop ethnicity

. rename ethnicity_n ethnicity 

. 
. ***Practice regions
. encode region, gen(nuts_region)

. tab region, missing

                  region |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
                         |         96       22.75       22.75
                    East |         47       11.14       33.89
           East Midlands |         27        6.40       40.28
                  London |         34        8.06       48.34
              North East |         34        8.06       56.40
              North West |         31        7.35       63.74
              South East |         35        8.29       72.04
              South West |         40        9.48       81.52
           West Midlands |         40        9.48       91.00
Yorkshire and The Humber |         38        9.00      100.00
-------------------------+-----------------------------------
                   Total |        422      100.00

. replace region="Not known" if region==""
(96 real changes made)

. gen region_nospace=region

. replace region_nospace="SouthWest" if region=="South West"
(40 real changes made)

. replace region_nospace="EastMidlands" if region=="East Midlands"
(27 real changes made)

. replace region_nospace="East" if region=="East"
(0 real changes made)

. replace region_nospace="London" if region=="London"
(0 real changes made)

. replace region_nospace="NorthEast" if region=="North East"
(34 real changes made)

. replace region_nospace="NorthWest" if region=="North West"
(31 real changes made)

. replace region_nospace="SouthEast" if region=="South East"
(35 real changes made)

. replace region_nospace="WestMidlands" if region=="West Midlands"
(40 real changes made)

. replace region_nospace="YorkshireandTheHumber" if region=="Yorkshire and The Humber"
(38 real changes made)

. 
. ***IMD
. gen imd = 1 if imd_quintile == "1 (most deprived)"
(351 missing values generated)

. replace imd = 2 if imd_quintile == "2"
(68 real changes made)

. replace imd = 3 if imd_quintile == "3"
(64 real changes made)

. replace imd = 4 if imd_quintile == "4"
(63 real changes made)

. replace imd = 5 if imd_quintile == "5 (least deprived)"
(58 real changes made)

. replace imd = .u if imd_quintile == "Unknown"
(98 real changes made, 98 to missing)

. lab var imd "Index of multiple deprivation"

. lab define imd 1 "1 (most deprived)" ///
>                            2 "2" ///
>                            3 "3" ///
>                            4 "4" ///
>                            5 "5 (least deprived)" ///
>                            .u "Not known"

. lab val imd imd                    

. tab imd, missing

 Index of multiple |
       deprivation |      Freq.     Percent        Cum.
-------------------+-----------------------------------
 1 (most deprived) |         71       16.82       16.82
                 2 |         68       16.11       32.94
                 3 |         64       15.17       48.10
                 4 |         63       14.93       63.03
5 (least deprived) |         58       13.74       76.78
         Not known |         98       23.22      100.00
-------------------+-----------------------------------
             Total |        422      100.00

. drop imd_quintile

. 
. ***Body Mass Index
. *Recode strange values 
. replace bmi_value = . if bmi_value == 0 
(0 real changes made)

. replace bmi_value = . if !inrange(bmi_value, 10, 80)
(0 real changes made)

. 
. *Restrict to within 10 years of EIA diagnosis date and aged>16 
. gen bmi_time = (eia_code_date - bmi_date)/365.25
(422 missing values generated)

. gen bmi_age = age - bmi_time
(422 missing values generated)

. replace bmi_value = . if bmi_age < 16 
(0 real changes made)

. replace bmi_value = . if bmi_time > 10 & bmi_time != . 
(0 real changes made)

. 
. *Set to missing if no date, and vice versa 
. replace bmi_value = . if bmi_date == . 
(0 real changes made)

. replace bmi_date = . if bmi_value == . 
(0 real changes made)

. replace bmi_time = . if bmi_value == . 
(0 real changes made)

. replace bmi_age = . if bmi_value == . 
(0 real changes made)

. 
. *Create BMI categories
. gen     bmicat = .
(422 missing values generated)

. recode  bmicat . = 1 if bmi_value < 18.5
(0 changes made to bmicat)

. recode  bmicat . = 2 if bmi_value < 25
(0 changes made to bmicat)

. recode  bmicat . = 3 if bmi_value < 30
(0 changes made to bmicat)

. recode  bmicat . = 4 if bmi_value < 35
(0 changes made to bmicat)

. recode  bmicat . = 5 if bmi_value < 40
(0 changes made to bmicat)

. recode  bmicat . = 6 if bmi_value < .
(0 changes made to bmicat)

. replace bmicat = .u if bmi_value >= .
(422 real changes made, 422 to missing)

. 
. label define bmicat 1 "Underweight (<18.5)"     ///
>                                         2 "Normal (18.5-24.9)"          ///
>                                         3 "Overweight (25-29.9)"        ///
>                                         4 "Obese I (30-34.9)"           ///
>                                         5 "Obese II (35-39.9)"          ///
>                                         6 "Obese III (40+)"                     ///
>                                         .u "Not known"

.                                         
. label values bmicat bmicat

. lab var bmicat "BMI"

. tab bmicat, missing

                 BMI |      Freq.     Percent        Cum.
---------------------+-----------------------------------
           Not known |        422      100.00      100.00
---------------------+-----------------------------------
               Total |        422      100.00

. order bmicat, after (bmi_value)

. drop bmi_age bmi_time

. 
. *Create less granular categorisation
. recode bmicat 1/3 .u = 1 4 = 2 5 = 3 6 = 4, gen(obese4cat)
(422 differences between bmicat and obese4cat)

. 
. label define obese4cat  1 "No record of obesity"        ///
>                                                 2 "Obese I (30-34.9)"           ///
>                                                 3 "Obese II (35-39.9)"          ///
>                                                 4 "Obese III (40+)"             

. 
. label values obese4cat obese4cat

. order obese4cat, after(bmicat)

. 
. ***Smoking 
. label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Not known"

. 
. gen     smoke = 1  if smoking_status == "N"
(421 missing values generated)

. replace smoke = 2  if smoking_status == "E"
(163 real changes made)

. replace smoke = 3  if smoking_status == "S"
(257 real changes made)

. replace smoke = .u if smoking_status == "M"
(1 real change made, 1 to missing)

. replace smoke = .u if smoking_status == "" 
(0 real changes made)

. 
. label values smoke smoke

. lab var smoke "Smoking status"

. drop smoking_status

. tab smoke, missing

    Smoking |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
      Never |          1        0.24        0.24
     Former |        163       38.63       38.86
    Current |        257       60.90       99.76
  Not known |          1        0.24      100.00
------------+-----------------------------------
      Total |        422      100.00

. 
. *Create non-missing 3-category variable for current smoking (assumes missing smoking i
> s never smoking)
. recode smoke .u = 1, gen(smoke_nomiss)
(1 differences between smoke and smoke_nomiss)

. order smoke_nomiss, after(smoke)

. label values smoke_nomiss smoke

. 
. **Clinical comorbidities
. ***Nb. not using creatinine of HBA1c values for now, just codes
. foreach disease in ckd dm ild copd cva lung_ca solid_ca haem_ca depr osteop frac dem c
> hd {
  2.         label define `disease'_before 0 "No" 1 "Yes"
  3.         label values `disease'_before `disease'_before
  4.         tab `disease'_before, missing
  5.         label define `disease'_after 0 "No" 1 "Yes"
  6.         label values `disease'_after `disease'_after
  7.         tab `disease'_after, missing
  8.         gen `disease'_new = 1 if (`disease'_after == 1 & `disease'_before == 0)
  9.         recode `disease'_new .=0
 10.         label define `disease'_new 0 "No" 1 "Yes"
 11.         label values `disease'_new `disease'_new
 12.         tab `disease'_new, missing
 13.         order `disease'_new, after(`disease'_after)
 14. }

 ckd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        333       78.91       78.91
        Yes |         89       21.09      100.00
------------+-----------------------------------
      Total |        422      100.00

  ckd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        413       97.87       97.87
        Yes |          9        2.13      100.00
------------+-----------------------------------
      Total |        422      100.00
(417 missing values generated)
(417 changes made to ckd_new)

    ckd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        417       98.82       98.82
        Yes |          5        1.18      100.00
------------+-----------------------------------
      Total |        422      100.00

  dm_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        381       90.28       90.28
        Yes |         41        9.72      100.00
------------+-----------------------------------
      Total |        422      100.00

   dm_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00
(420 missing values generated)
(420 changes made to dm_new)

     dm_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00

 ild_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        349       82.70       82.70
        Yes |         73       17.30      100.00
------------+-----------------------------------
      Total |        422      100.00

  ild_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        416       98.58       98.58
        Yes |          6        1.42      100.00
------------+-----------------------------------
      Total |        422      100.00
(419 missing values generated)
(419 changes made to ild_new)

    ild_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        419       99.29       99.29
        Yes |          3        0.71      100.00
------------+-----------------------------------
      Total |        422      100.00

copd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        409       96.92       96.92
        Yes |         13        3.08      100.00
------------+-----------------------------------
      Total |        422      100.00

 copd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00
(420 missing values generated)
(420 changes made to copd_new)

   copd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00

 cva_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        367       86.97       86.97
        Yes |         55       13.03      100.00
------------+-----------------------------------
      Total |        422      100.00

  cva_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        413       97.87       97.87
        Yes |          9        2.13      100.00
------------+-----------------------------------
      Total |        422      100.00
(413 missing values generated)
(413 changes made to cva_new)

    cva_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        413       97.87       97.87
        Yes |          9        2.13      100.00
------------+-----------------------------------
      Total |        422      100.00

lung_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        330       78.20       78.20
        Yes |         92       21.80      100.00
------------+-----------------------------------
      Total |        422      100.00

lung_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        412       97.63       97.63
        Yes |         10        2.37      100.00
------------+-----------------------------------
      Total |        422      100.00
(412 missing values generated)
(412 changes made to lung_ca_new)

lung_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        412       97.63       97.63
        Yes |         10        2.37      100.00
------------+-----------------------------------
      Total |        422      100.00

solid_ca_be |
       fore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |         42        9.95        9.95
        Yes |        380       90.05      100.00
------------+-----------------------------------
      Total |        422      100.00

solid_ca_af |
        ter |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        290       68.72       68.72
        Yes |        132       31.28      100.00
------------+-----------------------------------
      Total |        422      100.00
(417 missing values generated)
(417 changes made to solid_ca_new)

solid_ca_ne |
          w |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        417       98.82       98.82
        Yes |          5        1.18      100.00
------------+-----------------------------------
      Total |        422      100.00

haem_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        235       55.69       55.69
        Yes |        187       44.31      100.00
------------+-----------------------------------
      Total |        422      100.00

haem_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        390       92.42       92.42
        Yes |         32        7.58      100.00
------------+-----------------------------------
      Total |        422      100.00
(407 missing values generated)
(407 changes made to haem_ca_new)

haem_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        407       96.45       96.45
        Yes |         15        3.55      100.00
------------+-----------------------------------
      Total |        422      100.00

depr_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        399       94.55       94.55
        Yes |         23        5.45      100.00
------------+-----------------------------------
      Total |        422      100.00

 depr_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        416       98.58       98.58
        Yes |          6        1.42      100.00
------------+-----------------------------------
      Total |        422      100.00
(416 missing values generated)
(416 changes made to depr_new)

   depr_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        416       98.58       98.58
        Yes |          6        1.42      100.00
------------+-----------------------------------
      Total |        422      100.00

osteop_befo |
         re |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        417       98.82       98.82
        Yes |          5        1.18      100.00
------------+-----------------------------------
      Total |        422      100.00

osteop_afte |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00
(420 missing values generated)
(420 changes made to osteop_new)

 osteop_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00

frac_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00

 frac_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        422      100.00      100.00
------------+-----------------------------------
      Total |        422      100.00
(422 missing values generated)
(422 changes made to frac_new)

   frac_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        422      100.00      100.00
------------+-----------------------------------
      Total |        422      100.00

 dem_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        344       81.52       81.52
        Yes |         78       18.48      100.00
------------+-----------------------------------
      Total |        422      100.00

  dem_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        411       97.39       97.39
        Yes |         11        2.61      100.00
------------+-----------------------------------
      Total |        422      100.00
(413 missing values generated)
(413 changes made to dem_new)

    dem_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        413       97.87       97.87
        Yes |          9        2.13      100.00
------------+-----------------------------------
      Total |        422      100.00

 chd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        350       82.94       82.94
        Yes |         72       17.06      100.00
------------+-----------------------------------
      Total |        422      100.00

  chd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        411       97.39       97.39
        Yes |         11        2.61      100.00
------------+-----------------------------------
      Total |        422      100.00
(413 missing values generated)
(413 changes made to chd_new)

    chd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        413       97.87       97.87
        Yes |          9        2.13      100.00
------------+-----------------------------------
      Total |        422      100.00

. 
. lab var ckd_before "Chronic kidney disease"

. lab var ckd_after "Chronic kidney disease"

. lab var ckd_new "Chronic kidney disease"

. lab var dm_before "Type 2 diabetes mellitus"

. lab var dm_after "Type 2 diabetes mellitus"

. lab var dm_new "Type 2 diabetes mellitus"

. lab var ild_before "Interstitial lung disease"

. lab var ild_after "Interstitial lung disease"

. lab var ild_new "Interstitial lung disease"

. lab var copd_before "COPD"

. lab var copd_after "COPD"

. lab var copd_new "COPD"

. lab var lung_ca_before "Lung cancer"

. lab var lung_ca_after "Lung cancer"

. lab var lung_ca_new "Lung cancer"

. lab var solid_ca_before "Solid organ cancer"

. lab var solid_ca_after "Solid organ cancer"

. lab var solid_ca_new "Solid organ cancer"

. lab var haem_ca_before "Haematological cancer"

. lab var haem_ca_after "Haematological cancer"

. lab var haem_ca_new "Haematological cancer"

. lab var depr_before "Depression"

. lab var depr_after "Depression"

. lab var depr_new "Depression"

. lab var osteop_before "Osteoporosis"

. lab var osteop_after "Osteoporosis"

. lab var osteop_new "Osteoporosis"

. lab var frac_before "Fragility fracture"

. lab var frac_after "Fragility fracture"

. lab var frac_new "Fragility fracture"

. lab var dem_before "Dementia"

. lab var dem_after "Dementia"

. lab var dem_new "Dementia"

. lab var chd_before "Coronary heart disease"

. lab var chd_after "Coronary heart disease"

. lab var chd_new "Coronary heart disease"

. 
. lab var rheum_appt "Rheumatology appointment"

. lab define rheum_appt 0 "No" 1 "Yes", modify

. lab val rheum_appt rheum_appt

. 
. **All patients should have diagnostic code============================================
> =================*/
. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        422      100.00      100.00
------------+-----------------------------------
      Total |        422      100.00

. keep if eia_code==1
(0 observations deleted)

. 
. **Check first rheum appt date was before diagnostic code date=========================
> =========*/
. 
. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before EIA code appeared in GP recor
> d; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        417       98.82       98.82
        Yes |          5        1.18      100.00
------------+-----------------------------------
      Total |        422      100.00

. tab rheum_appt if rheum_appt_date>eia_code_date & rheum_appt_date!=. //confirm proport
> ion who had first rheum appt (i.e. not missing) after EIA code

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |          1      100.00      100.00
------------+-----------------------------------
      Total |          1      100.00

. tab rheum_appt if rheum_appt_date>(eia_code_date + 30) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 30 days after EIA code 

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |          1      100.00      100.00
------------+-----------------------------------
      Total |          1      100.00

. tab rheum_appt if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 60 days after EIA code - should be none
no observations

. replace rheum_appt=0 if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //re
> place as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. replace rheum_appt_date=. if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=.
>  //replace as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. 
. **As above - for differently specified rheumatology appointments
. replace rheum_appt_any=0 if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt_any_
> date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt_any_date=. if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt
> _any_date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2=0 if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2_date=. if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date
> !=. //replace as missing those appts >60 days after EIA code_yea
(0 real changes made)

. replace rheum_appt3=0 if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt3_date=. if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date
> !=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt4=0 if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date!=. /
> /replace as missing those appts >60 days after EIA code
(14 real changes made)

. replace rheum_appt4_date=. if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date
> !=. //replace as missing those appts >60 days after EIA code
(14 real changes made, 14 to missing)

. 
. *Check if first csDMARD/biologic was after rheum appt date============================
> =========================*/
. **csDMARDs (not including high cost MTX; wouldn't be shared care)
. gen csdmard=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methotrexa
> te_inj==1 | sulfasalazine==1
(83 missing values generated)

. recode csdmard .=0 
(83 changes made to csdmard)

. tab csdmard, missing

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |         83       19.67       19.67
          1 |        339       80.33      100.00
------------+-----------------------------------
      Total |        422      100.00

. 
. **Date of first csDMARD script (not including high cost MTX prescriptions)
. gen csdmard_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date, met
> hotrexate_inj_date, sulfasalazine_date)
(83 missing values generated)

. format %td csdmard_date

. 
. /*
> **csDMARDs (including high cost MTX)
> gen csdmard_hcd=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methot
> rexate_inj==1 | methotrexate_hcd==1 | sulfasalazine==1
> recode csdmard_hcd .=0 
> tab csdmard_hcd, missing
> 
> **Date of first csDMARD script (including high cost MTX prescriptions)
> gen csdmard_hcd_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date,
>  methotrexate_inj_date, methotrexate_hcd_date, sulfasalazine_date)
> format %td csdmard_hcd_date
> 
> **Biologic use
> gen biologic=1 if abatacept==1 | adalimumab==1 | baricitinib==1 | certolizumab==1 | et
> anercept==1 | golimumab==1 | guselkumab==1 | infliximab==1 | ixekizumab==1 | rituximab
> ==1 | sarilumab==1 | secukinumab==1 | tocilizumab==1 | tofacitinib==1 | upadacitinib==
> 1 | ustekinumab==1 
> recode biologic .=0
> tab biologic, missing
> 
> **Date of first biologic script
> gen biologic_date=min(abatacept_date, adalimumab_date, baricitinib_date, certolizumab_
> date, etanercept_date, golimumab_date, guselkumab_date, infliximab_date, ixekizumab_da
> te, rituximab_date, sarilumab_date, secukinumab_date, tocilizumab_date, tofacitinib_da
> te, upadacitinib_date, ustekinumab_date)
> format %td biologic_date
> */
. 
. **Exclude if first csdmard was more than 60 days before first rheum appt
. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & csdmard_date<rheum_appt_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          2      100.00      100.00
------------+-----------------------------------
      Total |          2      100.00

. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_d
> ate 

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          2      100.00      100.00
------------+-----------------------------------
      Total |          2      100.00

. drop if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_date //d
> rop if first csDMARD more than 60 days before first attendance at a rheum appt 
(2 observations deleted)

. tab csdmard if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmar
> d_date + 60)<rheum_appt_any_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         10      100.00      100.00
------------+-----------------------------------
      Total |         10      100.00

. drop if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmard_date 
> + 60)<rheum_appt_any_date //drop if first csDMARD more than 60 days before first captu
> red rheum appt that did not have first attendance tag
(10 observations deleted)

. 
. /*
> tab biologic if rheum_appt_date!=. & biologic_date!=. & biologic_date<rheum_appt_date 
> tab biologic if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_app
> t_date 
> drop if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_appt_date /
> /drop if first biologic more than 60 days before first rheum_appt_date
> tab biologic if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biol
> ogic_date + 60)<rheum_appt_any_date
> drop if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biologic_dat
> e + 60)<rheum_appt_any_date //drop if first biologic more than 60 days before first ca
> ptured rheum appt that did not have first attendance tag
> */
. 
. *Generate diagnosis date==============================================================
> =*/
. 
. **Use diagnostic code date (in GP record) as diagnosis date
. gen diagnosis_date=eia_code_date

. format diagnosis_date %td

. 
. *Refine diagnostic window=============================================================
> */
. 
. **Keep patients with diagnosis date after start date and before end date - should be n
> one dropped
. keep if diagnosis_date>=date("$start_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        410      100.00      100.00
------------+-----------------------------------
      Total |        410      100.00

. keep if diagnosis_date<=date("$end_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        410      100.00      100.00
------------+-----------------------------------
      Total |        410      100.00

. 
. *Include only most recent EIA sub-diagnosis===========================================
> ==*/
. replace ra_code =0 if psa_code_date > ra_code_date & psa_code_date !=.
(0 real changes made)

. replace ra_code =0 if anksp_code_date > ra_code_date & anksp_code_date !=.
(0 real changes made)

. replace ra_code =0 if undiff_code_date > ra_code_date & undiff_code_date !=.
(0 real changes made)

. replace psa_code =0 if ra_code_date >= psa_code_date & ra_code_date !=.
(0 real changes made)

. replace psa_code =0 if anksp_code_date > psa_code_date & anksp_code_date !=.
(0 real changes made)

. replace psa_code =0 if undiff_code_date > psa_code_date & undiff_code_date !=.
(0 real changes made)

. replace anksp_code =0 if psa_code_date >= anksp_code_date & psa_code_date !=.
(0 real changes made)

. replace anksp_code =0 if ra_code_date >= anksp_code_date & ra_code_date !=.
(0 real changes made)

. replace anksp_code =0 if undiff_code_date > anksp_code_date & undiff_code_date !=.
(0 real changes made)

. replace undiff_code =0 if ra_code_date >= undiff_code_date & ra_code_date !=.
(0 real changes made)

. replace undiff_code =0 if psa_code_date >= undiff_code_date & psa_code_date !=.
(0 real changes made)

. replace undiff_code =0 if anksp_code_date >= undiff_code_date & anksp_code_date !=.
(0 real changes made)

. gen eia_diagnosis=1 if ra_code==1
(83 missing values generated)

. replace eia_diagnosis=2 if psa_code==1
(38 real changes made)

. replace eia_diagnosis=3 if anksp_code==1
(35 real changes made)

. replace eia_diagnosis=4 if undiff_code==1
(10 real changes made)

. lab define eia_diagnosis 1 "RA" 2 "PsA" 3 "AxSpA" 4 "Undiff IA", modify

. lab val eia_diagnosis eia_diagnosis

. tab eia_diagnosis, missing

eia_diagnos |
         is |      Freq.     Percent        Cum.
------------+-----------------------------------
         RA |        327       79.76       79.76
        PsA |         38        9.27       89.02
      AxSpA |         35        8.54       97.56
  Undiff IA |         10        2.44      100.00
------------+-----------------------------------
      Total |        410      100.00

. drop if eia_diagnosis==. //should be none
(0 observations deleted)

. 
. decode eia_diagnosis, gen(eia_diag)

. replace eia_diag="Undiff_IA" if eia_diagnosis==4
(10 real changes made)

. 
. *Split into time windows=========================================*/
. 
. **Month/Year of GP diagnostic code
. gen year_diag=year(eia_code_date)

. format year_diag %ty

. gen month_diag=month(eia_code_date)

. gen mo_year_diagn=ym(year_diag, month_diag)

. format mo_year_diagn %tmMon-CCYY

. generate str16 mo_year_diagn_s = strofreal(mo_year_diagn,"%tmCCYY!mNN")

. lab var mo_year_diagn "Month/Year of Diagnosis"

. lab var mo_year_diagn_s "Month/Year of Diagnosis"

. 
. **Month/Year of rheum appt
. gen year_appt=year(rheum_appt_date) if rheum_appt_date!=.
(407 missing values generated)

. format year_appt %ty

. gen month_appt=month(rheum_appt_date) if rheum_appt_date!=. 
(407 missing values generated)

. gen mo_year_appt=ym(year_appt, month_appt)
(407 missing values generated)

. format mo_year_appt %tmMon-CCYY

. generate str16 mo_year_appt_s = strofreal(mo_year_appt,"%tmCCYY!mNN")

. 
. **Separate into 3-month time windows (for diagnosis date)
. gen diagnosis_3m = qofd(diagnosis_date)

. format diagnosis_3m %tq

. lab var diagnosis_3m "Time period for diagnosis"

. tab diagnosis_3m, missing

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |         12        2.93        2.93
     2016q3 |          6        1.46        4.39
     2016q4 |         12        2.93        7.32
     2017q1 |          8        1.95        9.27
     2017q2 |          8        1.95       11.22
     2017q3 |         15        3.66       14.88
     2017q4 |         12        2.93       17.80
     2018q1 |         19        4.63       22.44
     2018q2 |         11        2.68       25.12
     2018q3 |         14        3.41       28.54
     2018q4 |         12        2.93       31.46
     2019q1 |          8        1.95       33.41
     2019q2 |         16        3.90       37.32
     2019q3 |          9        2.20       39.51
     2019q4 |          8        1.95       41.46
     2020q1 |         14        3.41       44.88
     2020q2 |          9        2.20       47.07
     2020q3 |         12        2.93       50.00
     2020q4 |         12        2.93       52.93
     2021q1 |         14        3.41       56.34
     2021q2 |         13        3.17       59.51
     2021q3 |         16        3.90       63.41
     2021q4 |         18        4.39       67.80
     2022q1 |         10        2.44       70.24
     2022q2 |          7        1.71       71.95
     2022q3 |          9        2.20       74.15
     2022q4 |          8        1.95       76.10
     2023q1 |         15        3.66       79.76
     2023q2 |         10        2.44       82.20
     2023q3 |          6        1.46       83.66
     2023q4 |         18        4.39       88.05
     2024q1 |         12        2.93       90.98
     2024q2 |         12        2.93       93.90
     2024q3 |         12        2.93       96.83
     2024q4 |          8        1.95       98.78
     2025q1 |          5        1.22      100.00
------------+-----------------------------------
      Total |        410      100.00

. bys eia_diagnosis: tab diagnosis_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |         11        3.36        3.36
     2016q3 |          5        1.53        4.89
     2016q4 |         10        3.06        7.95
     2017q1 |          8        2.45       10.40
     2017q2 |          8        2.45       12.84
     2017q3 |         13        3.98       16.82
     2017q4 |         12        3.67       20.49
     2018q1 |         16        4.89       25.38
     2018q2 |          6        1.83       27.22
     2018q3 |         11        3.36       30.58
     2018q4 |         10        3.06       33.64
     2019q1 |          8        2.45       36.09
     2019q2 |         12        3.67       39.76
     2019q3 |          6        1.83       41.59
     2019q4 |          5        1.53       43.12
     2020q1 |         10        3.06       46.18
     2020q2 |          9        2.75       48.93
     2020q3 |          9        2.75       51.68
     2020q4 |          9        2.75       54.43
     2021q1 |         10        3.06       57.49
     2021q2 |         10        3.06       60.55
     2021q3 |         12        3.67       64.22
     2021q4 |         15        4.59       68.81
     2022q1 |          8        2.45       71.25
     2022q2 |          5        1.53       72.78
     2022q3 |          7        2.14       74.92
     2022q4 |          6        1.83       76.76
     2023q1 |          8        2.45       79.20
     2023q2 |          8        2.45       81.65
     2023q3 |          5        1.53       83.18
     2023q4 |         12        3.67       86.85
     2024q1 |         11        3.36       90.21
     2024q2 |         11        3.36       93.58
     2024q3 |         11        3.36       96.94
     2024q4 |          6        1.83       98.78
     2025q1 |          4        1.22      100.00
------------+-----------------------------------
      Total |        327      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          1        2.63        2.63
     2016q4 |          2        5.26        7.89
     2018q2 |          5       13.16       21.05
     2018q3 |          1        2.63       23.68
     2019q2 |          3        7.89       31.58
     2019q3 |          2        5.26       36.84
     2020q1 |          1        2.63       39.47
     2020q3 |          1        2.63       42.11
     2020q4 |          2        5.26       47.37
     2021q1 |          3        7.89       55.26
     2021q2 |          1        2.63       57.89
     2021q3 |          2        5.26       63.16
     2021q4 |          1        2.63       65.79
     2022q1 |          1        2.63       68.42
     2022q2 |          1        2.63       71.05
     2022q3 |          1        2.63       73.68
     2022q4 |          1        2.63       76.32
     2023q1 |          2        5.26       81.58
     2023q3 |          1        2.63       84.21
     2023q4 |          4       10.53       94.74
     2024q4 |          1        2.63       97.37
     2025q1 |          1        2.63      100.00
------------+-----------------------------------
      Total |         38      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q3 |          1        2.86        2.86
     2017q3 |          1        2.86        5.71
     2018q1 |          3        8.57       14.29
     2018q3 |          2        5.71       20.00
     2018q4 |          1        2.86       22.86
     2019q2 |          1        2.86       25.71
     2019q4 |          2        5.71       31.43
     2020q1 |          3        8.57       40.00
     2020q3 |          2        5.71       45.71
     2020q4 |          1        2.86       48.57
     2021q1 |          1        2.86       51.43
     2021q2 |          2        5.71       57.14
     2021q3 |          2        5.71       62.86
     2021q4 |          1        2.86       65.71
     2022q1 |          1        2.86       68.57
     2022q4 |          1        2.86       71.43
     2023q1 |          3        8.57       80.00
     2023q2 |          2        5.71       85.71
     2023q4 |          1        2.86       88.57
     2024q1 |          1        2.86       91.43
     2024q2 |          1        2.86       94.29
     2024q3 |          1        2.86       97.14
     2024q4 |          1        2.86      100.00
------------+-----------------------------------
      Total |         35      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2017q3 |          1       10.00       10.00
     2018q4 |          1       10.00       20.00
     2019q3 |          1       10.00       30.00
     2019q4 |          1       10.00       40.00
     2021q4 |          1       10.00       50.00
     2022q2 |          1       10.00       60.00
     2022q3 |          1       10.00       70.00
     2023q1 |          2       20.00       90.00
     2023q4 |          1       10.00      100.00
------------+-----------------------------------
      Total |         10      100.00


. 
. **Separate into 12-month time windows (for diagnosis date)
. gen diagnosis_year = (floor((diagnosis_date - date("$start_date", "DMY")) / 365.25) + 
> 1) if inrange(diagnosis_date, date("$start_date", "DMY"), date("$end_date", "DMY"))

. lab var diagnosis_year "Year of diagnosis"

. forvalues i = 1/$max_year {
  2.     local start = $base_year + `i' - 1
  3.     local end = `start' + 1
  4.     label define diagnosis_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val diagnosis_year diagnosis_year_lbl

. tab diagnosis_year, missing

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |         38        9.27        9.27
Apr 2017Mar 2018 |         54       13.17       22.44
Apr 2018Mar 2019 |         45       10.98       33.41
Apr 2019Mar 2020 |         47       11.46       44.88
Apr 2020Mar 2021 |         47       11.46       56.34
Apr 2021Mar 2022 |         57       13.90       70.24
Apr 2022Mar 2023 |         40        9.76       80.00
Apr 2023Mar 2024 |         45       10.98       90.98
Apr 2024Mar 2025 |         37        9.02      100.00
------------------+-----------------------------------
            Total |        410      100.00

. bys eia_diagnosis: tab diagnosis_year, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |         34       10.40       10.40
Apr 2017Mar 2018 |         49       14.98       25.38
Apr 2018Mar 2019 |         35       10.70       36.09
Apr 2019Mar 2020 |         33       10.09       46.18
Apr 2020Mar 2021 |         37       11.31       57.49
Apr 2021Mar 2022 |         45       13.76       71.25
Apr 2022Mar 2023 |         26        7.95       79.20
Apr 2023Mar 2024 |         36       11.01       90.21
Apr 2024Mar 2025 |         32        9.79      100.00
------------------+-----------------------------------
            Total |        327      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |          3        7.89        7.89
Apr 2018Mar 2019 |          6       15.79       23.68
Apr 2019Mar 2020 |          6       15.79       39.47
Apr 2020Mar 2021 |          6       15.79       55.26
Apr 2021Mar 2022 |          5       13.16       68.42
Apr 2022Mar 2023 |          5       13.16       81.58
Apr 2023Mar 2024 |          5       13.16       94.74
Apr 2024Mar 2025 |          2        5.26      100.00
------------------+-----------------------------------
            Total |         38      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |          1        2.86        2.86
Apr 2017Mar 2018 |          4       11.43       14.29
Apr 2018Mar 2019 |          3        8.57       22.86
Apr 2019Mar 2020 |          6       17.14       40.00
Apr 2020Mar 2021 |          4       11.43       51.43
Apr 2021Mar 2022 |          6       17.14       68.57
Apr 2022Mar 2023 |          5       14.29       82.86
Apr 2023Mar 2024 |          3        8.57       91.43
Apr 2024Mar 2025 |          3        8.57      100.00
------------------+-----------------------------------
            Total |         35      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2017Mar 2018 |          1       10.00       10.00
Apr 2018Mar 2019 |          1       10.00       20.00
Apr 2019Mar 2020 |          2       20.00       40.00
Apr 2021Mar 2022 |          1       10.00       50.00
Apr 2022Mar 2023 |          4       40.00       90.00
Apr 2023Mar 2024 |          1       10.00      100.00
------------------+-----------------------------------
            Total |         10      100.00


. 
. **Separate into 3-month time windows (for appt date)
. gen appt_3m = qofd(rheum_appt_date)
(407 missing values generated)

. format appt_3m %tq

. lab var appt_3m "Time period for appointment"

. tab appt_3m, missing

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
     2017q3 |          1        0.24        0.24
     2019q3 |          1        0.24        0.49
     2021q2 |          1        0.24        0.73
          . |        407       99.27      100.00
------------+-----------------------------------
      Total |        410      100.00

. bys eia_diagnosis: tab appt_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
     2017q3 |          1        0.31        0.31
     2021q2 |          1        0.31        0.61
          . |        325       99.39      100.00
------------+-----------------------------------
      Total |        327      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
     2019q3 |          1        2.63        2.63
          . |         37       97.37      100.00
------------+-----------------------------------
      Total |         38      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
          . |         35      100.00      100.00
------------+-----------------------------------
      Total |         35      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
          . |         10      100.00      100.00
------------+-----------------------------------
      Total |         10      100.00


. 
. **Separate into 12-month time windows (for appt date)
. gen appt_year = (floor((rheum_appt_date - date("$start_date", "DMY")) / 365.25) + 1) i
> f inrange(rheum_appt_date, date("$start_date", "DMY"), date("$end_date", "DMY"))
(407 missing values generated)

. lab var appt_year "Year of appointment"

. forvalues i = 1/$max_year {
  2.     local start = $base_year + `i' - 1
  3.     local end = `start' + 1
  4.     label define appt_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val appt_year appt_year_lbl

. tab appt_year, missing

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2017Mar 2018 |          1        0.24        0.24
Apr 2019Mar 2020 |          1        0.24        0.49
Apr 2021Mar 2022 |          1        0.24        0.73
                . |        407       99.27      100.00
------------------+-----------------------------------
            Total |        410      100.00

. bys eia_diagnosis: tab appt_year, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2017Mar 2018 |          1        0.31        0.31
Apr 2021Mar 2022 |          1        0.31        0.61
                . |        325       99.39      100.00
------------------+-----------------------------------
            Total |        327      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2019Mar 2020 |          1        2.63        2.63
                . |         37       97.37      100.00
------------------+-----------------------------------
            Total |         38      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
                . |         35      100.00      100.00
------------------+-----------------------------------
            Total |         35      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
                . |         10      100.00      100.00
------------------+-----------------------------------
            Total |         10      100.00


. 
. *Define Rheumatology appointments ======================================*/
. 
. **Rheumatology appt definitions 
. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before and 60 days after EIA code ap
> peared in GP record; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        407       99.27       99.27
        Yes |          3        0.73      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab mo_year_diagn rheum_appt, missing //proportion of patients with an rheum outpatien
> t date (with first attendance option selected) in the 12 months before and 60 days aft
> er EIA code appeared in GP record; data only April 2019 onwards

Month/Year |     Rheumatology
        of |      appointment
 Diagnosis |        No        Yes |     Total
-----------+----------------------+----------
  Apr-2016 |         4          0 |         4 
  May-2016 |         3          0 |         3 
  Jun-2016 |         5          0 |         5 
  Jul-2016 |         2          0 |         2 
  Aug-2016 |         2          0 |         2 
  Sep-2016 |         2          0 |         2 
  Oct-2016 |         8          0 |         8 
  Nov-2016 |         2          0 |         2 
  Dec-2016 |         2          0 |         2 
  Jan-2017 |         3          0 |         3 
  Feb-2017 |         2          0 |         2 
  Mar-2017 |         3          0 |         3 
  Apr-2017 |         2          0 |         2 
  May-2017 |         3          0 |         3 
  Jun-2017 |         3          0 |         3 
  Jul-2017 |         6          0 |         6 
  Aug-2017 |         5          0 |         5 
  Sep-2017 |         4          0 |         4 
  Oct-2017 |         2          0 |         2 
  Nov-2017 |         7          0 |         7 
  Dec-2017 |         3          0 |         3 
  Jan-2018 |         3          0 |         3 
  Feb-2018 |         7          0 |         7 
  Mar-2018 |         8          1 |         9 
  Apr-2018 |         4          0 |         4 
  May-2018 |         5          0 |         5 
  Jun-2018 |         2          0 |         2 
  Jul-2018 |         6          0 |         6 
  Aug-2018 |         4          0 |         4 
  Sep-2018 |         4          0 |         4 
  Oct-2018 |         4          0 |         4 
  Nov-2018 |         5          0 |         5 
  Dec-2018 |         3          0 |         3 
  Jan-2019 |         3          0 |         3 
  Feb-2019 |         4          0 |         4 
  Mar-2019 |         1          0 |         1 
  Apr-2019 |         5          0 |         5 
  May-2019 |         5          0 |         5 
  Jun-2019 |         6          0 |         6 
  Jul-2019 |         3          0 |         3 
  Aug-2019 |         2          1 |         3 
  Sep-2019 |         3          0 |         3 
  Oct-2019 |         3          0 |         3 
  Nov-2019 |         1          0 |         1 
  Dec-2019 |         4          0 |         4 
  Jan-2020 |         1          0 |         1 
  Feb-2020 |         9          0 |         9 
  Mar-2020 |         4          0 |         4 
  Apr-2020 |         2          0 |         2 
  May-2020 |         1          0 |         1 
  Jun-2020 |         6          0 |         6 
  Jul-2020 |         4          0 |         4 
  Aug-2020 |         2          0 |         2 
  Sep-2020 |         6          0 |         6 
  Oct-2020 |         6          0 |         6 
  Nov-2020 |         2          0 |         2 
  Dec-2020 |         4          0 |         4 
  Jan-2021 |         3          0 |         3 
  Feb-2021 |         3          0 |         3 
  Mar-2021 |         8          0 |         8 
  Apr-2021 |         5          0 |         5 
  May-2021 |         2          0 |         2 
  Jun-2021 |         6          0 |         6 
  Jul-2021 |         6          0 |         6 
  Aug-2021 |         3          0 |         3 
  Sep-2021 |         7          0 |         7 
  Oct-2021 |         5          0 |         5 
  Nov-2021 |         4          1 |         5 
  Dec-2021 |         8          0 |         8 
  Jan-2022 |         2          0 |         2 
  Feb-2022 |         5          0 |         5 
  Mar-2022 |         3          0 |         3 
  Apr-2022 |         1          0 |         1 
  May-2022 |         4          0 |         4 
  Jun-2022 |         2          0 |         2 
  Jul-2022 |         6          0 |         6 
  Sep-2022 |         3          0 |         3 
  Oct-2022 |         4          0 |         4 
  Nov-2022 |         1          0 |         1 
  Dec-2022 |         3          0 |         3 
  Jan-2023 |         3          0 |         3 
  Feb-2023 |         6          0 |         6 
  Mar-2023 |         6          0 |         6 
  Apr-2023 |         3          0 |         3 
  May-2023 |         3          0 |         3 
  Jun-2023 |         4          0 |         4 
  Aug-2023 |         3          0 |         3 
  Sep-2023 |         3          0 |         3 
  Oct-2023 |         7          0 |         7 
  Nov-2023 |         5          0 |         5 
  Dec-2023 |         6          0 |         6 
  Jan-2024 |         5          0 |         5 
  Feb-2024 |         5          0 |         5 
  Mar-2024 |         2          0 |         2 
  Apr-2024 |         5          0 |         5 
  May-2024 |         3          0 |         3 
  Jun-2024 |         4          0 |         4 
  Jul-2024 |         3          0 |         3 
  Aug-2024 |         2          0 |         2 
  Sep-2024 |         7          0 |         7 
  Oct-2024 |         2          0 |         2 
  Nov-2024 |         4          0 |         4 
  Dec-2024 |         2          0 |         2 
  Jan-2025 |         1          0 |         1 
  Feb-2025 |         2          0 |         2 
  Mar-2025 |         2          0 |         2 
-----------+----------------------+----------
     Total |       407          3 |       410 

. tab rheum_appt_any, missing //proportion of patients with a rheum outpatient date (wit
> hout first attendance option selected) in the 12 months before and 60 days after EIA c
> ode appeared in GP record; data only April 2019 onwards

rheum_appt_ |
        any |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        405       98.78       98.78
          1 |          5        1.22      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab rheum_appt2, missing //proportion of patients with a rheum outpatient date (withou
> t first attendance option selected) in the 6 months before and 60 days after  EIA code
>  appeared in GP record; data only April 2019 onwards

rheum_appt2 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        408       99.51       99.51
          1 |          2        0.49      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab rheum_appt3, missing //proportion of patients with a rheum outpatient date (withou
> t first attendance option selected) in the 2 years before and 60 days after EIA code a
> ppeared in GP record; data only April 2019 onwards

rheum_appt3 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        399       97.32       97.32
          1 |         11        2.68      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab rheum_appt4, missing //proportion of patients with a rheum outpatient date (withou
> t first attendance option selected) in the 2 years before and 1 year after EIA code ap
> peared in GP record; data only April 2019 onwards

rheum_appt4 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        399       97.32       97.32
          1 |         11        2.68      100.00
------------+-----------------------------------
      Total |        410      100.00

. 
. ***Check number of rheumatology appts in the year before EIA code
. tabstat rheum_appt_count, stat (n mean sd p50 p25 p75)

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |       410  .0097561    .09841         0         0         0
--------------------------------------------------------------------------

. bys diagnosis_year: tabstat rheum_appt_count, stat (n mean sd p50 p25 p75)

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2016Mar 2017

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        38         0         0         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2017Mar 2018

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        54  .0185185  .1360828         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2018Mar 2019

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        45         0         0         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2019Mar 2020

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        47         0         0         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2020Mar 2021

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        47  .0212766   .145865         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2021Mar 2022

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        57  .0175439  .1324532         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2022Mar 2023

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        40         0         0         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2023Mar 2024

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        45         0         0         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2024Mar 2025

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        37   .027027   .164399         0         0         0
--------------------------------------------------------------------------

. bys appt_year: tabstat rheum_appt_count, stat (n mean sd p50 p25 p75)

----------------------------------------------------------------------------------------
-> appt_year = Apr 2017Mar 2018

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |         1         1         .         1         1         1
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> appt_year = Apr 2019Mar 2020

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |         1         0         .         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> appt_year = Apr 2021Mar 2022

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |         1         1         .         1         1         1
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> appt_year = .

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |       407   .004914  .0700136         0         0         0
--------------------------------------------------------------------------

. 
. ***Check medium used for rheumatology appointment
. tab rheum_appt_medium, missing

rheum_appt_ |
     medium |      Freq.     Percent        Cum.
------------+-----------------------------------
          9 |          2        0.49        0.49
          . |        408       99.51      100.00
------------+-----------------------------------
      Total |        410      100.00

. gen rheum_appt_medium_clean = rheum_appt_medium if rheum_appt_medium >0 & rheum_appt_m
> edium<100
(408 missing values generated)

. recode rheum_appt_medium_clean 3=2 //recode telemedicine=telephone
(0 changes made to rheum_appt_medium_clean)

. replace rheum_appt_medium_clean=10 if rheum_appt_medium_clean>2 & rheum_appt_medium_cl
> ean!=.
(2 real changes made)

. recode rheum_appt_medium_clean .=.u
(408 changes made to rheum_appt_medium_clean)

. lab define rheum_appt_medium_clean 1 "Face-to-face" 2 "Telephone" 10 "Other" .u "Missi
> ng", modify

. lab val rheum_appt_medium_clean rheum_appt_medium_clean

. lab var rheum_appt_medium_clean "Rheumatology consultation medium"

. tab rheum_appt_medium_clean 

Rheumatology |
consultation |
      medium |      Freq.     Percent        Cum.
-------------+-----------------------------------
       Other |          2      100.00      100.00
-------------+-----------------------------------
       Total |          2      100.00

. 
. *Gen rheum appt variable with 6m/12m+ until study end date
. gen rheum_appt_12m=rheum_appt if rheum_appt_date<=(date("$end_date", "DMY")-365) 
(407 missing values generated)

. recode rheum_appt_12m .=0
(407 changes made to rheum_appt_12m)

. lab var rheum_appt_12m "Rheumatology appt 12m+"

. lab define rheum_appt_12m 0 "No" 1 "Yes", modify

. lab val rheum_appt_12m rheum_appt_12m

. 
. gen rheum_appt_6m=rheum_appt if rheum_appt_date<=(date("$end_date", "DMY")-180) 
(407 missing values generated)

. recode rheum_appt_6m .=0
(407 changes made to rheum_appt_6m)

. lab var rheum_appt_6m "Rheumatology appt 6m+"

. lab define rheum_appt_6m 0 "No" 1 "Yes", modify

. lab val rheum_appt_6m rheum_appt_6m

. 
. **Define Rheumatology referrals ======================================*/
. 
. ***From HES OPA (referral_request_received_date)
. tab rheum_appt_ref_date, missing

rheum_appt_ |
   ref_date |      Freq.     Percent        Cum.
------------+-----------------------------------
  24jul1987 |          1        0.24        0.24
  17nov1999 |          1        0.24        0.49
  21jun2016 |          1        0.24        0.73
          . |        407       99.27      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab mo_year_diagn rheum_appt_ref_date, missing

Month/Year |
        of |             rheum_appt_ref_date
 Diagnosis | 24jul1987  17nov1999  21jun2016          . |     Total
-----------+--------------------------------------------+----------
  Apr-2016 |         0          0          0          4 |         4 
  May-2016 |         0          0          0          3 |         3 
  Jun-2016 |         0          0          0          5 |         5 
  Jul-2016 |         0          0          0          2 |         2 
  Aug-2016 |         0          0          0          2 |         2 
  Sep-2016 |         0          0          0          2 |         2 
  Oct-2016 |         0          0          0          8 |         8 
  Nov-2016 |         0          0          0          2 |         2 
  Dec-2016 |         0          0          0          2 |         2 
  Jan-2017 |         0          0          0          3 |         3 
  Feb-2017 |         0          0          0          2 |         2 
  Mar-2017 |         0          0          0          3 |         3 
  Apr-2017 |         0          0          0          2 |         2 
  May-2017 |         0          0          0          3 |         3 
  Jun-2017 |         0          0          0          3 |         3 
  Jul-2017 |         0          0          0          6 |         6 
  Aug-2017 |         0          0          0          5 |         5 
  Sep-2017 |         0          0          0          4 |         4 
  Oct-2017 |         0          0          0          2 |         2 
  Nov-2017 |         0          0          0          7 |         7 
  Dec-2017 |         0          0          0          3 |         3 
  Jan-2018 |         0          0          0          3 |         3 
  Feb-2018 |         0          0          0          7 |         7 
  Mar-2018 |         1          0          0          8 |         9 
  Apr-2018 |         0          0          0          4 |         4 
  May-2018 |         0          0          0          5 |         5 
  Jun-2018 |         0          0          0          2 |         2 
  Jul-2018 |         0          0          0          6 |         6 
  Aug-2018 |         0          0          0          4 |         4 
  Sep-2018 |         0          0          0          4 |         4 
  Oct-2018 |         0          0          0          4 |         4 
  Nov-2018 |         0          0          0          5 |         5 
  Dec-2018 |         0          0          0          3 |         3 
  Jan-2019 |         0          0          0          3 |         3 
  Feb-2019 |         0          0          0          4 |         4 
  Mar-2019 |         0          0          0          1 |         1 
  Apr-2019 |         0          0          0          5 |         5 
  May-2019 |         0          0          0          5 |         5 
  Jun-2019 |         0          0          0          6 |         6 
  Jul-2019 |         0          0          0          3 |         3 
  Aug-2019 |         0          0          1          2 |         3 
  Sep-2019 |         0          0          0          3 |         3 
  Oct-2019 |         0          0          0          3 |         3 
  Nov-2019 |         0          0          0          1 |         1 
  Dec-2019 |         0          0          0          4 |         4 
  Jan-2020 |         0          0          0          1 |         1 
  Feb-2020 |         0          0          0          9 |         9 
  Mar-2020 |         0          0          0          4 |         4 
  Apr-2020 |         0          0          0          2 |         2 
  May-2020 |         0          0          0          1 |         1 
  Jun-2020 |         0          0          0          6 |         6 
  Jul-2020 |         0          0          0          4 |         4 
  Aug-2020 |         0          0          0          2 |         2 
  Sep-2020 |         0          0          0          6 |         6 
  Oct-2020 |         0          0          0          6 |         6 
  Nov-2020 |         0          0          0          2 |         2 
  Dec-2020 |         0          0          0          4 |         4 
  Jan-2021 |         0          0          0          3 |         3 
  Feb-2021 |         0          0          0          3 |         3 
  Mar-2021 |         0          0          0          8 |         8 
  Apr-2021 |         0          0          0          5 |         5 
  May-2021 |         0          0          0          2 |         2 
  Jun-2021 |         0          0          0          6 |         6 
  Jul-2021 |         0          0          0          6 |         6 
  Aug-2021 |         0          0          0          3 |         3 
  Sep-2021 |         0          0          0          7 |         7 
  Oct-2021 |         0          0          0          5 |         5 
  Nov-2021 |         0          1          0          4 |         5 
  Dec-2021 |         0          0          0          8 |         8 
  Jan-2022 |         0          0          0          2 |         2 
  Feb-2022 |         0          0          0          5 |         5 
  Mar-2022 |         0          0          0          3 |         3 
  Apr-2022 |         0          0          0          1 |         1 
  May-2022 |         0          0          0          4 |         4 
  Jun-2022 |         0          0          0          2 |         2 
  Jul-2022 |         0          0          0          6 |         6 
  Sep-2022 |         0          0          0          3 |         3 
  Oct-2022 |         0          0          0          4 |         4 
  Nov-2022 |         0          0          0          1 |         1 
  Dec-2022 |         0          0          0          3 |         3 
  Jan-2023 |         0          0          0          3 |         3 
  Feb-2023 |         0          0          0          6 |         6 
  Mar-2023 |         0          0          0          6 |         6 
  Apr-2023 |         0          0          0          3 |         3 
  May-2023 |         0          0          0          3 |         3 
  Jun-2023 |         0          0          0          4 |         4 
  Aug-2023 |         0          0          0          3 |         3 
  Sep-2023 |         0          0          0          3 |         3 
  Oct-2023 |         0          0          0          7 |         7 
  Nov-2023 |         0          0          0          5 |         5 
  Dec-2023 |         0          0          0          6 |         6 
  Jan-2024 |         0          0          0          5 |         5 
  Feb-2024 |         0          0          0          5 |         5 
  Mar-2024 |         0          0          0          2 |         2 
  Apr-2024 |         0          0          0          5 |         5 
  May-2024 |         0          0          0          3 |         3 
  Jun-2024 |         0          0          0          4 |         4 
  Jul-2024 |         0          0          0          3 |         3 
  Aug-2024 |         0          0          0          2 |         2 
  Sep-2024 |         0          0          0          7 |         7 
  Oct-2024 |         0          0          0          2 |         2 
  Nov-2024 |         0          0          0          4 |         4 
  Dec-2024 |         0          0          0          2 |         2 
  Jan-2025 |         0          0          0          1 |         1 
  Feb-2025 |         0          0          0          2 |         2 
  Mar-2025 |         0          0          0          2 |         2 
-----------+--------------------------------------------+----------
     Total |         1          1          1        407 |       410 

. tab mo_year_diagn rheum_appt_ref_date if rheum_appt!=., missing

Month/Year |
        of |             rheum_appt_ref_date
 Diagnosis | 24jul1987  17nov1999  21jun2016          . |     Total
-----------+--------------------------------------------+----------
  Apr-2016 |         0          0          0          4 |         4 
  May-2016 |         0          0          0          3 |         3 
  Jun-2016 |         0          0          0          5 |         5 
  Jul-2016 |         0          0          0          2 |         2 
  Aug-2016 |         0          0          0          2 |         2 
  Sep-2016 |         0          0          0          2 |         2 
  Oct-2016 |         0          0          0          8 |         8 
  Nov-2016 |         0          0          0          2 |         2 
  Dec-2016 |         0          0          0          2 |         2 
  Jan-2017 |         0          0          0          3 |         3 
  Feb-2017 |         0          0          0          2 |         2 
  Mar-2017 |         0          0          0          3 |         3 
  Apr-2017 |         0          0          0          2 |         2 
  May-2017 |         0          0          0          3 |         3 
  Jun-2017 |         0          0          0          3 |         3 
  Jul-2017 |         0          0          0          6 |         6 
  Aug-2017 |         0          0          0          5 |         5 
  Sep-2017 |         0          0          0          4 |         4 
  Oct-2017 |         0          0          0          2 |         2 
  Nov-2017 |         0          0          0          7 |         7 
  Dec-2017 |         0          0          0          3 |         3 
  Jan-2018 |         0          0          0          3 |         3 
  Feb-2018 |         0          0          0          7 |         7 
  Mar-2018 |         1          0          0          8 |         9 
  Apr-2018 |         0          0          0          4 |         4 
  May-2018 |         0          0          0          5 |         5 
  Jun-2018 |         0          0          0          2 |         2 
  Jul-2018 |         0          0          0          6 |         6 
  Aug-2018 |         0          0          0          4 |         4 
  Sep-2018 |         0          0          0          4 |         4 
  Oct-2018 |         0          0          0          4 |         4 
  Nov-2018 |         0          0          0          5 |         5 
  Dec-2018 |         0          0          0          3 |         3 
  Jan-2019 |         0          0          0          3 |         3 
  Feb-2019 |         0          0          0          4 |         4 
  Mar-2019 |         0          0          0          1 |         1 
  Apr-2019 |         0          0          0          5 |         5 
  May-2019 |         0          0          0          5 |         5 
  Jun-2019 |         0          0          0          6 |         6 
  Jul-2019 |         0          0          0          3 |         3 
  Aug-2019 |         0          0          1          2 |         3 
  Sep-2019 |         0          0          0          3 |         3 
  Oct-2019 |         0          0          0          3 |         3 
  Nov-2019 |         0          0          0          1 |         1 
  Dec-2019 |         0          0          0          4 |         4 
  Jan-2020 |         0          0          0          1 |         1 
  Feb-2020 |         0          0          0          9 |         9 
  Mar-2020 |         0          0          0          4 |         4 
  Apr-2020 |         0          0          0          2 |         2 
  May-2020 |         0          0          0          1 |         1 
  Jun-2020 |         0          0          0          6 |         6 
  Jul-2020 |         0          0          0          4 |         4 
  Aug-2020 |         0          0          0          2 |         2 
  Sep-2020 |         0          0          0          6 |         6 
  Oct-2020 |         0          0          0          6 |         6 
  Nov-2020 |         0          0          0          2 |         2 
  Dec-2020 |         0          0          0          4 |         4 
  Jan-2021 |         0          0          0          3 |         3 
  Feb-2021 |         0          0          0          3 |         3 
  Mar-2021 |         0          0          0          8 |         8 
  Apr-2021 |         0          0          0          5 |         5 
  May-2021 |         0          0          0          2 |         2 
  Jun-2021 |         0          0          0          6 |         6 
  Jul-2021 |         0          0          0          6 |         6 
  Aug-2021 |         0          0          0          3 |         3 
  Sep-2021 |         0          0          0          7 |         7 
  Oct-2021 |         0          0          0          5 |         5 
  Nov-2021 |         0          1          0          4 |         5 
  Dec-2021 |         0          0          0          8 |         8 
  Jan-2022 |         0          0          0          2 |         2 
  Feb-2022 |         0          0          0          5 |         5 
  Mar-2022 |         0          0          0          3 |         3 
  Apr-2022 |         0          0          0          1 |         1 
  May-2022 |         0          0          0          4 |         4 
  Jun-2022 |         0          0          0          2 |         2 
  Jul-2022 |         0          0          0          6 |         6 
  Sep-2022 |         0          0          0          3 |         3 
  Oct-2022 |         0          0          0          4 |         4 
  Nov-2022 |         0          0          0          1 |         1 
  Dec-2022 |         0          0          0          3 |         3 
  Jan-2023 |         0          0          0          3 |         3 
  Feb-2023 |         0          0          0          6 |         6 
  Mar-2023 |         0          0          0          6 |         6 
  Apr-2023 |         0          0          0          3 |         3 
  May-2023 |         0          0          0          3 |         3 
  Jun-2023 |         0          0          0          4 |         4 
  Aug-2023 |         0          0          0          3 |         3 
  Sep-2023 |         0          0          0          3 |         3 
  Oct-2023 |         0          0          0          7 |         7 
  Nov-2023 |         0          0          0          5 |         5 
  Dec-2023 |         0          0          0          6 |         6 
  Jan-2024 |         0          0          0          5 |         5 
  Feb-2024 |         0          0          0          5 |         5 
  Mar-2024 |         0          0          0          2 |         2 
  Apr-2024 |         0          0          0          5 |         5 
  May-2024 |         0          0          0          3 |         3 
  Jun-2024 |         0          0          0          4 |         4 
  Jul-2024 |         0          0          0          3 |         3 
  Aug-2024 |         0          0          0          2 |         2 
  Sep-2024 |         0          0          0          7 |         7 
  Oct-2024 |         0          0          0          2 |         2 
  Nov-2024 |         0          0          0          4 |         4 
  Dec-2024 |         0          0          0          2 |         2 
  Jan-2025 |         0          0          0          1 |         1 
  Feb-2025 |         0          0          0          2 |         2 
  Mar-2025 |         0          0          0          2 |         2 
-----------+--------------------------------------------+----------
     Total |         1          1          1        407 |       410 

. 
. ***From RTT clock-stop data (only available for those with clock-stop date between May
>  2021 and May 2022)
. tab rtt_cl_ref_date, missing

rtt_cl_ref_ |
       date |      Freq.     Percent        Cum.
------------+-----------------------------------
  21feb1924 |          1        0.24        0.24
  06may1938 |          1        0.24        0.49
  10feb1951 |          1        0.24        0.73
  16feb1955 |          1        0.24        0.98
  08dec1968 |          1        0.24        1.22
  29aug1995 |          1        0.24        1.46
  25sep1998 |          1        0.24        1.71
  08jun2000 |          1        0.24        1.95
  07may2004 |          1        0.24        2.20
  25mar2009 |          1        0.24        2.44
  19nov2011 |          1        0.24        2.68
  03jul2012 |          1        0.24        2.93
  24sep2012 |          1        0.24        3.17
  13sep2013 |          1        0.24        3.41
  19jul2015 |          1        0.24        3.66
  22jan2018 |          1        0.24        3.90
  01dec2022 |          1        0.24        4.15
  14dec2022 |          1        0.24        4.39
  09apr2023 |          1        0.24        4.63
  26aug2023 |          1        0.24        4.88
          . |        390       95.12      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab mo_year_diagn rtt_cl_ref_date, missing

Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 21feb1924  06may1938  10feb1951  16feb1955  08dec1968 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         1          0          0          0          0 |         3 
  Feb-2018 |         0          0          1          0          0 |         7 
  Mar-2018 |         0          0          0          1          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          1          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          1 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 29aug1995  25sep1998  08jun2000  07may2004  25mar2009 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          1 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         1          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          1          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          1          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          1          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 19nov2011  03jul2012  24sep2012  13sep2013  19jul2015 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          1          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          1 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          1          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         1          0          0          1          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 22jan2018  01dec2022  14dec2022  09apr2023  26aug2023 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          1 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          1          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         1          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          1          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          1          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year | rtt_cl_ref
        of |   _date
 Diagnosis |         . |     Total
-----------+-----------+----------
  Apr-2016 |         4 |         4 
  May-2016 |         3 |         3 
  Jun-2016 |         5 |         5 
  Jul-2016 |         2 |         2 
  Aug-2016 |         2 |         2 
  Sep-2016 |         2 |         2 
  Oct-2016 |         7 |         8 
  Nov-2016 |         1 |         2 
  Dec-2016 |         2 |         2 
  Jan-2017 |         3 |         3 
  Feb-2017 |         2 |         2 
  Mar-2017 |         3 |         3 
  Apr-2017 |         2 |         2 
  May-2017 |         3 |         3 
  Jun-2017 |         3 |         3 
  Jul-2017 |         6 |         6 
  Aug-2017 |         5 |         5 
  Sep-2017 |         4 |         4 
  Oct-2017 |         1 |         2 
  Nov-2017 |         7 |         7 
  Dec-2017 |         3 |         3 
  Jan-2018 |         2 |         3 
  Feb-2018 |         6 |         7 
  Mar-2018 |         7 |         9 
  Apr-2018 |         4 |         4 
  May-2018 |         5 |         5 
  Jun-2018 |         2 |         2 
  Jul-2018 |         6 |         6 
  Aug-2018 |         4 |         4 
  Sep-2018 |         3 |         4 
  Oct-2018 |         4 |         4 
  Nov-2018 |         4 |         5 
  Dec-2018 |         3 |         3 
  Jan-2019 |         3 |         3 
  Feb-2019 |         4 |         4 
  Mar-2019 |         1 |         1 
  Apr-2019 |         4 |         5 
  May-2019 |         5 |         5 
  Jun-2019 |         6 |         6 
  Jul-2019 |         3 |         3 
  Aug-2019 |         3 |         3 
  Sep-2019 |         3 |         3 
  Oct-2019 |         1 |         3 
  Nov-2019 |         1 |         1 
  Dec-2019 |         4 |         4 
  Jan-2020 |         1 |         1 
  Feb-2020 |         9 |         9 
  Mar-2020 |         4 |         4 
  Apr-2020 |         2 |         2 
  May-2020 |         1 |         1 
  Jun-2020 |         6 |         6 
  Jul-2020 |         4 |         4 
  Aug-2020 |         2 |         2 
  Sep-2020 |         6 |         6 
  Oct-2020 |         6 |         6 
  Nov-2020 |         2 |         2 
  Dec-2020 |         4 |         4 
  Jan-2021 |         3 |         3 
  Feb-2021 |         3 |         3 
  Mar-2021 |         8 |         8 
  Apr-2021 |         5 |         5 
  May-2021 |         2 |         2 
  Jun-2021 |         6 |         6 
  Jul-2021 |         6 |         6 
  Aug-2021 |         3 |         3 
  Sep-2021 |         7 |         7 
  Oct-2021 |         5 |         5 
  Nov-2021 |         5 |         5 
  Dec-2021 |         8 |         8 
  Jan-2022 |         2 |         2 
  Feb-2022 |         5 |         5 
  Mar-2022 |         2 |         3 
  Apr-2022 |         1 |         1 
  May-2022 |         4 |         4 
  Jun-2022 |         2 |         2 
  Jul-2022 |         6 |         6 
  Sep-2022 |         2 |         3 
  Oct-2022 |         4 |         4 
  Nov-2022 |         1 |         1 
  Dec-2022 |         3 |         3 
  Jan-2023 |         3 |         3 
  Feb-2023 |         5 |         6 
  Mar-2023 |         6 |         6 
  Apr-2023 |         3 |         3 
  May-2023 |         1 |         3 
  Jun-2023 |         3 |         4 
  Aug-2023 |         3 |         3 
  Sep-2023 |         3 |         3 
  Oct-2023 |         7 |         7 
  Nov-2023 |         4 |         5 
  Dec-2023 |         6 |         6 
  Jan-2024 |         5 |         5 
  Feb-2024 |         5 |         5 
  Mar-2024 |         2 |         2 
  Apr-2024 |         5 |         5 
  May-2024 |         3 |         3 
  Jun-2024 |         4 |         4 
  Jul-2024 |         3 |         3 
  Aug-2024 |         2 |         2 
  Sep-2024 |         7 |         7 
  Oct-2024 |         2 |         2 
  Nov-2024 |         4 |         4 
  Dec-2024 |         2 |         2 
  Jan-2025 |         1 |         1 
  Feb-2025 |         2 |         2 
  Mar-2025 |         1 |         2 
-----------+-----------+----------
     Total |       390 |       410 

. tab mo_year_diagn rtt_cl_ref_date if rheum_appt!=., missing

Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 21feb1924  06may1938  10feb1951  16feb1955  08dec1968 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         1          0          0          0          0 |         3 
  Feb-2018 |         0          0          1          0          0 |         7 
  Mar-2018 |         0          0          0          1          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          1          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          1 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 29aug1995  25sep1998  08jun2000  07may2004  25mar2009 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          1 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         1          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          1          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          1          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          1          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 19nov2011  03jul2012  24sep2012  13sep2013  19jul2015 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          1          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          1 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          1          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         1          0          0          1          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 22jan2018  01dec2022  14dec2022  09apr2023  26aug2023 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          1 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          1          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         1          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          1          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          1          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year | rtt_cl_ref
        of |   _date
 Diagnosis |         . |     Total
-----------+-----------+----------
  Apr-2016 |         4 |         4 
  May-2016 |         3 |         3 
  Jun-2016 |         5 |         5 
  Jul-2016 |         2 |         2 
  Aug-2016 |         2 |         2 
  Sep-2016 |         2 |         2 
  Oct-2016 |         7 |         8 
  Nov-2016 |         1 |         2 
  Dec-2016 |         2 |         2 
  Jan-2017 |         3 |         3 
  Feb-2017 |         2 |         2 
  Mar-2017 |         3 |         3 
  Apr-2017 |         2 |         2 
  May-2017 |         3 |         3 
  Jun-2017 |         3 |         3 
  Jul-2017 |         6 |         6 
  Aug-2017 |         5 |         5 
  Sep-2017 |         4 |         4 
  Oct-2017 |         1 |         2 
  Nov-2017 |         7 |         7 
  Dec-2017 |         3 |         3 
  Jan-2018 |         2 |         3 
  Feb-2018 |         6 |         7 
  Mar-2018 |         7 |         9 
  Apr-2018 |         4 |         4 
  May-2018 |         5 |         5 
  Jun-2018 |         2 |         2 
  Jul-2018 |         6 |         6 
  Aug-2018 |         4 |         4 
  Sep-2018 |         3 |         4 
  Oct-2018 |         4 |         4 
  Nov-2018 |         4 |         5 
  Dec-2018 |         3 |         3 
  Jan-2019 |         3 |         3 
  Feb-2019 |         4 |         4 
  Mar-2019 |         1 |         1 
  Apr-2019 |         4 |         5 
  May-2019 |         5 |         5 
  Jun-2019 |         6 |         6 
  Jul-2019 |         3 |         3 
  Aug-2019 |         3 |         3 
  Sep-2019 |         3 |         3 
  Oct-2019 |         1 |         3 
  Nov-2019 |         1 |         1 
  Dec-2019 |         4 |         4 
  Jan-2020 |         1 |         1 
  Feb-2020 |         9 |         9 
  Mar-2020 |         4 |         4 
  Apr-2020 |         2 |         2 
  May-2020 |         1 |         1 
  Jun-2020 |         6 |         6 
  Jul-2020 |         4 |         4 
  Aug-2020 |         2 |         2 
  Sep-2020 |         6 |         6 
  Oct-2020 |         6 |         6 
  Nov-2020 |         2 |         2 
  Dec-2020 |         4 |         4 
  Jan-2021 |         3 |         3 
  Feb-2021 |         3 |         3 
  Mar-2021 |         8 |         8 
  Apr-2021 |         5 |         5 
  May-2021 |         2 |         2 
  Jun-2021 |         6 |         6 
  Jul-2021 |         6 |         6 
  Aug-2021 |         3 |         3 
  Sep-2021 |         7 |         7 
  Oct-2021 |         5 |         5 
  Nov-2021 |         5 |         5 
  Dec-2021 |         8 |         8 
  Jan-2022 |         2 |         2 
  Feb-2022 |         5 |         5 
  Mar-2022 |         2 |         3 
  Apr-2022 |         1 |         1 
  May-2022 |         4 |         4 
  Jun-2022 |         2 |         2 
  Jul-2022 |         6 |         6 
  Sep-2022 |         2 |         3 
  Oct-2022 |         4 |         4 
  Nov-2022 |         1 |         1 
  Dec-2022 |         3 |         3 
  Jan-2023 |         3 |         3 
  Feb-2023 |         5 |         6 
  Mar-2023 |         6 |         6 
  Apr-2023 |         3 |         3 
  May-2023 |         1 |         3 
  Jun-2023 |         3 |         4 
  Aug-2023 |         3 |         3 
  Sep-2023 |         3 |         3 
  Oct-2023 |         7 |         7 
  Nov-2023 |         4 |         5 
  Dec-2023 |         6 |         6 
  Jan-2024 |         5 |         5 
  Feb-2024 |         5 |         5 
  Mar-2024 |         2 |         2 
  Apr-2024 |         5 |         5 
  May-2024 |         3 |         3 
  Jun-2024 |         4 |         4 
  Jul-2024 |         3 |         3 
  Aug-2024 |         2 |         2 
  Sep-2024 |         7 |         7 
  Oct-2024 |         2 |         2 
  Nov-2024 |         4 |         4 
  Dec-2024 |         2 |         2 
  Jan-2025 |         1 |         1 
  Feb-2025 |         2 |         2 
  Mar-2025 |         1 |         2 
-----------+-----------+----------
     Total |       390 |       410 

. tab rtt_cl_start_date, missing //check how this differs

rtt_cl_star |
     t_date |      Freq.     Percent        Cum.
------------+-----------------------------------
  31jul2016 |          1        0.24        0.24
  05nov2016 |          1        0.24        0.49
  08may2017 |          1        0.24        0.73
  08aug2017 |          1        0.24        0.98
  11aug2017 |          1        0.24        1.22
  26aug2017 |          1        0.24        1.46
  01mar2018 |          1        0.24        1.71
  02apr2018 |          1        0.24        1.95
  01jul2018 |          1        0.24        2.20
  03feb2019 |          1        0.24        2.44
  24jul2019 |          1        0.24        2.68
  10sep2019 |          1        0.24        2.93
  07oct2021 |          1        0.24        3.17
  11may2022 |          1        0.24        3.41
  23jul2022 |          1        0.24        3.66
  20oct2022 |          1        0.24        3.90
  05may2023 |          1        0.24        4.15
  22may2023 |          1        0.24        4.39
  14jul2023 |          1        0.24        4.63
  13feb2025 |          1        0.24        4.88
          . |        390       95.12      100.00
------------+-----------------------------------
      Total |        410      100.00

. 
. ***From RTT open pathway data (only available as a snapshot of those with open RTT pat
> hways as of May 2022)
. tab rtt_op_ref_date, missing

rtt_op_ref_ |
       date |      Freq.     Percent        Cum.
------------+-----------------------------------
  31may1931 |          1        0.24        0.24
  03jun1985 |          1        0.24        0.49
  21jan1998 |          1        0.24        0.73
  20feb2000 |          1        0.24        0.98
  12oct2001 |          1        0.24        1.22
  27jul2003 |          1        0.24        1.46
  27sep2008 |          1        0.24        1.71
  25mar2018 |          1        0.24        1.95
  21feb2023 |          1        0.24        2.20
  27feb2024 |          1        0.24        2.44
  23mar2024 |          1        0.24        2.68
  21oct2024 |          1        0.24        2.93
          . |        398       97.07      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab mo_year_diagn rtt_op_ref_date, missing

Month/Year |
        of |                    rtt_op_ref_date
 Diagnosis | 31may1931  03jun1985  21jan1998  20feb2000  12oct2001 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         1          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          1          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          1          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          1 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          1          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_op_ref_date
 Diagnosis | 27jul2003  27sep2008  25mar2018  21feb2023  27feb2024 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          1          0 |         3 
  Jun-2023 |         0          0          1          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         1          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          1          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          1 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |         rtt_op_ref_date
 Diagnosis | 23mar2024  21oct2024          . |     Total
-----------+---------------------------------+----------
  Apr-2016 |         0          0          4 |         4 
  May-2016 |         0          0          3 |         3 
  Jun-2016 |         0          0          5 |         5 
  Jul-2016 |         0          0          2 |         2 
  Aug-2016 |         0          0          2 |         2 
  Sep-2016 |         0          0          2 |         2 
  Oct-2016 |         0          0          8 |         8 
  Nov-2016 |         0          0          1 |         2 
  Dec-2016 |         0          0          2 |         2 
  Jan-2017 |         0          0          3 |         3 
  Feb-2017 |         0          0          2 |         2 
  Mar-2017 |         0          0          3 |         3 
  Apr-2017 |         0          0          2 |         2 
  May-2017 |         0          0          3 |         3 
  Jun-2017 |         0          0          3 |         3 
  Jul-2017 |         0          0          6 |         6 
  Aug-2017 |         0          0          5 |         5 
  Sep-2017 |         0          0          4 |         4 
  Oct-2017 |         0          0          2 |         2 
  Nov-2017 |         0          0          7 |         7 
  Dec-2017 |         0          0          3 |         3 
  Jan-2018 |         0          0          3 |         3 
  Feb-2018 |         0          0          7 |         7 
  Mar-2018 |         0          0          9 |         9 
  Apr-2018 |         0          0          4 |         4 
  May-2018 |         0          0          5 |         5 
  Jun-2018 |         0          0          2 |         2 
  Jul-2018 |         0          0          6 |         6 
  Aug-2018 |         0          0          4 |         4 
  Sep-2018 |         0          0          4 |         4 
  Oct-2018 |         0          0          4 |         4 
  Nov-2018 |         0          0          5 |         5 
  Dec-2018 |         0          0          3 |         3 
  Jan-2019 |         0          0          3 |         3 
  Feb-2019 |         0          0          4 |         4 
  Mar-2019 |         0          0          1 |         1 
  Apr-2019 |         0          0          5 |         5 
  May-2019 |         0          0          5 |         5 
  Jun-2019 |         0          0          6 |         6 
  Jul-2019 |         0          0          3 |         3 
  Aug-2019 |         0          0          3 |         3 
  Sep-2019 |         0          0          2 |         3 
  Oct-2019 |         0          0          3 |         3 
  Nov-2019 |         0          0          1 |         1 
  Dec-2019 |         0          0          3 |         4 
  Jan-2020 |         0          0          1 |         1 
  Feb-2020 |         0          0          9 |         9 
  Mar-2020 |         0          0          3 |         4 
  Apr-2020 |         0          0          2 |         2 
  May-2020 |         0          0          1 |         1 
  Jun-2020 |         0          0          6 |         6 
  Jul-2020 |         0          0          4 |         4 
  Aug-2020 |         0          0          2 |         2 
  Sep-2020 |         0          0          6 |         6 
  Oct-2020 |         0          0          6 |         6 
  Nov-2020 |         0          0          2 |         2 
  Dec-2020 |         0          0          4 |         4 
  Jan-2021 |         0          0          3 |         3 
  Feb-2021 |         0          0          3 |         3 
  Mar-2021 |         0          0          8 |         8 
  Apr-2021 |         0          0          5 |         5 
  May-2021 |         0          0          2 |         2 
  Jun-2021 |         0          0          6 |         6 
  Jul-2021 |         0          0          6 |         6 
  Aug-2021 |         0          0          3 |         3 
  Sep-2021 |         0          0          7 |         7 
  Oct-2021 |         0          0          5 |         5 
  Nov-2021 |         0          0          5 |         5 
  Dec-2021 |         0          0          8 |         8 
  Jan-2022 |         0          0          2 |         2 
  Feb-2022 |         0          0          5 |         5 
  Mar-2022 |         0          0          3 |         3 
  Apr-2022 |         0          0          1 |         1 
  May-2022 |         0          0          4 |         4 
  Jun-2022 |         0          0          2 |         2 
  Jul-2022 |         0          0          6 |         6 
  Sep-2022 |         0          0          3 |         3 
  Oct-2022 |         0          1          3 |         4 
  Nov-2022 |         1          0          0 |         1 
  Dec-2022 |         0          0          3 |         3 
  Jan-2023 |         0          0          3 |         3 
  Feb-2023 |         0          0          6 |         6 
  Mar-2023 |         0          0          6 |         6 
  Apr-2023 |         0          0          3 |         3 
  May-2023 |         0          0          2 |         3 
  Jun-2023 |         0          0          3 |         4 
  Aug-2023 |         0          0          3 |         3 
  Sep-2023 |         0          0          2 |         3 
  Oct-2023 |         0          0          7 |         7 
  Nov-2023 |         0          0          5 |         5 
  Dec-2023 |         0          0          6 |         6 
  Jan-2024 |         0          0          4 |         5 
  Feb-2024 |         0          0          5 |         5 
  Mar-2024 |         0          0          2 |         2 
  Apr-2024 |         0          0          5 |         5 
  May-2024 |         0          0          3 |         3 
  Jun-2024 |         0          0          4 |         4 
  Jul-2024 |         0          0          2 |         3 
  Aug-2024 |         0          0          2 |         2 
  Sep-2024 |         0          0          7 |         7 
  Oct-2024 |         0          0          2 |         2 
  Nov-2024 |         0          0          4 |         4 
  Dec-2024 |         0          0          1 |         2 
  Jan-2025 |         0          0          1 |         1 
  Feb-2025 |         0          0          2 |         2 
  Mar-2025 |         0          0          2 |         2 
-----------+---------------------------------+----------
     Total |         1          1        398 |       410 

. tab mo_year_diagn rtt_op_ref_date if rheum_appt!=., missing

Month/Year |
        of |                    rtt_op_ref_date
 Diagnosis | 31may1931  03jun1985  21jan1998  20feb2000  12oct2001 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         1          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          1          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          1          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          1 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          1          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_op_ref_date
 Diagnosis | 27jul2003  27sep2008  25mar2018  21feb2023  27feb2024 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          1          0 |         3 
  Jun-2023 |         0          0          1          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         1          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          1          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          1 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |         rtt_op_ref_date
 Diagnosis | 23mar2024  21oct2024          . |     Total
-----------+---------------------------------+----------
  Apr-2016 |         0          0          4 |         4 
  May-2016 |         0          0          3 |         3 
  Jun-2016 |         0          0          5 |         5 
  Jul-2016 |         0          0          2 |         2 
  Aug-2016 |         0          0          2 |         2 
  Sep-2016 |         0          0          2 |         2 
  Oct-2016 |         0          0          8 |         8 
  Nov-2016 |         0          0          1 |         2 
  Dec-2016 |         0          0          2 |         2 
  Jan-2017 |         0          0          3 |         3 
  Feb-2017 |         0          0          2 |         2 
  Mar-2017 |         0          0          3 |         3 
  Apr-2017 |         0          0          2 |         2 
  May-2017 |         0          0          3 |         3 
  Jun-2017 |         0          0          3 |         3 
  Jul-2017 |         0          0          6 |         6 
  Aug-2017 |         0          0          5 |         5 
  Sep-2017 |         0          0          4 |         4 
  Oct-2017 |         0          0          2 |         2 
  Nov-2017 |         0          0          7 |         7 
  Dec-2017 |         0          0          3 |         3 
  Jan-2018 |         0          0          3 |         3 
  Feb-2018 |         0          0          7 |         7 
  Mar-2018 |         0          0          9 |         9 
  Apr-2018 |         0          0          4 |         4 
  May-2018 |         0          0          5 |         5 
  Jun-2018 |         0          0          2 |         2 
  Jul-2018 |         0          0          6 |         6 
  Aug-2018 |         0          0          4 |         4 
  Sep-2018 |         0          0          4 |         4 
  Oct-2018 |         0          0          4 |         4 
  Nov-2018 |         0          0          5 |         5 
  Dec-2018 |         0          0          3 |         3 
  Jan-2019 |         0          0          3 |         3 
  Feb-2019 |         0          0          4 |         4 
  Mar-2019 |         0          0          1 |         1 
  Apr-2019 |         0          0          5 |         5 
  May-2019 |         0          0          5 |         5 
  Jun-2019 |         0          0          6 |         6 
  Jul-2019 |         0          0          3 |         3 
  Aug-2019 |         0          0          3 |         3 
  Sep-2019 |         0          0          2 |         3 
  Oct-2019 |         0          0          3 |         3 
  Nov-2019 |         0          0          1 |         1 
  Dec-2019 |         0          0          3 |         4 
  Jan-2020 |         0          0          1 |         1 
  Feb-2020 |         0          0          9 |         9 
  Mar-2020 |         0          0          3 |         4 
  Apr-2020 |         0          0          2 |         2 
  May-2020 |         0          0          1 |         1 
  Jun-2020 |         0          0          6 |         6 
  Jul-2020 |         0          0          4 |         4 
  Aug-2020 |         0          0          2 |         2 
  Sep-2020 |         0          0          6 |         6 
  Oct-2020 |         0          0          6 |         6 
  Nov-2020 |         0          0          2 |         2 
  Dec-2020 |         0          0          4 |         4 
  Jan-2021 |         0          0          3 |         3 
  Feb-2021 |         0          0          3 |         3 
  Mar-2021 |         0          0          8 |         8 
  Apr-2021 |         0          0          5 |         5 
  May-2021 |         0          0          2 |         2 
  Jun-2021 |         0          0          6 |         6 
  Jul-2021 |         0          0          6 |         6 
  Aug-2021 |         0          0          3 |         3 
  Sep-2021 |         0          0          7 |         7 
  Oct-2021 |         0          0          5 |         5 
  Nov-2021 |         0          0          5 |         5 
  Dec-2021 |         0          0          8 |         8 
  Jan-2022 |         0          0          2 |         2 
  Feb-2022 |         0          0          5 |         5 
  Mar-2022 |         0          0          3 |         3 
  Apr-2022 |         0          0          1 |         1 
  May-2022 |         0          0          4 |         4 
  Jun-2022 |         0          0          2 |         2 
  Jul-2022 |         0          0          6 |         6 
  Sep-2022 |         0          0          3 |         3 
  Oct-2022 |         0          1          3 |         4 
  Nov-2022 |         1          0          0 |         1 
  Dec-2022 |         0          0          3 |         3 
  Jan-2023 |         0          0          3 |         3 
  Feb-2023 |         0          0          6 |         6 
  Mar-2023 |         0          0          6 |         6 
  Apr-2023 |         0          0          3 |         3 
  May-2023 |         0          0          2 |         3 
  Jun-2023 |         0          0          3 |         4 
  Aug-2023 |         0          0          3 |         3 
  Sep-2023 |         0          0          2 |         3 
  Oct-2023 |         0          0          7 |         7 
  Nov-2023 |         0          0          5 |         5 
  Dec-2023 |         0          0          6 |         6 
  Jan-2024 |         0          0          4 |         5 
  Feb-2024 |         0          0          5 |         5 
  Mar-2024 |         0          0          2 |         2 
  Apr-2024 |         0          0          5 |         5 
  May-2024 |         0          0          3 |         3 
  Jun-2024 |         0          0          4 |         4 
  Jul-2024 |         0          0          2 |         3 
  Aug-2024 |         0          0          2 |         2 
  Sep-2024 |         0          0          7 |         7 
  Oct-2024 |         0          0          2 |         2 
  Nov-2024 |         0          0          4 |         4 
  Dec-2024 |         0          0          1 |         2 
  Jan-2025 |         0          0          1 |         1 
  Feb-2025 |         0          0          2 |         2 
  Mar-2025 |         0          0          2 |         2 
-----------+---------------------------------+----------
     Total |         1          1        398 |       410 

. tab rtt_op_start_date, missing //check how this differs

rtt_op_star |
     t_date |      Freq.     Percent        Cum.
------------+-----------------------------------
  08nov2015 |          1        0.24        0.24
  07may2019 |          1        0.24        0.49
  15jul2019 |          1        0.24        0.73
  20jul2019 |          1        0.24        0.98
  15mar2022 |          1        0.24        1.22
  22jul2022 |          1        0.24        1.46
  30nov2022 |          1        0.24        1.71
  30mar2023 |          1        0.24        1.95
  18sep2023 |          1        0.24        2.20
  08nov2023 |          1        0.24        2.44
  22apr2024 |          1        0.24        2.68
  01aug2024 |          1        0.24        2.93
          . |        398       97.07      100.00
------------+-----------------------------------
      Total |        410      100.00

. 
. ***Combination of RTT clock-stop and open pathway
. gen rtt_ref_date = rtt_cl_ref_date
(390 missing values generated)

. replace rtt_ref_date = rtt_op_ref_date if rtt_cl_ref_date==. & rtt_op_ref_date!=. //ne
> ed to think how to handle duplicate pathways
(12 real changes made)

. tab rtt_ref_date, missing

rtt_ref_dat |
          e |      Freq.     Percent        Cum.
------------+-----------------------------------
     -13098 |          1        0.24        0.24
     -10442 |          1        0.24        0.49
      -7910 |          1        0.24        0.73
      -3247 |          1        0.24        0.98
      -1780 |          1        0.24        1.22
       3264 |          1        0.24        1.46
       9285 |          1        0.24        1.71
      13024 |          1        0.24        1.95
      13900 |          1        0.24        2.20
      14147 |          1        0.24        2.44
      14660 |          1        0.24        2.68
      14769 |          1        0.24        2.93
      15260 |          1        0.24        3.17
      15913 |          1        0.24        3.41
      16198 |          1        0.24        3.66
      17802 |          1        0.24        3.90
      17981 |          1        0.24        4.15
      18950 |          1        0.24        4.39
      19177 |          1        0.24        4.63
      19260 |          1        0.24        4.88
      19614 |          1        0.24        5.12
      20288 |          1        0.24        5.37
      21206 |          1        0.24        5.61
      21268 |          1        0.24        5.85
      22980 |          1        0.24        6.10
      22993 |          1        0.24        6.34
      23062 |          1        0.24        6.59
      23109 |          1        0.24        6.83
      23248 |          1        0.24        7.07
      23433 |          1        0.24        7.32
      23458 |          1        0.24        7.56
      23670 |          1        0.24        7.80
          . |        378       92.20      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab mo_year_diagn rtt_ref_date, missing

Month/Year |
        of |                      rtt_ref_date
 Diagnosis |    -13098     -10442      -7910      -3247      -1780 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          1          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         1          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          1          0 |         7 
  Mar-2018 |         0          0          0          0          1 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          1          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |      3264       9285      13024      13900      14147 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          1          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          1          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         1          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          1          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          1 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     14660      14769      15260      15913      16198 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         1          0          0          0          0 |         3 
  Oct-2019 |         0          1          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          1          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          1 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          1          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     17802      17981      18950      19177      19260 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          1          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          1          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          1 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          1          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         1          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     19614      20288      21206      21268      22980 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          1 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          1          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          1          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         1          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          1          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     22993      23062      23109      23248      23433 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          1          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         1          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          1          0          0          0 |         3 
  Jun-2023 |         0          0          1          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          1 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |           rtt_ref_date
 Diagnosis |     23458      23670          . |     Total
-----------+---------------------------------+----------
  Apr-2016 |         0          0          4 |         4 
  May-2016 |         0          0          3 |         3 
  Jun-2016 |         0          0          5 |         5 
  Jul-2016 |         0          0          2 |         2 
  Aug-2016 |         0          0          2 |         2 
  Sep-2016 |         0          0          2 |         2 
  Oct-2016 |         0          0          7 |         8 
  Nov-2016 |         0          0          0 |         2 
  Dec-2016 |         0          0          2 |         2 
  Jan-2017 |         0          0          3 |         3 
  Feb-2017 |         0          0          2 |         2 
  Mar-2017 |         0          0          3 |         3 
  Apr-2017 |         0          0          2 |         2 
  May-2017 |         0          0          3 |         3 
  Jun-2017 |         0          0          3 |         3 
  Jul-2017 |         0          0          6 |         6 
  Aug-2017 |         0          0          5 |         5 
  Sep-2017 |         0          0          4 |         4 
  Oct-2017 |         0          0          1 |         2 
  Nov-2017 |         0          0          7 |         7 
  Dec-2017 |         0          0          3 |         3 
  Jan-2018 |         0          0          2 |         3 
  Feb-2018 |         0          0          6 |         7 
  Mar-2018 |         0          0          7 |         9 
  Apr-2018 |         0          0          4 |         4 
  May-2018 |         0          0          5 |         5 
  Jun-2018 |         0          0          2 |         2 
  Jul-2018 |         0          0          6 |         6 
  Aug-2018 |         0          0          4 |         4 
  Sep-2018 |         0          0          3 |         4 
  Oct-2018 |         0          0          4 |         4 
  Nov-2018 |         0          0          4 |         5 
  Dec-2018 |         0          0          3 |         3 
  Jan-2019 |         0          0          3 |         3 
  Feb-2019 |         0          0          4 |         4 
  Mar-2019 |         0          0          1 |         1 
  Apr-2019 |         0          0          4 |         5 
  May-2019 |         0          0          5 |         5 
  Jun-2019 |         0          0          6 |         6 
  Jul-2019 |         0          0          3 |         3 
  Aug-2019 |         0          0          3 |         3 
  Sep-2019 |         0          0          2 |         3 
  Oct-2019 |         0          0          1 |         3 
  Nov-2019 |         0          0          1 |         1 
  Dec-2019 |         0          0          3 |         4 
  Jan-2020 |         0          0          1 |         1 
  Feb-2020 |         0          0          9 |         9 
  Mar-2020 |         0          0          3 |         4 
  Apr-2020 |         0          0          2 |         2 
  May-2020 |         0          0          1 |         1 
  Jun-2020 |         0          0          6 |         6 
  Jul-2020 |         0          0          4 |         4 
  Aug-2020 |         0          0          2 |         2 
  Sep-2020 |         0          0          6 |         6 
  Oct-2020 |         0          0          6 |         6 
  Nov-2020 |         0          0          2 |         2 
  Dec-2020 |         0          0          4 |         4 
  Jan-2021 |         0          0          3 |         3 
  Feb-2021 |         0          0          3 |         3 
  Mar-2021 |         0          0          8 |         8 
  Apr-2021 |         0          0          5 |         5 
  May-2021 |         0          0          2 |         2 
  Jun-2021 |         0          0          6 |         6 
  Jul-2021 |         0          0          6 |         6 
  Aug-2021 |         0          0          3 |         3 
  Sep-2021 |         0          0          7 |         7 
  Oct-2021 |         0          0          5 |         5 
  Nov-2021 |         0          0          5 |         5 
  Dec-2021 |         0          0          8 |         8 
  Jan-2022 |         0          0          2 |         2 
  Feb-2022 |         0          0          5 |         5 
  Mar-2022 |         0          0          2 |         3 
  Apr-2022 |         0          0          1 |         1 
  May-2022 |         0          0          4 |         4 
  Jun-2022 |         0          0          2 |         2 
  Jul-2022 |         0          0          6 |         6 
  Sep-2022 |         0          0          2 |         3 
  Oct-2022 |         0          1          3 |         4 
  Nov-2022 |         1          0          0 |         1 
  Dec-2022 |         0          0          3 |         3 
  Jan-2023 |         0          0          3 |         3 
  Feb-2023 |         0          0          5 |         6 
  Mar-2023 |         0          0          6 |         6 
  Apr-2023 |         0          0          3 |         3 
  May-2023 |         0          0          0 |         3 
  Jun-2023 |         0          0          2 |         4 
  Aug-2023 |         0          0          3 |         3 
  Sep-2023 |         0          0          2 |         3 
  Oct-2023 |         0          0          7 |         7 
  Nov-2023 |         0          0          4 |         5 
  Dec-2023 |         0          0          6 |         6 
  Jan-2024 |         0          0          4 |         5 
  Feb-2024 |         0          0          5 |         5 
  Mar-2024 |         0          0          2 |         2 
  Apr-2024 |         0          0          5 |         5 
  May-2024 |         0          0          3 |         3 
  Jun-2024 |         0          0          4 |         4 
  Jul-2024 |         0          0          2 |         3 
  Aug-2024 |         0          0          2 |         2 
  Sep-2024 |         0          0          7 |         7 
  Oct-2024 |         0          0          2 |         2 
  Nov-2024 |         0          0          4 |         4 
  Dec-2024 |         0          0          1 |         2 
  Jan-2025 |         0          0          1 |         1 
  Feb-2025 |         0          0          2 |         2 
  Mar-2025 |         0          0          1 |         2 
-----------+---------------------------------+----------
     Total |         1          1        378 |       410 

. tab mo_year_diagn rtt_ref_date if rheum_appt!=., missing

Month/Year |
        of |                      rtt_ref_date
 Diagnosis |    -13098     -10442      -7910      -3247      -1780 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          1          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         1          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          1          0 |         7 
  Mar-2018 |         0          0          0          0          1 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          1          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |      3264       9285      13024      13900      14147 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          1          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          1          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         1          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          1          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          1 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     14660      14769      15260      15913      16198 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         1          0          0          0          0 |         3 
  Oct-2019 |         0          1          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          1          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          1 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          1          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     17802      17981      18950      19177      19260 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          1          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          1          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          1 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          1          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         1          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     19614      20288      21206      21268      22980 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          1 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          1          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          1          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         1          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          1          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     22993      23062      23109      23248      23433 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          1          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         1          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          1          0          0          0 |         3 
  Jun-2023 |         0          0          1          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          1 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |           rtt_ref_date
 Diagnosis |     23458      23670          . |     Total
-----------+---------------------------------+----------
  Apr-2016 |         0          0          4 |         4 
  May-2016 |         0          0          3 |         3 
  Jun-2016 |         0          0          5 |         5 
  Jul-2016 |         0          0          2 |         2 
  Aug-2016 |         0          0          2 |         2 
  Sep-2016 |         0          0          2 |         2 
  Oct-2016 |         0          0          7 |         8 
  Nov-2016 |         0          0          0 |         2 
  Dec-2016 |         0          0          2 |         2 
  Jan-2017 |         0          0          3 |         3 
  Feb-2017 |         0          0          2 |         2 
  Mar-2017 |         0          0          3 |         3 
  Apr-2017 |         0          0          2 |         2 
  May-2017 |         0          0          3 |         3 
  Jun-2017 |         0          0          3 |         3 
  Jul-2017 |         0          0          6 |         6 
  Aug-2017 |         0          0          5 |         5 
  Sep-2017 |         0          0          4 |         4 
  Oct-2017 |         0          0          1 |         2 
  Nov-2017 |         0          0          7 |         7 
  Dec-2017 |         0          0          3 |         3 
  Jan-2018 |         0          0          2 |         3 
  Feb-2018 |         0          0          6 |         7 
  Mar-2018 |         0          0          7 |         9 
  Apr-2018 |         0          0          4 |         4 
  May-2018 |         0          0          5 |         5 
  Jun-2018 |         0          0          2 |         2 
  Jul-2018 |         0          0          6 |         6 
  Aug-2018 |         0          0          4 |         4 
  Sep-2018 |         0          0          3 |         4 
  Oct-2018 |         0          0          4 |         4 
  Nov-2018 |         0          0          4 |         5 
  Dec-2018 |         0          0          3 |         3 
  Jan-2019 |         0          0          3 |         3 
  Feb-2019 |         0          0          4 |         4 
  Mar-2019 |         0          0          1 |         1 
  Apr-2019 |         0          0          4 |         5 
  May-2019 |         0          0          5 |         5 
  Jun-2019 |         0          0          6 |         6 
  Jul-2019 |         0          0          3 |         3 
  Aug-2019 |         0          0          3 |         3 
  Sep-2019 |         0          0          2 |         3 
  Oct-2019 |         0          0          1 |         3 
  Nov-2019 |         0          0          1 |         1 
  Dec-2019 |         0          0          3 |         4 
  Jan-2020 |         0          0          1 |         1 
  Feb-2020 |         0          0          9 |         9 
  Mar-2020 |         0          0          3 |         4 
  Apr-2020 |         0          0          2 |         2 
  May-2020 |         0          0          1 |         1 
  Jun-2020 |         0          0          6 |         6 
  Jul-2020 |         0          0          4 |         4 
  Aug-2020 |         0          0          2 |         2 
  Sep-2020 |         0          0          6 |         6 
  Oct-2020 |         0          0          6 |         6 
  Nov-2020 |         0          0          2 |         2 
  Dec-2020 |         0          0          4 |         4 
  Jan-2021 |         0          0          3 |         3 
  Feb-2021 |         0          0          3 |         3 
  Mar-2021 |         0          0          8 |         8 
  Apr-2021 |         0          0          5 |         5 
  May-2021 |         0          0          2 |         2 
  Jun-2021 |         0          0          6 |         6 
  Jul-2021 |         0          0          6 |         6 
  Aug-2021 |         0          0          3 |         3 
  Sep-2021 |         0          0          7 |         7 
  Oct-2021 |         0          0          5 |         5 
  Nov-2021 |         0          0          5 |         5 
  Dec-2021 |         0          0          8 |         8 
  Jan-2022 |         0          0          2 |         2 
  Feb-2022 |         0          0          5 |         5 
  Mar-2022 |         0          0          2 |         3 
  Apr-2022 |         0          0          1 |         1 
  May-2022 |         0          0          4 |         4 
  Jun-2022 |         0          0          2 |         2 
  Jul-2022 |         0          0          6 |         6 
  Sep-2022 |         0          0          2 |         3 
  Oct-2022 |         0          1          3 |         4 
  Nov-2022 |         1          0          0 |         1 
  Dec-2022 |         0          0          3 |         3 
  Jan-2023 |         0          0          3 |         3 
  Feb-2023 |         0          0          5 |         6 
  Mar-2023 |         0          0          6 |         6 
  Apr-2023 |         0          0          3 |         3 
  May-2023 |         0          0          0 |         3 
  Jun-2023 |         0          0          2 |         4 
  Aug-2023 |         0          0          3 |         3 
  Sep-2023 |         0          0          2 |         3 
  Oct-2023 |         0          0          7 |         7 
  Nov-2023 |         0          0          4 |         5 
  Dec-2023 |         0          0          6 |         6 
  Jan-2024 |         0          0          4 |         5 
  Feb-2024 |         0          0          5 |         5 
  Mar-2024 |         0          0          2 |         2 
  Apr-2024 |         0          0          5 |         5 
  May-2024 |         0          0          3 |         3 
  Jun-2024 |         0          0          4 |         4 
  Jul-2024 |         0          0          2 |         3 
  Aug-2024 |         0          0          2 |         2 
  Sep-2024 |         0          0          7 |         7 
  Oct-2024 |         0          0          2 |         2 
  Nov-2024 |         0          0          4 |         4 
  Dec-2024 |         0          0          1 |         2 
  Jan-2025 |         0          0          1 |         1 
  Feb-2025 |         0          0          2 |         2 
  Mar-2025 |         0          0          1 |         2 
-----------+---------------------------------+----------
     Total |         1          1        378 |       410 

. 
. ***From clinical events (Nb. low capture of coded rheumatology referrals in clinical e
> vents at present)
. tab rheum_ref_GP_preappt, missing //last rheum referral in the 2 years before rheumato
> logy outpatient (requires rheum appt to have been present)
variable rheum_ref_GP_preappt not found
r(111);

end of do-file

r(111);

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. tab rheum_ref_GP_preappt, missing //last rheum referral in the 2 years before rheumato
> logy outpatient (requires rheum appt to have been present)
variable rheum_ref_GP_preappt not found
r(111);

end of do-file

r(111);

. do "C:\Users\k1754142\AppData\Local\Temp\STD1628_000000.tmp"

. import delimited "$projectdir/output/dataset.csv", clear
(encoding automatically selected: ISO-8859-1)
(88 vars, 427 obs)

. 
. **Set Ado file path
. adopath + "$projectdir/analysis/extra_ados"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\documents/"
  [5]  (PLUS)      "C:\users\PUBLIC\documents/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/an
> alysis/extra_ados"
  [8]              "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY NEIAA\inflammatory
> _rheum/analysis/extra_ados"

. 
. **Set index dates ===========================================================*/
. global year_preceding = "01/04/2015"

. global start_date = "01/04/2016" //for outpatient analyses, data may only be available
>  from April 2019

. global end_date = "31/03/2025"

. global base_year = year(date("$start_date", "DMY"))

. global end_year = year(date("$end_date", "DMY"))

. global max_year = $end_year - $base_year

. 
. **Conversion for dates====================================================*
. ***Variables ending in _date that are string
. ds *_date, has(type string)
eia_code_d~e  cva_before~e  chd_after_~e  depr_after~e  rheum~3_date  hydroxychl~e
ra_code_date  lung_ca_be~e  dm_after_d~e  osteop_aft~e  rheum~4_date  rtt_cl_sta~e
psa_code_d~e  solid_ca_b~e  ild_after_~e  dem_after_~e  rheum~e_date  rtt_cl_ref~e
anksp_code~e  haem_ca_be~e  copd_after~e  creatinin~te  ~erheum_date  rtt_cl_end~e
undiff_cod~e  ckd_before~e  cva_after_~e  rf_date       l~ecode_date  rtt_op_sta~e
chd_before~e  depr_befor~e  lung_ca_af~e  r~_appt_date  leflunomid~e  rtt_op_ref~e
dm_before_~e  osteop_bef~e  solid_ca_a~e  rheum~f_date  metho~e_date  rtt_op_end~e
ild_before~e  frac_befor~e  haem_ca_af~e  rheum~y_date  metho~j_date
copd_befor~e  dem_before~e  ckd_after_~e  rheum~2_date  sulfasalaz~e

. local string_dates `r(varlist)'

. foreach var of local string_dates {
  2.     gen `var'_num = date(`var', "YMD")
  3.     format `var'_num %td
  4.     order `var'_num, after(`var')
  5.     drop `var'
  6.     rename `var'_num `var'
  7. }
(88 missing values generated)
(387 missing values generated)
(390 missing values generated)
(416 missing values generated)
(354 missing values generated)
(385 missing values generated)
(353 missing values generated)
(414 missing values generated)
(371 missing values generated)
(335 missing values generated)
(44 missing values generated)
(240 missing values generated)
(337 missing values generated)
(404 missing values generated)
(422 missing values generated)
(425 missing values generated)
(348 missing values generated)
(416 missing values generated)
(425 missing values generated)
(421 missing values generated)
(425 missing values generated)
(418 missing values generated)
(417 missing values generated)
(294 missing values generated)
(395 missing values generated)
(418 missing values generated)
(421 missing values generated)
(425 missing values generated)
(416 missing values generated)
(424 missing values generated)
(425 missing values generated)
(422 missing values generated)
(422 missing values generated)
(410 missing values generated)
(418 missing values generated)
(404 missing values generated)
(390 missing values generated)
(426 missing values generated)
(426 missing values generated)
(394 missing values generated)
(312 missing values generated)
(239 missing values generated)
(160 missing values generated)
(296 missing values generated)
(254 missing values generated)
(406 missing values generated)
(406 missing values generated)
(406 missing values generated)
(414 missing values generated)
(414 missing values generated)
(414 missing values generated)

. 
. ***Variables ending in _date that are numeric
. foreach var of varlist *_date {
  2.     capture confirm string variable `var'
  3.     if _rc != 0 {
  4.         format `var' %td
  5.     }
  6. }

. 
. ***Create binary indicator for each
. ds *_date
eia_code_d~e  lung_ca_be~e  ild_after_~e  dem_after_~e  r~eappt_date  hydroxychl~e
ra_code_date  solid_ca_b~e  copd_after~e  creatinin~te  rheum~e_date  rtt_cl_sta~e
psa_code_d~e  haem_ca_be~e  cva_after_~e  rf_date       ~erheum_date  rtt_cl_ref~e
anksp_code~e  ckd_before~e  lung_ca_af~e  bmi_date      l~ecode_date  rtt_cl_end~e
undiff_cod~e  depr_befor~e  solid_ca_a~e  r~_appt_date  ~frheum_date  rtt_op_sta~e
chd_before~e  osteop_bef~e  haem_ca_af~e  rheum~f_date  l~fcode_date  rtt_op_ref~e
dm_before_~e  frac_befor~e  ckd_after_~e  rheum~y_date  leflunomid~e  rtt_op_end~e
ild_before~e  dem_before~e  depr_after~e  rheum~2_date  metho~e_date
copd_befor~e  chd_after_~e  osteop_aft~e  rheum~3_date  metho~j_date
cva_before~e  dm_after_d~e  frac_after~e  rheum~4_date  sulfasalaz~e

. local dates `r(varlist)'

. foreach var of local dates {
  2.         local newvar =  substr("`var'", 1, length("`var'") - 5)
  3.         gen `newvar' = (`var'!=. )
  4.         order `newvar', after(`var')
  5. }

. 
. /*
> **Will also need to amend conversion for biologic dates ==============================
> ======================*
> ***Some dates are given with month/year only, so adding day 15 to enable them to be pr
> ocessed as dates 
> 
> foreach var of varlist   abatacept_date                                         ///
>                                                  adalimumab_date                      
>                   ///     
>                                                  baricitinib_date                     
>                   ///
>                                                  certolizumab_date                    
>                   ///
>                                                  etanercept_date                      
>                   ///
>                                                  golimumab_date                       
>                   ///
>                                                  guselkumab_date                      
>                   ///     
>                                                  infliximab_date                      
>                   ///
>                                                  ixekizumab_date                      
>                   ///
>                                                  methotrexate_hcd_date                
>           ///
>                                                  rituximab_date                       
>                   ///
>                                                  sarilumab_date                       
>                   ///
>                                                  secukinumab_date                     
>                   ///     
>                                                  tocilizumab_date                     
>                   ///
>                                                  tofacitinib_date                     
>                   ///
>                                                  upadacitinib_date                    
>                   ///
>                                                  ustekinumab_date                     
>                   ///
>                                                  {
>                                                         
>                 capture confirm string variable `var'
>                 if _rc!=0 {
>                         assert `var'==.
>                         rename `var' `var'_date
>                 }
>         
>                 else {
>                                 replace `var' = `var' + "-15"
>                                 rename `var' `var'_dstr
>                                 replace `var'_dstr = " " if `var'_dstr == "-15"
>                                 gen `var'_date = date(`var'_dstr, "YMD") 
>                                 order `var'_date, after(`var'_dstr)
>                                 drop `var'_dstr
>                 }
>         
>         format `var'_date %td
> }
> */
.                                          
. **Create and label variables =========================================================
> ==*/
. 
. ***Age variables
. *Create categorised age
. drop if age<18 & age !=.
(0 observations deleted)

. drop if age>109 & age !=.
(5 observations deleted)

. drop if age==.
(0 observations deleted)

. lab var age "Age at diagnosis"

. 
. recode age 18/39.9999 = 1 /// 
>            40/49.9999 = 2 ///
>                    50/59.9999 = 3 ///
>                60/69.9999 = 4 ///
>                    70/79.9999 = 5 ///
>                    80/max = 6, gen(agegroup) 
(422 differences between age and agegroup)

. 
. label define agegroup   1 "18-39" ///
>                                                 2 "40-49" ///
>                                                 3 "50-59" ///
>                                                 4 "60-69" ///
>                                                 5 "70-79" ///
>                                                 6 "80+"

.                                                 
. label values agegroup agegroup

. lab var agegroup "Age group"

. tab agegroup, missing

  Age group |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-39 |        187       44.31       44.31
      40-49 |         58       13.74       58.06
      50-59 |         37        8.77       66.82
      60-69 |         30        7.11       73.93
      70-79 |         37        8.77       82.70
        80+ |         73       17.30      100.00
------------+-----------------------------------
      Total |        422      100.00

. order agegroup, after(age)

. 
. ***Sex
. gen male = 1 if sex == "male"
(220 missing values generated)

. replace male = 0 if sex == "female"
(220 real changes made)

. lab var male "Male"

. lab define male 0 "No" 1 "Yes", modify

. lab val male male

. tab male, missing

       Male |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        220       52.13       52.13
        Yes |        202       47.87      100.00
------------+-----------------------------------
      Total |        422      100.00

. order male, after(sex)

. 
. ***Ethnicity
. gen ethnicity_n = 1 if ethnicity == "White"
(394 missing values generated)

. replace ethnicity_n = 2 if ethnicity == "Asian or Asian British"
(20 real changes made)

. replace ethnicity_n = 3 if ethnicity == "Black or Black British"
(31 real changes made)

. replace ethnicity_n = 4 if ethnicity == "Mixed"
(13 real changes made)

. replace ethnicity_n = 5 if ethnicity == "Chinese or Other Ethnic Groups"
(31 real changes made)

. replace ethnicity_n = 6 if ethnicity == "Unknown"
(299 real changes made)

. 
. 
. label define ethnicity_n        1 "White"                                             
>   ///
>                                                         2 "Asian or Asian British"    
>           ///
>                                                         3 "Black or Black British"    
>   ///
>                                                         4 "Mixed"                     
>                           ///
>                                                         5 "Chinese or Other Ethnic Gro
> ups" ///
>                                                         6 "Not known", modify

.                                                         
. label values ethnicity_n ethnicity_n

. lab var ethnicity_n "Ethnicity"

. tab ethnicity_n, missing

                     Ethnicity |      Freq.     Percent        Cum.
-------------------------------+-----------------------------------
                         White |         28        6.64        6.64
        Asian or Asian British |         20        4.74       11.37
        Black or Black British |         31        7.35       18.72
                         Mixed |         13        3.08       21.80
Chinese or Other Ethnic Groups |         31        7.35       29.15
                     Not known |        299       70.85      100.00
-------------------------------+-----------------------------------
                         Total |        422      100.00

. drop ethnicity

. rename ethnicity_n ethnicity 

. 
. ***Practice regions
. encode region, gen(nuts_region)

. tab region, missing

                  region |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
                         |         96       22.75       22.75
                    East |         47       11.14       33.89
           East Midlands |         27        6.40       40.28
                  London |         34        8.06       48.34
              North East |         34        8.06       56.40
              North West |         31        7.35       63.74
              South East |         35        8.29       72.04
              South West |         40        9.48       81.52
           West Midlands |         40        9.48       91.00
Yorkshire and The Humber |         38        9.00      100.00
-------------------------+-----------------------------------
                   Total |        422      100.00

. replace region="Not known" if region==""
(96 real changes made)

. gen region_nospace=region

. replace region_nospace="SouthWest" if region=="South West"
(40 real changes made)

. replace region_nospace="EastMidlands" if region=="East Midlands"
(27 real changes made)

. replace region_nospace="East" if region=="East"
(0 real changes made)

. replace region_nospace="London" if region=="London"
(0 real changes made)

. replace region_nospace="NorthEast" if region=="North East"
(34 real changes made)

. replace region_nospace="NorthWest" if region=="North West"
(31 real changes made)

. replace region_nospace="SouthEast" if region=="South East"
(35 real changes made)

. replace region_nospace="WestMidlands" if region=="West Midlands"
(40 real changes made)

. replace region_nospace="YorkshireandTheHumber" if region=="Yorkshire and The Humber"
(38 real changes made)

. 
. ***IMD
. gen imd = 1 if imd_quintile == "1 (most deprived)"
(351 missing values generated)

. replace imd = 2 if imd_quintile == "2"
(68 real changes made)

. replace imd = 3 if imd_quintile == "3"
(64 real changes made)

. replace imd = 4 if imd_quintile == "4"
(63 real changes made)

. replace imd = 5 if imd_quintile == "5 (least deprived)"
(58 real changes made)

. replace imd = .u if imd_quintile == "Unknown"
(98 real changes made, 98 to missing)

. lab var imd "Index of multiple deprivation"

. lab define imd 1 "1 (most deprived)" ///
>                            2 "2" ///
>                            3 "3" ///
>                            4 "4" ///
>                            5 "5 (least deprived)" ///
>                            .u "Not known"

. lab val imd imd                    

. tab imd, missing

 Index of multiple |
       deprivation |      Freq.     Percent        Cum.
-------------------+-----------------------------------
 1 (most deprived) |         71       16.82       16.82
                 2 |         68       16.11       32.94
                 3 |         64       15.17       48.10
                 4 |         63       14.93       63.03
5 (least deprived) |         58       13.74       76.78
         Not known |         98       23.22      100.00
-------------------+-----------------------------------
             Total |        422      100.00

. drop imd_quintile

. 
. ***Body Mass Index
. *Recode strange values 
. replace bmi_value = . if bmi_value == 0 
(0 real changes made)

. replace bmi_value = . if !inrange(bmi_value, 10, 80)
(0 real changes made)

. 
. *Restrict to within 10 years of EIA diagnosis date and aged>16 
. gen bmi_time = (eia_code_date - bmi_date)/365.25
(422 missing values generated)

. gen bmi_age = age - bmi_time
(422 missing values generated)

. replace bmi_value = . if bmi_age < 16 
(0 real changes made)

. replace bmi_value = . if bmi_time > 10 & bmi_time != . 
(0 real changes made)

. 
. *Set to missing if no date, and vice versa 
. replace bmi_value = . if bmi_date == . 
(0 real changes made)

. replace bmi_date = . if bmi_value == . 
(0 real changes made)

. replace bmi_time = . if bmi_value == . 
(0 real changes made)

. replace bmi_age = . if bmi_value == . 
(0 real changes made)

. 
. *Create BMI categories
. gen     bmicat = .
(422 missing values generated)

. recode  bmicat . = 1 if bmi_value < 18.5
(0 changes made to bmicat)

. recode  bmicat . = 2 if bmi_value < 25
(0 changes made to bmicat)

. recode  bmicat . = 3 if bmi_value < 30
(0 changes made to bmicat)

. recode  bmicat . = 4 if bmi_value < 35
(0 changes made to bmicat)

. recode  bmicat . = 5 if bmi_value < 40
(0 changes made to bmicat)

. recode  bmicat . = 6 if bmi_value < .
(0 changes made to bmicat)

. replace bmicat = .u if bmi_value >= .
(422 real changes made, 422 to missing)

. 
. label define bmicat 1 "Underweight (<18.5)"     ///
>                                         2 "Normal (18.5-24.9)"          ///
>                                         3 "Overweight (25-29.9)"        ///
>                                         4 "Obese I (30-34.9)"           ///
>                                         5 "Obese II (35-39.9)"          ///
>                                         6 "Obese III (40+)"                     ///
>                                         .u "Not known"

.                                         
. label values bmicat bmicat

. lab var bmicat "BMI"

. tab bmicat, missing

                 BMI |      Freq.     Percent        Cum.
---------------------+-----------------------------------
           Not known |        422      100.00      100.00
---------------------+-----------------------------------
               Total |        422      100.00

. order bmicat, after (bmi_value)

. drop bmi_age bmi_time

. 
. *Create less granular categorisation
. recode bmicat 1/3 .u = 1 4 = 2 5 = 3 6 = 4, gen(obese4cat)
(422 differences between bmicat and obese4cat)

. 
. label define obese4cat  1 "No record of obesity"        ///
>                                                 2 "Obese I (30-34.9)"           ///
>                                                 3 "Obese II (35-39.9)"          ///
>                                                 4 "Obese III (40+)"             

. 
. label values obese4cat obese4cat

. order obese4cat, after(bmicat)

. 
. ***Smoking 
. label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Not known"

. 
. gen     smoke = 1  if smoking_status == "N"
(421 missing values generated)

. replace smoke = 2  if smoking_status == "E"
(163 real changes made)

. replace smoke = 3  if smoking_status == "S"
(257 real changes made)

. replace smoke = .u if smoking_status == "M"
(1 real change made, 1 to missing)

. replace smoke = .u if smoking_status == "" 
(0 real changes made)

. 
. label values smoke smoke

. lab var smoke "Smoking status"

. drop smoking_status

. tab smoke, missing

    Smoking |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
      Never |          1        0.24        0.24
     Former |        163       38.63       38.86
    Current |        257       60.90       99.76
  Not known |          1        0.24      100.00
------------+-----------------------------------
      Total |        422      100.00

. 
. *Create non-missing 3-category variable for current smoking (assumes missing smoking i
> s never smoking)
. recode smoke .u = 1, gen(smoke_nomiss)
(1 differences between smoke and smoke_nomiss)

. order smoke_nomiss, after(smoke)

. label values smoke_nomiss smoke

. 
. **Clinical comorbidities
. ***Nb. not using creatinine of HBA1c values for now, just codes
. foreach disease in ckd dm ild copd cva lung_ca solid_ca haem_ca depr osteop frac dem c
> hd {
  2.         label define `disease'_before 0 "No" 1 "Yes"
  3.         label values `disease'_before `disease'_before
  4.         tab `disease'_before, missing
  5.         label define `disease'_after 0 "No" 1 "Yes"
  6.         label values `disease'_after `disease'_after
  7.         tab `disease'_after, missing
  8.         gen `disease'_new = 1 if (`disease'_after == 1 & `disease'_before == 0)
  9.         recode `disease'_new .=0
 10.         label define `disease'_new 0 "No" 1 "Yes"
 11.         label values `disease'_new `disease'_new
 12.         tab `disease'_new, missing
 13.         order `disease'_new, after(`disease'_after)
 14. }

 ckd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        333       78.91       78.91
        Yes |         89       21.09      100.00
------------+-----------------------------------
      Total |        422      100.00

  ckd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        413       97.87       97.87
        Yes |          9        2.13      100.00
------------+-----------------------------------
      Total |        422      100.00
(417 missing values generated)
(417 changes made to ckd_new)

    ckd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        417       98.82       98.82
        Yes |          5        1.18      100.00
------------+-----------------------------------
      Total |        422      100.00

  dm_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        381       90.28       90.28
        Yes |         41        9.72      100.00
------------+-----------------------------------
      Total |        422      100.00

   dm_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00
(420 missing values generated)
(420 changes made to dm_new)

     dm_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00

 ild_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        349       82.70       82.70
        Yes |         73       17.30      100.00
------------+-----------------------------------
      Total |        422      100.00

  ild_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        416       98.58       98.58
        Yes |          6        1.42      100.00
------------+-----------------------------------
      Total |        422      100.00
(419 missing values generated)
(419 changes made to ild_new)

    ild_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        419       99.29       99.29
        Yes |          3        0.71      100.00
------------+-----------------------------------
      Total |        422      100.00

copd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        409       96.92       96.92
        Yes |         13        3.08      100.00
------------+-----------------------------------
      Total |        422      100.00

 copd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00
(420 missing values generated)
(420 changes made to copd_new)

   copd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00

 cva_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        367       86.97       86.97
        Yes |         55       13.03      100.00
------------+-----------------------------------
      Total |        422      100.00

  cva_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        413       97.87       97.87
        Yes |          9        2.13      100.00
------------+-----------------------------------
      Total |        422      100.00
(413 missing values generated)
(413 changes made to cva_new)

    cva_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        413       97.87       97.87
        Yes |          9        2.13      100.00
------------+-----------------------------------
      Total |        422      100.00

lung_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        330       78.20       78.20
        Yes |         92       21.80      100.00
------------+-----------------------------------
      Total |        422      100.00

lung_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        412       97.63       97.63
        Yes |         10        2.37      100.00
------------+-----------------------------------
      Total |        422      100.00
(412 missing values generated)
(412 changes made to lung_ca_new)

lung_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        412       97.63       97.63
        Yes |         10        2.37      100.00
------------+-----------------------------------
      Total |        422      100.00

solid_ca_be |
       fore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |         42        9.95        9.95
        Yes |        380       90.05      100.00
------------+-----------------------------------
      Total |        422      100.00

solid_ca_af |
        ter |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        290       68.72       68.72
        Yes |        132       31.28      100.00
------------+-----------------------------------
      Total |        422      100.00
(417 missing values generated)
(417 changes made to solid_ca_new)

solid_ca_ne |
          w |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        417       98.82       98.82
        Yes |          5        1.18      100.00
------------+-----------------------------------
      Total |        422      100.00

haem_ca_bef |
        ore |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        235       55.69       55.69
        Yes |        187       44.31      100.00
------------+-----------------------------------
      Total |        422      100.00

haem_ca_aft |
         er |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        390       92.42       92.42
        Yes |         32        7.58      100.00
------------+-----------------------------------
      Total |        422      100.00
(407 missing values generated)
(407 changes made to haem_ca_new)

haem_ca_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        407       96.45       96.45
        Yes |         15        3.55      100.00
------------+-----------------------------------
      Total |        422      100.00

depr_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        399       94.55       94.55
        Yes |         23        5.45      100.00
------------+-----------------------------------
      Total |        422      100.00

 depr_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        416       98.58       98.58
        Yes |          6        1.42      100.00
------------+-----------------------------------
      Total |        422      100.00
(416 missing values generated)
(416 changes made to depr_new)

   depr_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        416       98.58       98.58
        Yes |          6        1.42      100.00
------------+-----------------------------------
      Total |        422      100.00

osteop_befo |
         re |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        417       98.82       98.82
        Yes |          5        1.18      100.00
------------+-----------------------------------
      Total |        422      100.00

osteop_afte |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00
(420 missing values generated)
(420 changes made to osteop_new)

 osteop_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00

frac_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        420       99.53       99.53
        Yes |          2        0.47      100.00
------------+-----------------------------------
      Total |        422      100.00

 frac_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        422      100.00      100.00
------------+-----------------------------------
      Total |        422      100.00
(422 missing values generated)
(422 changes made to frac_new)

   frac_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        422      100.00      100.00
------------+-----------------------------------
      Total |        422      100.00

 dem_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        344       81.52       81.52
        Yes |         78       18.48      100.00
------------+-----------------------------------
      Total |        422      100.00

  dem_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        411       97.39       97.39
        Yes |         11        2.61      100.00
------------+-----------------------------------
      Total |        422      100.00
(413 missing values generated)
(413 changes made to dem_new)

    dem_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        413       97.87       97.87
        Yes |          9        2.13      100.00
------------+-----------------------------------
      Total |        422      100.00

 chd_before |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        350       82.94       82.94
        Yes |         72       17.06      100.00
------------+-----------------------------------
      Total |        422      100.00

  chd_after |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        411       97.39       97.39
        Yes |         11        2.61      100.00
------------+-----------------------------------
      Total |        422      100.00
(413 missing values generated)
(413 changes made to chd_new)

    chd_new |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        413       97.87       97.87
        Yes |          9        2.13      100.00
------------+-----------------------------------
      Total |        422      100.00

. 
. lab var ckd_before "Chronic kidney disease"

. lab var ckd_after "Chronic kidney disease"

. lab var ckd_new "Chronic kidney disease"

. lab var dm_before "Type 2 diabetes mellitus"

. lab var dm_after "Type 2 diabetes mellitus"

. lab var dm_new "Type 2 diabetes mellitus"

. lab var ild_before "Interstitial lung disease"

. lab var ild_after "Interstitial lung disease"

. lab var ild_new "Interstitial lung disease"

. lab var copd_before "COPD"

. lab var copd_after "COPD"

. lab var copd_new "COPD"

. lab var lung_ca_before "Lung cancer"

. lab var lung_ca_after "Lung cancer"

. lab var lung_ca_new "Lung cancer"

. lab var solid_ca_before "Solid organ cancer"

. lab var solid_ca_after "Solid organ cancer"

. lab var solid_ca_new "Solid organ cancer"

. lab var haem_ca_before "Haematological cancer"

. lab var haem_ca_after "Haematological cancer"

. lab var haem_ca_new "Haematological cancer"

. lab var depr_before "Depression"

. lab var depr_after "Depression"

. lab var depr_new "Depression"

. lab var osteop_before "Osteoporosis"

. lab var osteop_after "Osteoporosis"

. lab var osteop_new "Osteoporosis"

. lab var frac_before "Fragility fracture"

. lab var frac_after "Fragility fracture"

. lab var frac_new "Fragility fracture"

. lab var dem_before "Dementia"

. lab var dem_after "Dementia"

. lab var dem_new "Dementia"

. lab var chd_before "Coronary heart disease"

. lab var chd_after "Coronary heart disease"

. lab var chd_new "Coronary heart disease"

. 
. lab var rheum_appt "Rheumatology appointment"

. lab define rheum_appt 0 "No" 1 "Yes", modify

. lab val rheum_appt rheum_appt

. 
. **All patients should have diagnostic code============================================
> =================*/
. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        422      100.00      100.00
------------+-----------------------------------
      Total |        422      100.00

. keep if eia_code==1
(0 observations deleted)

. 
. **Check first rheum appt date was before diagnostic code date=========================
> =========*/
. 
. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before EIA code appeared in GP recor
> d; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        417       98.82       98.82
        Yes |          5        1.18      100.00
------------+-----------------------------------
      Total |        422      100.00

. tab rheum_appt if rheum_appt_date>eia_code_date & rheum_appt_date!=. //confirm proport
> ion who had first rheum appt (i.e. not missing) after EIA code

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |          1      100.00      100.00
------------+-----------------------------------
      Total |          1      100.00

. tab rheum_appt if rheum_appt_date>(eia_code_date + 30) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 30 days after EIA code 

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |          1      100.00      100.00
------------+-----------------------------------
      Total |          1      100.00

. tab rheum_appt if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //confirm 
> proportion who had first rheum appt 60 days after EIA code - should be none
no observations

. replace rheum_appt=0 if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=. //re
> place as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. replace rheum_appt_date=. if rheum_appt_date>(eia_code_date + 60) & rheum_appt_date!=.
>  //replace as missing if first appt >60 days after EIA code - should be none
(0 real changes made)

. 
. **As above - for differently specified rheumatology appointments
. replace rheum_appt_any=0 if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt_any_
> date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt_any_date=. if rheum_appt_any_date>(eia_code_date + 60) & rheum_appt
> _any_date!=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2=0 if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt2_date=. if rheum_appt2_date>(eia_code_date + 60) & rheum_appt2_date
> !=. //replace as missing those appts >60 days after EIA code_yea
(0 real changes made)

. replace rheum_appt3=0 if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date!=. /
> /replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt3_date=. if rheum_appt3_date>(eia_code_date + 60) & rheum_appt3_date
> !=. //replace as missing those appts >60 days after EIA code
(0 real changes made)

. replace rheum_appt4=0 if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date!=. /
> /replace as missing those appts >60 days after EIA code
(14 real changes made)

. replace rheum_appt4_date=. if rheum_appt4_date>(eia_code_date + 60) & rheum_appt4_date
> !=. //replace as missing those appts >60 days after EIA code
(14 real changes made, 14 to missing)

. 
. *Check if first csDMARD/biologic was after rheum appt date============================
> =========================*/
. **csDMARDs (not including high cost MTX; wouldn't be shared care)
. gen csdmard=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methotrexa
> te_inj==1 | sulfasalazine==1
(83 missing values generated)

. recode csdmard .=0 
(83 changes made to csdmard)

. tab csdmard, missing

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |         83       19.67       19.67
          1 |        339       80.33      100.00
------------+-----------------------------------
      Total |        422      100.00

. 
. **Date of first csDMARD script (not including high cost MTX prescriptions)
. gen csdmard_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date, met
> hotrexate_inj_date, sulfasalazine_date)
(83 missing values generated)

. format %td csdmard_date

. 
. /*
> **csDMARDs (including high cost MTX)
> gen csdmard_hcd=1 if hydroxychloroquine==1 | leflunomide==1 | methotrexate==1 | methot
> rexate_inj==1 | methotrexate_hcd==1 | sulfasalazine==1
> recode csdmard_hcd .=0 
> tab csdmard_hcd, missing
> 
> **Date of first csDMARD script (including high cost MTX prescriptions)
> gen csdmard_hcd_date=min(hydroxychloroquine_date, leflunomide_date, methotrexate_date,
>  methotrexate_inj_date, methotrexate_hcd_date, sulfasalazine_date)
> format %td csdmard_hcd_date
> 
> **Biologic use
> gen biologic=1 if abatacept==1 | adalimumab==1 | baricitinib==1 | certolizumab==1 | et
> anercept==1 | golimumab==1 | guselkumab==1 | infliximab==1 | ixekizumab==1 | rituximab
> ==1 | sarilumab==1 | secukinumab==1 | tocilizumab==1 | tofacitinib==1 | upadacitinib==
> 1 | ustekinumab==1 
> recode biologic .=0
> tab biologic, missing
> 
> **Date of first biologic script
> gen biologic_date=min(abatacept_date, adalimumab_date, baricitinib_date, certolizumab_
> date, etanercept_date, golimumab_date, guselkumab_date, infliximab_date, ixekizumab_da
> te, rituximab_date, sarilumab_date, secukinumab_date, tocilizumab_date, tofacitinib_da
> te, upadacitinib_date, ustekinumab_date)
> format %td biologic_date
> */
. 
. **Exclude if first csdmard was more than 60 days before first rheum appt
. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & csdmard_date<rheum_appt_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          2      100.00      100.00
------------+-----------------------------------
      Total |          2      100.00

. tab csdmard if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_d
> ate 

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          2      100.00      100.00
------------+-----------------------------------
      Total |          2      100.00

. drop if rheum_appt_date!=. & csdmard_date!=. & (csdmard_date + 60)<rheum_appt_date //d
> rop if first csDMARD more than 60 days before first attendance at a rheum appt 
(2 observations deleted)

. tab csdmard if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmar
> d_date + 60)<rheum_appt_any_date

    csdmard |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         10      100.00      100.00
------------+-----------------------------------
      Total |         10      100.00

. drop if rheum_appt_date==. & rheum_appt_any_date!=. & csdmard_date!=. & (csdmard_date 
> + 60)<rheum_appt_any_date //drop if first csDMARD more than 60 days before first captu
> red rheum appt that did not have first attendance tag
(10 observations deleted)

. 
. /*
> tab biologic if rheum_appt_date!=. & biologic_date!=. & biologic_date<rheum_appt_date 
> tab biologic if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_app
> t_date 
> drop if rheum_appt_date!=. & biologic_date!=. & (biologic_date + 60)<rheum_appt_date /
> /drop if first biologic more than 60 days before first rheum_appt_date
> tab biologic if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biol
> ogic_date + 60)<rheum_appt_any_date
> drop if rheum_appt_date==. & rheum_appt_any_date!=. & biologic_date!=. & (biologic_dat
> e + 60)<rheum_appt_any_date //drop if first biologic more than 60 days before first ca
> ptured rheum appt that did not have first attendance tag
> */
. 
. *Generate diagnosis date==============================================================
> =*/
. 
. **Use diagnostic code date (in GP record) as diagnosis date
. gen diagnosis_date=eia_code_date

. format diagnosis_date %td

. 
. *Refine diagnostic window=============================================================
> */
. 
. **Keep patients with diagnosis date after start date and before end date - should be n
> one dropped
. keep if diagnosis_date>=date("$start_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        410      100.00      100.00
------------+-----------------------------------
      Total |        410      100.00

. keep if diagnosis_date<=date("$end_date", "DMY") & diagnosis_date!=. 
(0 observations deleted)

. tab eia_code, missing

   eia_code |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        410      100.00      100.00
------------+-----------------------------------
      Total |        410      100.00

. 
. *Include only most recent EIA sub-diagnosis===========================================
> ==*/
. replace ra_code =0 if psa_code_date > ra_code_date & psa_code_date !=.
(0 real changes made)

. replace ra_code =0 if anksp_code_date > ra_code_date & anksp_code_date !=.
(0 real changes made)

. replace ra_code =0 if undiff_code_date > ra_code_date & undiff_code_date !=.
(0 real changes made)

. replace psa_code =0 if ra_code_date >= psa_code_date & ra_code_date !=.
(0 real changes made)

. replace psa_code =0 if anksp_code_date > psa_code_date & anksp_code_date !=.
(0 real changes made)

. replace psa_code =0 if undiff_code_date > psa_code_date & undiff_code_date !=.
(0 real changes made)

. replace anksp_code =0 if psa_code_date >= anksp_code_date & psa_code_date !=.
(0 real changes made)

. replace anksp_code =0 if ra_code_date >= anksp_code_date & ra_code_date !=.
(0 real changes made)

. replace anksp_code =0 if undiff_code_date > anksp_code_date & undiff_code_date !=.
(0 real changes made)

. replace undiff_code =0 if ra_code_date >= undiff_code_date & ra_code_date !=.
(0 real changes made)

. replace undiff_code =0 if psa_code_date >= undiff_code_date & psa_code_date !=.
(0 real changes made)

. replace undiff_code =0 if anksp_code_date >= undiff_code_date & anksp_code_date !=.
(0 real changes made)

. gen eia_diagnosis=1 if ra_code==1
(83 missing values generated)

. replace eia_diagnosis=2 if psa_code==1
(38 real changes made)

. replace eia_diagnosis=3 if anksp_code==1
(35 real changes made)

. replace eia_diagnosis=4 if undiff_code==1
(10 real changes made)

. lab define eia_diagnosis 1 "RA" 2 "PsA" 3 "AxSpA" 4 "Undiff IA", modify

. lab val eia_diagnosis eia_diagnosis

. tab eia_diagnosis, missing

eia_diagnos |
         is |      Freq.     Percent        Cum.
------------+-----------------------------------
         RA |        327       79.76       79.76
        PsA |         38        9.27       89.02
      AxSpA |         35        8.54       97.56
  Undiff IA |         10        2.44      100.00
------------+-----------------------------------
      Total |        410      100.00

. drop if eia_diagnosis==. //should be none
(0 observations deleted)

. 
. decode eia_diagnosis, gen(eia_diag)

. replace eia_diag="Undiff_IA" if eia_diagnosis==4
(10 real changes made)

. 
. *Split into time windows=========================================*/
. 
. **Month/Year of GP diagnostic code
. gen year_diag=year(eia_code_date)

. format year_diag %ty

. gen month_diag=month(eia_code_date)

. gen mo_year_diagn=ym(year_diag, month_diag)

. format mo_year_diagn %tmMon-CCYY

. generate str16 mo_year_diagn_s = strofreal(mo_year_diagn,"%tmCCYY!mNN")

. lab var mo_year_diagn "Month/Year of Diagnosis"

. lab var mo_year_diagn_s "Month/Year of Diagnosis"

. 
. **Month/Year of rheum appt
. gen year_appt=year(rheum_appt_date) if rheum_appt_date!=.
(407 missing values generated)

. format year_appt %ty

. gen month_appt=month(rheum_appt_date) if rheum_appt_date!=. 
(407 missing values generated)

. gen mo_year_appt=ym(year_appt, month_appt)
(407 missing values generated)

. format mo_year_appt %tmMon-CCYY

. generate str16 mo_year_appt_s = strofreal(mo_year_appt,"%tmCCYY!mNN")

. 
. **Separate into 3-month time windows (for diagnosis date)
. gen diagnosis_3m = qofd(diagnosis_date)

. format diagnosis_3m %tq

. lab var diagnosis_3m "Time period for diagnosis"

. tab diagnosis_3m, missing

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |         12        2.93        2.93
     2016q3 |          6        1.46        4.39
     2016q4 |         12        2.93        7.32
     2017q1 |          8        1.95        9.27
     2017q2 |          8        1.95       11.22
     2017q3 |         15        3.66       14.88
     2017q4 |         12        2.93       17.80
     2018q1 |         19        4.63       22.44
     2018q2 |         11        2.68       25.12
     2018q3 |         14        3.41       28.54
     2018q4 |         12        2.93       31.46
     2019q1 |          8        1.95       33.41
     2019q2 |         16        3.90       37.32
     2019q3 |          9        2.20       39.51
     2019q4 |          8        1.95       41.46
     2020q1 |         14        3.41       44.88
     2020q2 |          9        2.20       47.07
     2020q3 |         12        2.93       50.00
     2020q4 |         12        2.93       52.93
     2021q1 |         14        3.41       56.34
     2021q2 |         13        3.17       59.51
     2021q3 |         16        3.90       63.41
     2021q4 |         18        4.39       67.80
     2022q1 |         10        2.44       70.24
     2022q2 |          7        1.71       71.95
     2022q3 |          9        2.20       74.15
     2022q4 |          8        1.95       76.10
     2023q1 |         15        3.66       79.76
     2023q2 |         10        2.44       82.20
     2023q3 |          6        1.46       83.66
     2023q4 |         18        4.39       88.05
     2024q1 |         12        2.93       90.98
     2024q2 |         12        2.93       93.90
     2024q3 |         12        2.93       96.83
     2024q4 |          8        1.95       98.78
     2025q1 |          5        1.22      100.00
------------+-----------------------------------
      Total |        410      100.00

. bys eia_diagnosis: tab diagnosis_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |         11        3.36        3.36
     2016q3 |          5        1.53        4.89
     2016q4 |         10        3.06        7.95
     2017q1 |          8        2.45       10.40
     2017q2 |          8        2.45       12.84
     2017q3 |         13        3.98       16.82
     2017q4 |         12        3.67       20.49
     2018q1 |         16        4.89       25.38
     2018q2 |          6        1.83       27.22
     2018q3 |         11        3.36       30.58
     2018q4 |         10        3.06       33.64
     2019q1 |          8        2.45       36.09
     2019q2 |         12        3.67       39.76
     2019q3 |          6        1.83       41.59
     2019q4 |          5        1.53       43.12
     2020q1 |         10        3.06       46.18
     2020q2 |          9        2.75       48.93
     2020q3 |          9        2.75       51.68
     2020q4 |          9        2.75       54.43
     2021q1 |         10        3.06       57.49
     2021q2 |         10        3.06       60.55
     2021q3 |         12        3.67       64.22
     2021q4 |         15        4.59       68.81
     2022q1 |          8        2.45       71.25
     2022q2 |          5        1.53       72.78
     2022q3 |          7        2.14       74.92
     2022q4 |          6        1.83       76.76
     2023q1 |          8        2.45       79.20
     2023q2 |          8        2.45       81.65
     2023q3 |          5        1.53       83.18
     2023q4 |         12        3.67       86.85
     2024q1 |         11        3.36       90.21
     2024q2 |         11        3.36       93.58
     2024q3 |         11        3.36       96.94
     2024q4 |          6        1.83       98.78
     2025q1 |          4        1.22      100.00
------------+-----------------------------------
      Total |        327      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q2 |          1        2.63        2.63
     2016q4 |          2        5.26        7.89
     2018q2 |          5       13.16       21.05
     2018q3 |          1        2.63       23.68
     2019q2 |          3        7.89       31.58
     2019q3 |          2        5.26       36.84
     2020q1 |          1        2.63       39.47
     2020q3 |          1        2.63       42.11
     2020q4 |          2        5.26       47.37
     2021q1 |          3        7.89       55.26
     2021q2 |          1        2.63       57.89
     2021q3 |          2        5.26       63.16
     2021q4 |          1        2.63       65.79
     2022q1 |          1        2.63       68.42
     2022q2 |          1        2.63       71.05
     2022q3 |          1        2.63       73.68
     2022q4 |          1        2.63       76.32
     2023q1 |          2        5.26       81.58
     2023q3 |          1        2.63       84.21
     2023q4 |          4       10.53       94.74
     2024q4 |          1        2.63       97.37
     2025q1 |          1        2.63      100.00
------------+-----------------------------------
      Total |         38      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2016q3 |          1        2.86        2.86
     2017q3 |          1        2.86        5.71
     2018q1 |          3        8.57       14.29
     2018q3 |          2        5.71       20.00
     2018q4 |          1        2.86       22.86
     2019q2 |          1        2.86       25.71
     2019q4 |          2        5.71       31.43
     2020q1 |          3        8.57       40.00
     2020q3 |          2        5.71       45.71
     2020q4 |          1        2.86       48.57
     2021q1 |          1        2.86       51.43
     2021q2 |          2        5.71       57.14
     2021q3 |          2        5.71       62.86
     2021q4 |          1        2.86       65.71
     2022q1 |          1        2.86       68.57
     2022q4 |          1        2.86       71.43
     2023q1 |          3        8.57       80.00
     2023q2 |          2        5.71       85.71
     2023q4 |          1        2.86       88.57
     2024q1 |          1        2.86       91.43
     2024q2 |          1        2.86       94.29
     2024q3 |          1        2.86       97.14
     2024q4 |          1        2.86      100.00
------------+-----------------------------------
      Total |         35      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
  diagnosis |      Freq.     Percent        Cum.
------------+-----------------------------------
     2017q3 |          1       10.00       10.00
     2018q4 |          1       10.00       20.00
     2019q3 |          1       10.00       30.00
     2019q4 |          1       10.00       40.00
     2021q4 |          1       10.00       50.00
     2022q2 |          1       10.00       60.00
     2022q3 |          1       10.00       70.00
     2023q1 |          2       20.00       90.00
     2023q4 |          1       10.00      100.00
------------+-----------------------------------
      Total |         10      100.00


. 
. **Separate into 12-month time windows (for diagnosis date)
. gen diagnosis_year = (floor((diagnosis_date - date("$start_date", "DMY")) / 365.25) + 
> 1) if inrange(diagnosis_date, date("$start_date", "DMY"), date("$end_date", "DMY"))

. lab var diagnosis_year "Year of diagnosis"

. forvalues i = 1/$max_year {
  2.     local start = $base_year + `i' - 1
  3.     local end = `start' + 1
  4.     label define diagnosis_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val diagnosis_year diagnosis_year_lbl

. tab diagnosis_year, missing

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |         38        9.27        9.27
Apr 2017Mar 2018 |         54       13.17       22.44
Apr 2018Mar 2019 |         45       10.98       33.41
Apr 2019Mar 2020 |         47       11.46       44.88
Apr 2020Mar 2021 |         47       11.46       56.34
Apr 2021Mar 2022 |         57       13.90       70.24
Apr 2022Mar 2023 |         40        9.76       80.00
Apr 2023Mar 2024 |         45       10.98       90.98
Apr 2024Mar 2025 |         37        9.02      100.00
------------------+-----------------------------------
            Total |        410      100.00

. bys eia_diagnosis: tab diagnosis_year, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |         34       10.40       10.40
Apr 2017Mar 2018 |         49       14.98       25.38
Apr 2018Mar 2019 |         35       10.70       36.09
Apr 2019Mar 2020 |         33       10.09       46.18
Apr 2020Mar 2021 |         37       11.31       57.49
Apr 2021Mar 2022 |         45       13.76       71.25
Apr 2022Mar 2023 |         26        7.95       79.20
Apr 2023Mar 2024 |         36       11.01       90.21
Apr 2024Mar 2025 |         32        9.79      100.00
------------------+-----------------------------------
            Total |        327      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |          3        7.89        7.89
Apr 2018Mar 2019 |          6       15.79       23.68
Apr 2019Mar 2020 |          6       15.79       39.47
Apr 2020Mar 2021 |          6       15.79       55.26
Apr 2021Mar 2022 |          5       13.16       68.42
Apr 2022Mar 2023 |          5       13.16       81.58
Apr 2023Mar 2024 |          5       13.16       94.74
Apr 2024Mar 2025 |          2        5.26      100.00
------------------+-----------------------------------
            Total |         38      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2016Mar 2017 |          1        2.86        2.86
Apr 2017Mar 2018 |          4       11.43       14.29
Apr 2018Mar 2019 |          3        8.57       22.86
Apr 2019Mar 2020 |          6       17.14       40.00
Apr 2020Mar 2021 |          4       11.43       51.43
Apr 2021Mar 2022 |          6       17.14       68.57
Apr 2022Mar 2023 |          5       14.29       82.86
Apr 2023Mar 2024 |          3        8.57       91.43
Apr 2024Mar 2025 |          3        8.57      100.00
------------------+-----------------------------------
            Total |         35      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Year of diagnosis |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2017Mar 2018 |          1       10.00       10.00
Apr 2018Mar 2019 |          1       10.00       20.00
Apr 2019Mar 2020 |          2       20.00       40.00
Apr 2021Mar 2022 |          1       10.00       50.00
Apr 2022Mar 2023 |          4       40.00       90.00
Apr 2023Mar 2024 |          1       10.00      100.00
------------------+-----------------------------------
            Total |         10      100.00


. 
. **Separate into 3-month time windows (for appt date)
. gen appt_3m = qofd(rheum_appt_date)
(407 missing values generated)

. format appt_3m %tq

. lab var appt_3m "Time period for appointment"

. tab appt_3m, missing

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
     2017q3 |          1        0.24        0.24
     2019q3 |          1        0.24        0.49
     2021q2 |          1        0.24        0.73
          . |        407       99.27      100.00
------------+-----------------------------------
      Total |        410      100.00

. bys eia_diagnosis: tab appt_3m, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
     2017q3 |          1        0.31        0.31
     2021q2 |          1        0.31        0.61
          . |        325       99.39      100.00
------------+-----------------------------------
      Total |        327      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
     2019q3 |          1        2.63        2.63
          . |         37       97.37      100.00
------------+-----------------------------------
      Total |         38      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
          . |         35      100.00      100.00
------------+-----------------------------------
      Total |         35      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

Time period |
        for |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
          . |         10      100.00      100.00
------------+-----------------------------------
      Total |         10      100.00


. 
. **Separate into 12-month time windows (for appt date)
. gen appt_year = (floor((rheum_appt_date - date("$start_date", "DMY")) / 365.25) + 1) i
> f inrange(rheum_appt_date, date("$start_date", "DMY"), date("$end_date", "DMY"))
(407 missing values generated)

. lab var appt_year "Year of appointment"

. forvalues i = 1/$max_year {
  2.     local start = $base_year + `i' - 1
  3.     local end = `start' + 1
  4.     label define appt_year_lbl `i' "Apr `start'Mar `end'", add
  5. }

. lab val appt_year appt_year_lbl

. tab appt_year, missing

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2017Mar 2018 |          1        0.24        0.24
Apr 2019Mar 2020 |          1        0.24        0.49
Apr 2021Mar 2022 |          1        0.24        0.73
                . |        407       99.27      100.00
------------------+-----------------------------------
            Total |        410      100.00

. bys eia_diagnosis: tab appt_year, missing

----------------------------------------------------------------------------------------
-> eia_diagnosis = RA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2017Mar 2018 |          1        0.31        0.31
Apr 2021Mar 2022 |          1        0.31        0.61
                . |        325       99.39      100.00
------------------+-----------------------------------
            Total |        327      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = PsA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
Apr 2019Mar 2020 |          1        2.63        2.63
                . |         37       97.37      100.00
------------------+-----------------------------------
            Total |         38      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = AxSpA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
                . |         35      100.00      100.00
------------------+-----------------------------------
            Total |         35      100.00

----------------------------------------------------------------------------------------
-> eia_diagnosis = Undiff IA

          Year of |
      appointment |      Freq.     Percent        Cum.
------------------+-----------------------------------
                . |         10      100.00      100.00
------------------+-----------------------------------
            Total |         10      100.00


. 
. *Define Rheumatology appointments ======================================*/
. 
. **Rheumatology appt definitions 
. tab rheum_appt, missing //proportion of patients with an rheum outpatient date (with f
> irst attendance option selected) in the 12 months before and 60 days after EIA code ap
> peared in GP record; data only April 2019 onwards

Rheumatolog |
          y |
appointment |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        407       99.27       99.27
        Yes |          3        0.73      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab mo_year_diagn rheum_appt, missing //proportion of patients with an rheum outpatien
> t date (with first attendance option selected) in the 12 months before and 60 days aft
> er EIA code appeared in GP record; data only April 2019 onwards

Month/Year |     Rheumatology
        of |      appointment
 Diagnosis |        No        Yes |     Total
-----------+----------------------+----------
  Apr-2016 |         4          0 |         4 
  May-2016 |         3          0 |         3 
  Jun-2016 |         5          0 |         5 
  Jul-2016 |         2          0 |         2 
  Aug-2016 |         2          0 |         2 
  Sep-2016 |         2          0 |         2 
  Oct-2016 |         8          0 |         8 
  Nov-2016 |         2          0 |         2 
  Dec-2016 |         2          0 |         2 
  Jan-2017 |         3          0 |         3 
  Feb-2017 |         2          0 |         2 
  Mar-2017 |         3          0 |         3 
  Apr-2017 |         2          0 |         2 
  May-2017 |         3          0 |         3 
  Jun-2017 |         3          0 |         3 
  Jul-2017 |         6          0 |         6 
  Aug-2017 |         5          0 |         5 
  Sep-2017 |         4          0 |         4 
  Oct-2017 |         2          0 |         2 
  Nov-2017 |         7          0 |         7 
  Dec-2017 |         3          0 |         3 
  Jan-2018 |         3          0 |         3 
  Feb-2018 |         7          0 |         7 
  Mar-2018 |         8          1 |         9 
  Apr-2018 |         4          0 |         4 
  May-2018 |         5          0 |         5 
  Jun-2018 |         2          0 |         2 
  Jul-2018 |         6          0 |         6 
  Aug-2018 |         4          0 |         4 
  Sep-2018 |         4          0 |         4 
  Oct-2018 |         4          0 |         4 
  Nov-2018 |         5          0 |         5 
  Dec-2018 |         3          0 |         3 
  Jan-2019 |         3          0 |         3 
  Feb-2019 |         4          0 |         4 
  Mar-2019 |         1          0 |         1 
  Apr-2019 |         5          0 |         5 
  May-2019 |         5          0 |         5 
  Jun-2019 |         6          0 |         6 
  Jul-2019 |         3          0 |         3 
  Aug-2019 |         2          1 |         3 
  Sep-2019 |         3          0 |         3 
  Oct-2019 |         3          0 |         3 
  Nov-2019 |         1          0 |         1 
  Dec-2019 |         4          0 |         4 
  Jan-2020 |         1          0 |         1 
  Feb-2020 |         9          0 |         9 
  Mar-2020 |         4          0 |         4 
  Apr-2020 |         2          0 |         2 
  May-2020 |         1          0 |         1 
  Jun-2020 |         6          0 |         6 
  Jul-2020 |         4          0 |         4 
  Aug-2020 |         2          0 |         2 
  Sep-2020 |         6          0 |         6 
  Oct-2020 |         6          0 |         6 
  Nov-2020 |         2          0 |         2 
  Dec-2020 |         4          0 |         4 
  Jan-2021 |         3          0 |         3 
  Feb-2021 |         3          0 |         3 
  Mar-2021 |         8          0 |         8 
  Apr-2021 |         5          0 |         5 
  May-2021 |         2          0 |         2 
  Jun-2021 |         6          0 |         6 
  Jul-2021 |         6          0 |         6 
  Aug-2021 |         3          0 |         3 
  Sep-2021 |         7          0 |         7 
  Oct-2021 |         5          0 |         5 
  Nov-2021 |         4          1 |         5 
  Dec-2021 |         8          0 |         8 
  Jan-2022 |         2          0 |         2 
  Feb-2022 |         5          0 |         5 
  Mar-2022 |         3          0 |         3 
  Apr-2022 |         1          0 |         1 
  May-2022 |         4          0 |         4 
  Jun-2022 |         2          0 |         2 
  Jul-2022 |         6          0 |         6 
  Sep-2022 |         3          0 |         3 
  Oct-2022 |         4          0 |         4 
  Nov-2022 |         1          0 |         1 
  Dec-2022 |         3          0 |         3 
  Jan-2023 |         3          0 |         3 
  Feb-2023 |         6          0 |         6 
  Mar-2023 |         6          0 |         6 
  Apr-2023 |         3          0 |         3 
  May-2023 |         3          0 |         3 
  Jun-2023 |         4          0 |         4 
  Aug-2023 |         3          0 |         3 
  Sep-2023 |         3          0 |         3 
  Oct-2023 |         7          0 |         7 
  Nov-2023 |         5          0 |         5 
  Dec-2023 |         6          0 |         6 
  Jan-2024 |         5          0 |         5 
  Feb-2024 |         5          0 |         5 
  Mar-2024 |         2          0 |         2 
  Apr-2024 |         5          0 |         5 
  May-2024 |         3          0 |         3 
  Jun-2024 |         4          0 |         4 
  Jul-2024 |         3          0 |         3 
  Aug-2024 |         2          0 |         2 
  Sep-2024 |         7          0 |         7 
  Oct-2024 |         2          0 |         2 
  Nov-2024 |         4          0 |         4 
  Dec-2024 |         2          0 |         2 
  Jan-2025 |         1          0 |         1 
  Feb-2025 |         2          0 |         2 
  Mar-2025 |         2          0 |         2 
-----------+----------------------+----------
     Total |       407          3 |       410 

. tab rheum_appt_any, missing //proportion of patients with a rheum outpatient date (wit
> hout first attendance option selected) in the 12 months before and 60 days after EIA c
> ode appeared in GP record; data only April 2019 onwards

rheum_appt_ |
        any |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        405       98.78       98.78
          1 |          5        1.22      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab rheum_appt2, missing //proportion of patients with a rheum outpatient date (withou
> t first attendance option selected) in the 6 months before and 60 days after  EIA code
>  appeared in GP record; data only April 2019 onwards

rheum_appt2 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        408       99.51       99.51
          1 |          2        0.49      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab rheum_appt3, missing //proportion of patients with a rheum outpatient date (withou
> t first attendance option selected) in the 2 years before and 60 days after EIA code a
> ppeared in GP record; data only April 2019 onwards

rheum_appt3 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        399       97.32       97.32
          1 |         11        2.68      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab rheum_appt4, missing //proportion of patients with a rheum outpatient date (withou
> t first attendance option selected) in the 2 years before and 1 year after EIA code ap
> peared in GP record; data only April 2019 onwards

rheum_appt4 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        399       97.32       97.32
          1 |         11        2.68      100.00
------------+-----------------------------------
      Total |        410      100.00

. 
. ***Check number of rheumatology appts in the year before EIA code
. tabstat rheum_appt_count, stat (n mean sd p50 p25 p75)

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |       410  .0097561    .09841         0         0         0
--------------------------------------------------------------------------

. bys diagnosis_year: tabstat rheum_appt_count, stat (n mean sd p50 p25 p75)

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2016Mar 2017

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        38         0         0         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2017Mar 2018

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        54  .0185185  .1360828         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2018Mar 2019

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        45         0         0         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2019Mar 2020

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        47         0         0         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2020Mar 2021

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        47  .0212766   .145865         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2021Mar 2022

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        57  .0175439  .1324532         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2022Mar 2023

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        40         0         0         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2023Mar 2024

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        45         0         0         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> diagnosis_year = Apr 2024Mar 2025

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |        37   .027027   .164399         0         0         0
--------------------------------------------------------------------------

. bys appt_year: tabstat rheum_appt_count, stat (n mean sd p50 p25 p75)

----------------------------------------------------------------------------------------
-> appt_year = Apr 2017Mar 2018

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |         1         1         .         1         1         1
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> appt_year = Apr 2019Mar 2020

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |         1         0         .         0         0         0
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> appt_year = Apr 2021Mar 2022

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |         1         1         .         1         1         1
--------------------------------------------------------------------------

----------------------------------------------------------------------------------------
-> appt_year = .

    Variable |         N      Mean        SD       p50       p25       p75
-------------+------------------------------------------------------------
rheum_appt~t |       407   .004914  .0700136         0         0         0
--------------------------------------------------------------------------

. 
. ***Check medium used for rheumatology appointment
. tab rheum_appt_medium, missing

rheum_appt_ |
     medium |      Freq.     Percent        Cum.
------------+-----------------------------------
          9 |          2        0.49        0.49
          . |        408       99.51      100.00
------------+-----------------------------------
      Total |        410      100.00

. gen rheum_appt_medium_clean = rheum_appt_medium if rheum_appt_medium >0 & rheum_appt_m
> edium<100
(408 missing values generated)

. recode rheum_appt_medium_clean 3=2 //recode telemedicine=telephone
(0 changes made to rheum_appt_medium_clean)

. replace rheum_appt_medium_clean=10 if rheum_appt_medium_clean>2 & rheum_appt_medium_cl
> ean!=.
(2 real changes made)

. recode rheum_appt_medium_clean .=.u
(408 changes made to rheum_appt_medium_clean)

. lab define rheum_appt_medium_clean 1 "Face-to-face" 2 "Telephone" 10 "Other" .u "Missi
> ng", modify

. lab val rheum_appt_medium_clean rheum_appt_medium_clean

. lab var rheum_appt_medium_clean "Rheumatology consultation medium"

. tab rheum_appt_medium_clean 

Rheumatology |
consultation |
      medium |      Freq.     Percent        Cum.
-------------+-----------------------------------
       Other |          2      100.00      100.00
-------------+-----------------------------------
       Total |          2      100.00

. 
. *Gen rheum appt variable with 6m/12m+ until study end date
. gen rheum_appt_12m=rheum_appt if rheum_appt_date<=(date("$end_date", "DMY")-365) 
(407 missing values generated)

. recode rheum_appt_12m .=0
(407 changes made to rheum_appt_12m)

. lab var rheum_appt_12m "Rheumatology appt 12m+"

. lab define rheum_appt_12m 0 "No" 1 "Yes", modify

. lab val rheum_appt_12m rheum_appt_12m

. 
. gen rheum_appt_6m=rheum_appt if rheum_appt_date<=(date("$end_date", "DMY")-180) 
(407 missing values generated)

. recode rheum_appt_6m .=0
(407 changes made to rheum_appt_6m)

. lab var rheum_appt_6m "Rheumatology appt 6m+"

. lab define rheum_appt_6m 0 "No" 1 "Yes", modify

. lab val rheum_appt_6m rheum_appt_6m

. 
. **Define Rheumatology referrals ======================================*/
. 
. ***From HES OPA (referral_request_received_date)
. tab rheum_appt_ref_date, missing

rheum_appt_ |
   ref_date |      Freq.     Percent        Cum.
------------+-----------------------------------
  24jul1987 |          1        0.24        0.24
  17nov1999 |          1        0.24        0.49
  21jun2016 |          1        0.24        0.73
          . |        407       99.27      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab mo_year_diagn rheum_appt_ref_date, missing

Month/Year |
        of |             rheum_appt_ref_date
 Diagnosis | 24jul1987  17nov1999  21jun2016          . |     Total
-----------+--------------------------------------------+----------
  Apr-2016 |         0          0          0          4 |         4 
  May-2016 |         0          0          0          3 |         3 
  Jun-2016 |         0          0          0          5 |         5 
  Jul-2016 |         0          0          0          2 |         2 
  Aug-2016 |         0          0          0          2 |         2 
  Sep-2016 |         0          0          0          2 |         2 
  Oct-2016 |         0          0          0          8 |         8 
  Nov-2016 |         0          0          0          2 |         2 
  Dec-2016 |         0          0          0          2 |         2 
  Jan-2017 |         0          0          0          3 |         3 
  Feb-2017 |         0          0          0          2 |         2 
  Mar-2017 |         0          0          0          3 |         3 
  Apr-2017 |         0          0          0          2 |         2 
  May-2017 |         0          0          0          3 |         3 
  Jun-2017 |         0          0          0          3 |         3 
  Jul-2017 |         0          0          0          6 |         6 
  Aug-2017 |         0          0          0          5 |         5 
  Sep-2017 |         0          0          0          4 |         4 
  Oct-2017 |         0          0          0          2 |         2 
  Nov-2017 |         0          0          0          7 |         7 
  Dec-2017 |         0          0          0          3 |         3 
  Jan-2018 |         0          0          0          3 |         3 
  Feb-2018 |         0          0          0          7 |         7 
  Mar-2018 |         1          0          0          8 |         9 
  Apr-2018 |         0          0          0          4 |         4 
  May-2018 |         0          0          0          5 |         5 
  Jun-2018 |         0          0          0          2 |         2 
  Jul-2018 |         0          0          0          6 |         6 
  Aug-2018 |         0          0          0          4 |         4 
  Sep-2018 |         0          0          0          4 |         4 
  Oct-2018 |         0          0          0          4 |         4 
  Nov-2018 |         0          0          0          5 |         5 
  Dec-2018 |         0          0          0          3 |         3 
  Jan-2019 |         0          0          0          3 |         3 
  Feb-2019 |         0          0          0          4 |         4 
  Mar-2019 |         0          0          0          1 |         1 
  Apr-2019 |         0          0          0          5 |         5 
  May-2019 |         0          0          0          5 |         5 
  Jun-2019 |         0          0          0          6 |         6 
  Jul-2019 |         0          0          0          3 |         3 
  Aug-2019 |         0          0          1          2 |         3 
  Sep-2019 |         0          0          0          3 |         3 
  Oct-2019 |         0          0          0          3 |         3 
  Nov-2019 |         0          0          0          1 |         1 
  Dec-2019 |         0          0          0          4 |         4 
  Jan-2020 |         0          0          0          1 |         1 
  Feb-2020 |         0          0          0          9 |         9 
  Mar-2020 |         0          0          0          4 |         4 
  Apr-2020 |         0          0          0          2 |         2 
  May-2020 |         0          0          0          1 |         1 
  Jun-2020 |         0          0          0          6 |         6 
  Jul-2020 |         0          0          0          4 |         4 
  Aug-2020 |         0          0          0          2 |         2 
  Sep-2020 |         0          0          0          6 |         6 
  Oct-2020 |         0          0          0          6 |         6 
  Nov-2020 |         0          0          0          2 |         2 
  Dec-2020 |         0          0          0          4 |         4 
  Jan-2021 |         0          0          0          3 |         3 
  Feb-2021 |         0          0          0          3 |         3 
  Mar-2021 |         0          0          0          8 |         8 
  Apr-2021 |         0          0          0          5 |         5 
  May-2021 |         0          0          0          2 |         2 
  Jun-2021 |         0          0          0          6 |         6 
  Jul-2021 |         0          0          0          6 |         6 
  Aug-2021 |         0          0          0          3 |         3 
  Sep-2021 |         0          0          0          7 |         7 
  Oct-2021 |         0          0          0          5 |         5 
  Nov-2021 |         0          1          0          4 |         5 
  Dec-2021 |         0          0          0          8 |         8 
  Jan-2022 |         0          0          0          2 |         2 
  Feb-2022 |         0          0          0          5 |         5 
  Mar-2022 |         0          0          0          3 |         3 
  Apr-2022 |         0          0          0          1 |         1 
  May-2022 |         0          0          0          4 |         4 
  Jun-2022 |         0          0          0          2 |         2 
  Jul-2022 |         0          0          0          6 |         6 
  Sep-2022 |         0          0          0          3 |         3 
  Oct-2022 |         0          0          0          4 |         4 
  Nov-2022 |         0          0          0          1 |         1 
  Dec-2022 |         0          0          0          3 |         3 
  Jan-2023 |         0          0          0          3 |         3 
  Feb-2023 |         0          0          0          6 |         6 
  Mar-2023 |         0          0          0          6 |         6 
  Apr-2023 |         0          0          0          3 |         3 
  May-2023 |         0          0          0          3 |         3 
  Jun-2023 |         0          0          0          4 |         4 
  Aug-2023 |         0          0          0          3 |         3 
  Sep-2023 |         0          0          0          3 |         3 
  Oct-2023 |         0          0          0          7 |         7 
  Nov-2023 |         0          0          0          5 |         5 
  Dec-2023 |         0          0          0          6 |         6 
  Jan-2024 |         0          0          0          5 |         5 
  Feb-2024 |         0          0          0          5 |         5 
  Mar-2024 |         0          0          0          2 |         2 
  Apr-2024 |         0          0          0          5 |         5 
  May-2024 |         0          0          0          3 |         3 
  Jun-2024 |         0          0          0          4 |         4 
  Jul-2024 |         0          0          0          3 |         3 
  Aug-2024 |         0          0          0          2 |         2 
  Sep-2024 |         0          0          0          7 |         7 
  Oct-2024 |         0          0          0          2 |         2 
  Nov-2024 |         0          0          0          4 |         4 
  Dec-2024 |         0          0          0          2 |         2 
  Jan-2025 |         0          0          0          1 |         1 
  Feb-2025 |         0          0          0          2 |         2 
  Mar-2025 |         0          0          0          2 |         2 
-----------+--------------------------------------------+----------
     Total |         1          1          1        407 |       410 

. tab mo_year_diagn rheum_appt_ref_date if rheum_appt!=., missing

Month/Year |
        of |             rheum_appt_ref_date
 Diagnosis | 24jul1987  17nov1999  21jun2016          . |     Total
-----------+--------------------------------------------+----------
  Apr-2016 |         0          0          0          4 |         4 
  May-2016 |         0          0          0          3 |         3 
  Jun-2016 |         0          0          0          5 |         5 
  Jul-2016 |         0          0          0          2 |         2 
  Aug-2016 |         0          0          0          2 |         2 
  Sep-2016 |         0          0          0          2 |         2 
  Oct-2016 |         0          0          0          8 |         8 
  Nov-2016 |         0          0          0          2 |         2 
  Dec-2016 |         0          0          0          2 |         2 
  Jan-2017 |         0          0          0          3 |         3 
  Feb-2017 |         0          0          0          2 |         2 
  Mar-2017 |         0          0          0          3 |         3 
  Apr-2017 |         0          0          0          2 |         2 
  May-2017 |         0          0          0          3 |         3 
  Jun-2017 |         0          0          0          3 |         3 
  Jul-2017 |         0          0          0          6 |         6 
  Aug-2017 |         0          0          0          5 |         5 
  Sep-2017 |         0          0          0          4 |         4 
  Oct-2017 |         0          0          0          2 |         2 
  Nov-2017 |         0          0          0          7 |         7 
  Dec-2017 |         0          0          0          3 |         3 
  Jan-2018 |         0          0          0          3 |         3 
  Feb-2018 |         0          0          0          7 |         7 
  Mar-2018 |         1          0          0          8 |         9 
  Apr-2018 |         0          0          0          4 |         4 
  May-2018 |         0          0          0          5 |         5 
  Jun-2018 |         0          0          0          2 |         2 
  Jul-2018 |         0          0          0          6 |         6 
  Aug-2018 |         0          0          0          4 |         4 
  Sep-2018 |         0          0          0          4 |         4 
  Oct-2018 |         0          0          0          4 |         4 
  Nov-2018 |         0          0          0          5 |         5 
  Dec-2018 |         0          0          0          3 |         3 
  Jan-2019 |         0          0          0          3 |         3 
  Feb-2019 |         0          0          0          4 |         4 
  Mar-2019 |         0          0          0          1 |         1 
  Apr-2019 |         0          0          0          5 |         5 
  May-2019 |         0          0          0          5 |         5 
  Jun-2019 |         0          0          0          6 |         6 
  Jul-2019 |         0          0          0          3 |         3 
  Aug-2019 |         0          0          1          2 |         3 
  Sep-2019 |         0          0          0          3 |         3 
  Oct-2019 |         0          0          0          3 |         3 
  Nov-2019 |         0          0          0          1 |         1 
  Dec-2019 |         0          0          0          4 |         4 
  Jan-2020 |         0          0          0          1 |         1 
  Feb-2020 |         0          0          0          9 |         9 
  Mar-2020 |         0          0          0          4 |         4 
  Apr-2020 |         0          0          0          2 |         2 
  May-2020 |         0          0          0          1 |         1 
  Jun-2020 |         0          0          0          6 |         6 
  Jul-2020 |         0          0          0          4 |         4 
  Aug-2020 |         0          0          0          2 |         2 
  Sep-2020 |         0          0          0          6 |         6 
  Oct-2020 |         0          0          0          6 |         6 
  Nov-2020 |         0          0          0          2 |         2 
  Dec-2020 |         0          0          0          4 |         4 
  Jan-2021 |         0          0          0          3 |         3 
  Feb-2021 |         0          0          0          3 |         3 
  Mar-2021 |         0          0          0          8 |         8 
  Apr-2021 |         0          0          0          5 |         5 
  May-2021 |         0          0          0          2 |         2 
  Jun-2021 |         0          0          0          6 |         6 
  Jul-2021 |         0          0          0          6 |         6 
  Aug-2021 |         0          0          0          3 |         3 
  Sep-2021 |         0          0          0          7 |         7 
  Oct-2021 |         0          0          0          5 |         5 
  Nov-2021 |         0          1          0          4 |         5 
  Dec-2021 |         0          0          0          8 |         8 
  Jan-2022 |         0          0          0          2 |         2 
  Feb-2022 |         0          0          0          5 |         5 
  Mar-2022 |         0          0          0          3 |         3 
  Apr-2022 |         0          0          0          1 |         1 
  May-2022 |         0          0          0          4 |         4 
  Jun-2022 |         0          0          0          2 |         2 
  Jul-2022 |         0          0          0          6 |         6 
  Sep-2022 |         0          0          0          3 |         3 
  Oct-2022 |         0          0          0          4 |         4 
  Nov-2022 |         0          0          0          1 |         1 
  Dec-2022 |         0          0          0          3 |         3 
  Jan-2023 |         0          0          0          3 |         3 
  Feb-2023 |         0          0          0          6 |         6 
  Mar-2023 |         0          0          0          6 |         6 
  Apr-2023 |         0          0          0          3 |         3 
  May-2023 |         0          0          0          3 |         3 
  Jun-2023 |         0          0          0          4 |         4 
  Aug-2023 |         0          0          0          3 |         3 
  Sep-2023 |         0          0          0          3 |         3 
  Oct-2023 |         0          0          0          7 |         7 
  Nov-2023 |         0          0          0          5 |         5 
  Dec-2023 |         0          0          0          6 |         6 
  Jan-2024 |         0          0          0          5 |         5 
  Feb-2024 |         0          0          0          5 |         5 
  Mar-2024 |         0          0          0          2 |         2 
  Apr-2024 |         0          0          0          5 |         5 
  May-2024 |         0          0          0          3 |         3 
  Jun-2024 |         0          0          0          4 |         4 
  Jul-2024 |         0          0          0          3 |         3 
  Aug-2024 |         0          0          0          2 |         2 
  Sep-2024 |         0          0          0          7 |         7 
  Oct-2024 |         0          0          0          2 |         2 
  Nov-2024 |         0          0          0          4 |         4 
  Dec-2024 |         0          0          0          2 |         2 
  Jan-2025 |         0          0          0          1 |         1 
  Feb-2025 |         0          0          0          2 |         2 
  Mar-2025 |         0          0          0          2 |         2 
-----------+--------------------------------------------+----------
     Total |         1          1          1        407 |       410 

. 
. ***From RTT clock-stop data (only available for those with clock-stop date between May
>  2021 and May 2022)
. tab rtt_cl_ref_date, missing

rtt_cl_ref_ |
       date |      Freq.     Percent        Cum.
------------+-----------------------------------
  21feb1924 |          1        0.24        0.24
  06may1938 |          1        0.24        0.49
  10feb1951 |          1        0.24        0.73
  16feb1955 |          1        0.24        0.98
  08dec1968 |          1        0.24        1.22
  29aug1995 |          1        0.24        1.46
  25sep1998 |          1        0.24        1.71
  08jun2000 |          1        0.24        1.95
  07may2004 |          1        0.24        2.20
  25mar2009 |          1        0.24        2.44
  19nov2011 |          1        0.24        2.68
  03jul2012 |          1        0.24        2.93
  24sep2012 |          1        0.24        3.17
  13sep2013 |          1        0.24        3.41
  19jul2015 |          1        0.24        3.66
  22jan2018 |          1        0.24        3.90
  01dec2022 |          1        0.24        4.15
  14dec2022 |          1        0.24        4.39
  09apr2023 |          1        0.24        4.63
  26aug2023 |          1        0.24        4.88
          . |        390       95.12      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab mo_year_diagn rtt_cl_ref_date, missing

Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 21feb1924  06may1938  10feb1951  16feb1955  08dec1968 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         1          0          0          0          0 |         3 
  Feb-2018 |         0          0          1          0          0 |         7 
  Mar-2018 |         0          0          0          1          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          1          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          1 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 29aug1995  25sep1998  08jun2000  07may2004  25mar2009 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          1 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         1          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          1          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          1          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          1          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 19nov2011  03jul2012  24sep2012  13sep2013  19jul2015 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          1          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          1 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          1          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         1          0          0          1          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 22jan2018  01dec2022  14dec2022  09apr2023  26aug2023 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          1 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          1          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         1          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          1          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          1          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year | rtt_cl_ref
        of |   _date
 Diagnosis |         . |     Total
-----------+-----------+----------
  Apr-2016 |         4 |         4 
  May-2016 |         3 |         3 
  Jun-2016 |         5 |         5 
  Jul-2016 |         2 |         2 
  Aug-2016 |         2 |         2 
  Sep-2016 |         2 |         2 
  Oct-2016 |         7 |         8 
  Nov-2016 |         1 |         2 
  Dec-2016 |         2 |         2 
  Jan-2017 |         3 |         3 
  Feb-2017 |         2 |         2 
  Mar-2017 |         3 |         3 
  Apr-2017 |         2 |         2 
  May-2017 |         3 |         3 
  Jun-2017 |         3 |         3 
  Jul-2017 |         6 |         6 
  Aug-2017 |         5 |         5 
  Sep-2017 |         4 |         4 
  Oct-2017 |         1 |         2 
  Nov-2017 |         7 |         7 
  Dec-2017 |         3 |         3 
  Jan-2018 |         2 |         3 
  Feb-2018 |         6 |         7 
  Mar-2018 |         7 |         9 
  Apr-2018 |         4 |         4 
  May-2018 |         5 |         5 
  Jun-2018 |         2 |         2 
  Jul-2018 |         6 |         6 
  Aug-2018 |         4 |         4 
  Sep-2018 |         3 |         4 
  Oct-2018 |         4 |         4 
  Nov-2018 |         4 |         5 
  Dec-2018 |         3 |         3 
  Jan-2019 |         3 |         3 
  Feb-2019 |         4 |         4 
  Mar-2019 |         1 |         1 
  Apr-2019 |         4 |         5 
  May-2019 |         5 |         5 
  Jun-2019 |         6 |         6 
  Jul-2019 |         3 |         3 
  Aug-2019 |         3 |         3 
  Sep-2019 |         3 |         3 
  Oct-2019 |         1 |         3 
  Nov-2019 |         1 |         1 
  Dec-2019 |         4 |         4 
  Jan-2020 |         1 |         1 
  Feb-2020 |         9 |         9 
  Mar-2020 |         4 |         4 
  Apr-2020 |         2 |         2 
  May-2020 |         1 |         1 
  Jun-2020 |         6 |         6 
  Jul-2020 |         4 |         4 
  Aug-2020 |         2 |         2 
  Sep-2020 |         6 |         6 
  Oct-2020 |         6 |         6 
  Nov-2020 |         2 |         2 
  Dec-2020 |         4 |         4 
  Jan-2021 |         3 |         3 
  Feb-2021 |         3 |         3 
  Mar-2021 |         8 |         8 
  Apr-2021 |         5 |         5 
  May-2021 |         2 |         2 
  Jun-2021 |         6 |         6 
  Jul-2021 |         6 |         6 
  Aug-2021 |         3 |         3 
  Sep-2021 |         7 |         7 
  Oct-2021 |         5 |         5 
  Nov-2021 |         5 |         5 
  Dec-2021 |         8 |         8 
  Jan-2022 |         2 |         2 
  Feb-2022 |         5 |         5 
  Mar-2022 |         2 |         3 
  Apr-2022 |         1 |         1 
  May-2022 |         4 |         4 
  Jun-2022 |         2 |         2 
  Jul-2022 |         6 |         6 
  Sep-2022 |         2 |         3 
  Oct-2022 |         4 |         4 
  Nov-2022 |         1 |         1 
  Dec-2022 |         3 |         3 
  Jan-2023 |         3 |         3 
  Feb-2023 |         5 |         6 
  Mar-2023 |         6 |         6 
  Apr-2023 |         3 |         3 
  May-2023 |         1 |         3 
  Jun-2023 |         3 |         4 
  Aug-2023 |         3 |         3 
  Sep-2023 |         3 |         3 
  Oct-2023 |         7 |         7 
  Nov-2023 |         4 |         5 
  Dec-2023 |         6 |         6 
  Jan-2024 |         5 |         5 
  Feb-2024 |         5 |         5 
  Mar-2024 |         2 |         2 
  Apr-2024 |         5 |         5 
  May-2024 |         3 |         3 
  Jun-2024 |         4 |         4 
  Jul-2024 |         3 |         3 
  Aug-2024 |         2 |         2 
  Sep-2024 |         7 |         7 
  Oct-2024 |         2 |         2 
  Nov-2024 |         4 |         4 
  Dec-2024 |         2 |         2 
  Jan-2025 |         1 |         1 
  Feb-2025 |         2 |         2 
  Mar-2025 |         1 |         2 
-----------+-----------+----------
     Total |       390 |       410 

. tab mo_year_diagn rtt_cl_ref_date if rheum_appt!=., missing

Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 21feb1924  06may1938  10feb1951  16feb1955  08dec1968 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         1          0          0          0          0 |         3 
  Feb-2018 |         0          0          1          0          0 |         7 
  Mar-2018 |         0          0          0          1          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          1          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          1 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 29aug1995  25sep1998  08jun2000  07may2004  25mar2009 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          1 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         1          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          1          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          1          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          1          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 19nov2011  03jul2012  24sep2012  13sep2013  19jul2015 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          1          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          1 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          1          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         1          0          0          1          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_cl_ref_date
 Diagnosis | 22jan2018  01dec2022  14dec2022  09apr2023  26aug2023 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          1 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          1          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         1          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          1          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          1          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year | rtt_cl_ref
        of |   _date
 Diagnosis |         . |     Total
-----------+-----------+----------
  Apr-2016 |         4 |         4 
  May-2016 |         3 |         3 
  Jun-2016 |         5 |         5 
  Jul-2016 |         2 |         2 
  Aug-2016 |         2 |         2 
  Sep-2016 |         2 |         2 
  Oct-2016 |         7 |         8 
  Nov-2016 |         1 |         2 
  Dec-2016 |         2 |         2 
  Jan-2017 |         3 |         3 
  Feb-2017 |         2 |         2 
  Mar-2017 |         3 |         3 
  Apr-2017 |         2 |         2 
  May-2017 |         3 |         3 
  Jun-2017 |         3 |         3 
  Jul-2017 |         6 |         6 
  Aug-2017 |         5 |         5 
  Sep-2017 |         4 |         4 
  Oct-2017 |         1 |         2 
  Nov-2017 |         7 |         7 
  Dec-2017 |         3 |         3 
  Jan-2018 |         2 |         3 
  Feb-2018 |         6 |         7 
  Mar-2018 |         7 |         9 
  Apr-2018 |         4 |         4 
  May-2018 |         5 |         5 
  Jun-2018 |         2 |         2 
  Jul-2018 |         6 |         6 
  Aug-2018 |         4 |         4 
  Sep-2018 |         3 |         4 
  Oct-2018 |         4 |         4 
  Nov-2018 |         4 |         5 
  Dec-2018 |         3 |         3 
  Jan-2019 |         3 |         3 
  Feb-2019 |         4 |         4 
  Mar-2019 |         1 |         1 
  Apr-2019 |         4 |         5 
  May-2019 |         5 |         5 
  Jun-2019 |         6 |         6 
  Jul-2019 |         3 |         3 
  Aug-2019 |         3 |         3 
  Sep-2019 |         3 |         3 
  Oct-2019 |         1 |         3 
  Nov-2019 |         1 |         1 
  Dec-2019 |         4 |         4 
  Jan-2020 |         1 |         1 
  Feb-2020 |         9 |         9 
  Mar-2020 |         4 |         4 
  Apr-2020 |         2 |         2 
  May-2020 |         1 |         1 
  Jun-2020 |         6 |         6 
  Jul-2020 |         4 |         4 
  Aug-2020 |         2 |         2 
  Sep-2020 |         6 |         6 
  Oct-2020 |         6 |         6 
  Nov-2020 |         2 |         2 
  Dec-2020 |         4 |         4 
  Jan-2021 |         3 |         3 
  Feb-2021 |         3 |         3 
  Mar-2021 |         8 |         8 
  Apr-2021 |         5 |         5 
  May-2021 |         2 |         2 
  Jun-2021 |         6 |         6 
  Jul-2021 |         6 |         6 
  Aug-2021 |         3 |         3 
  Sep-2021 |         7 |         7 
  Oct-2021 |         5 |         5 
  Nov-2021 |         5 |         5 
  Dec-2021 |         8 |         8 
  Jan-2022 |         2 |         2 
  Feb-2022 |         5 |         5 
  Mar-2022 |         2 |         3 
  Apr-2022 |         1 |         1 
  May-2022 |         4 |         4 
  Jun-2022 |         2 |         2 
  Jul-2022 |         6 |         6 
  Sep-2022 |         2 |         3 
  Oct-2022 |         4 |         4 
  Nov-2022 |         1 |         1 
  Dec-2022 |         3 |         3 
  Jan-2023 |         3 |         3 
  Feb-2023 |         5 |         6 
  Mar-2023 |         6 |         6 
  Apr-2023 |         3 |         3 
  May-2023 |         1 |         3 
  Jun-2023 |         3 |         4 
  Aug-2023 |         3 |         3 
  Sep-2023 |         3 |         3 
  Oct-2023 |         7 |         7 
  Nov-2023 |         4 |         5 
  Dec-2023 |         6 |         6 
  Jan-2024 |         5 |         5 
  Feb-2024 |         5 |         5 
  Mar-2024 |         2 |         2 
  Apr-2024 |         5 |         5 
  May-2024 |         3 |         3 
  Jun-2024 |         4 |         4 
  Jul-2024 |         3 |         3 
  Aug-2024 |         2 |         2 
  Sep-2024 |         7 |         7 
  Oct-2024 |         2 |         2 
  Nov-2024 |         4 |         4 
  Dec-2024 |         2 |         2 
  Jan-2025 |         1 |         1 
  Feb-2025 |         2 |         2 
  Mar-2025 |         1 |         2 
-----------+-----------+----------
     Total |       390 |       410 

. tab rtt_cl_start_date, missing //check how this differs

rtt_cl_star |
     t_date |      Freq.     Percent        Cum.
------------+-----------------------------------
  31jul2016 |          1        0.24        0.24
  05nov2016 |          1        0.24        0.49
  08may2017 |          1        0.24        0.73
  08aug2017 |          1        0.24        0.98
  11aug2017 |          1        0.24        1.22
  26aug2017 |          1        0.24        1.46
  01mar2018 |          1        0.24        1.71
  02apr2018 |          1        0.24        1.95
  01jul2018 |          1        0.24        2.20
  03feb2019 |          1        0.24        2.44
  24jul2019 |          1        0.24        2.68
  10sep2019 |          1        0.24        2.93
  07oct2021 |          1        0.24        3.17
  11may2022 |          1        0.24        3.41
  23jul2022 |          1        0.24        3.66
  20oct2022 |          1        0.24        3.90
  05may2023 |          1        0.24        4.15
  22may2023 |          1        0.24        4.39
  14jul2023 |          1        0.24        4.63
  13feb2025 |          1        0.24        4.88
          . |        390       95.12      100.00
------------+-----------------------------------
      Total |        410      100.00

. 
. ***From RTT open pathway data (only available as a snapshot of those with open RTT pat
> hways as of May 2022)
. tab rtt_op_ref_date, missing

rtt_op_ref_ |
       date |      Freq.     Percent        Cum.
------------+-----------------------------------
  31may1931 |          1        0.24        0.24
  03jun1985 |          1        0.24        0.49
  21jan1998 |          1        0.24        0.73
  20feb2000 |          1        0.24        0.98
  12oct2001 |          1        0.24        1.22
  27jul2003 |          1        0.24        1.46
  27sep2008 |          1        0.24        1.71
  25mar2018 |          1        0.24        1.95
  21feb2023 |          1        0.24        2.20
  27feb2024 |          1        0.24        2.44
  23mar2024 |          1        0.24        2.68
  21oct2024 |          1        0.24        2.93
          . |        398       97.07      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab mo_year_diagn rtt_op_ref_date, missing

Month/Year |
        of |                    rtt_op_ref_date
 Diagnosis | 31may1931  03jun1985  21jan1998  20feb2000  12oct2001 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         1          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          1          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          1          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          1 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          1          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_op_ref_date
 Diagnosis | 27jul2003  27sep2008  25mar2018  21feb2023  27feb2024 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          1          0 |         3 
  Jun-2023 |         0          0          1          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         1          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          1          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          1 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |         rtt_op_ref_date
 Diagnosis | 23mar2024  21oct2024          . |     Total
-----------+---------------------------------+----------
  Apr-2016 |         0          0          4 |         4 
  May-2016 |         0          0          3 |         3 
  Jun-2016 |         0          0          5 |         5 
  Jul-2016 |         0          0          2 |         2 
  Aug-2016 |         0          0          2 |         2 
  Sep-2016 |         0          0          2 |         2 
  Oct-2016 |         0          0          8 |         8 
  Nov-2016 |         0          0          1 |         2 
  Dec-2016 |         0          0          2 |         2 
  Jan-2017 |         0          0          3 |         3 
  Feb-2017 |         0          0          2 |         2 
  Mar-2017 |         0          0          3 |         3 
  Apr-2017 |         0          0          2 |         2 
  May-2017 |         0          0          3 |         3 
  Jun-2017 |         0          0          3 |         3 
  Jul-2017 |         0          0          6 |         6 
  Aug-2017 |         0          0          5 |         5 
  Sep-2017 |         0          0          4 |         4 
  Oct-2017 |         0          0          2 |         2 
  Nov-2017 |         0          0          7 |         7 
  Dec-2017 |         0          0          3 |         3 
  Jan-2018 |         0          0          3 |         3 
  Feb-2018 |         0          0          7 |         7 
  Mar-2018 |         0          0          9 |         9 
  Apr-2018 |         0          0          4 |         4 
  May-2018 |         0          0          5 |         5 
  Jun-2018 |         0          0          2 |         2 
  Jul-2018 |         0          0          6 |         6 
  Aug-2018 |         0          0          4 |         4 
  Sep-2018 |         0          0          4 |         4 
  Oct-2018 |         0          0          4 |         4 
  Nov-2018 |         0          0          5 |         5 
  Dec-2018 |         0          0          3 |         3 
  Jan-2019 |         0          0          3 |         3 
  Feb-2019 |         0          0          4 |         4 
  Mar-2019 |         0          0          1 |         1 
  Apr-2019 |         0          0          5 |         5 
  May-2019 |         0          0          5 |         5 
  Jun-2019 |         0          0          6 |         6 
  Jul-2019 |         0          0          3 |         3 
  Aug-2019 |         0          0          3 |         3 
  Sep-2019 |         0          0          2 |         3 
  Oct-2019 |         0          0          3 |         3 
  Nov-2019 |         0          0          1 |         1 
  Dec-2019 |         0          0          3 |         4 
  Jan-2020 |         0          0          1 |         1 
  Feb-2020 |         0          0          9 |         9 
  Mar-2020 |         0          0          3 |         4 
  Apr-2020 |         0          0          2 |         2 
  May-2020 |         0          0          1 |         1 
  Jun-2020 |         0          0          6 |         6 
  Jul-2020 |         0          0          4 |         4 
  Aug-2020 |         0          0          2 |         2 
  Sep-2020 |         0          0          6 |         6 
  Oct-2020 |         0          0          6 |         6 
  Nov-2020 |         0          0          2 |         2 
  Dec-2020 |         0          0          4 |         4 
  Jan-2021 |         0          0          3 |         3 
  Feb-2021 |         0          0          3 |         3 
  Mar-2021 |         0          0          8 |         8 
  Apr-2021 |         0          0          5 |         5 
  May-2021 |         0          0          2 |         2 
  Jun-2021 |         0          0          6 |         6 
  Jul-2021 |         0          0          6 |         6 
  Aug-2021 |         0          0          3 |         3 
  Sep-2021 |         0          0          7 |         7 
  Oct-2021 |         0          0          5 |         5 
  Nov-2021 |         0          0          5 |         5 
  Dec-2021 |         0          0          8 |         8 
  Jan-2022 |         0          0          2 |         2 
  Feb-2022 |         0          0          5 |         5 
  Mar-2022 |         0          0          3 |         3 
  Apr-2022 |         0          0          1 |         1 
  May-2022 |         0          0          4 |         4 
  Jun-2022 |         0          0          2 |         2 
  Jul-2022 |         0          0          6 |         6 
  Sep-2022 |         0          0          3 |         3 
  Oct-2022 |         0          1          3 |         4 
  Nov-2022 |         1          0          0 |         1 
  Dec-2022 |         0          0          3 |         3 
  Jan-2023 |         0          0          3 |         3 
  Feb-2023 |         0          0          6 |         6 
  Mar-2023 |         0          0          6 |         6 
  Apr-2023 |         0          0          3 |         3 
  May-2023 |         0          0          2 |         3 
  Jun-2023 |         0          0          3 |         4 
  Aug-2023 |         0          0          3 |         3 
  Sep-2023 |         0          0          2 |         3 
  Oct-2023 |         0          0          7 |         7 
  Nov-2023 |         0          0          5 |         5 
  Dec-2023 |         0          0          6 |         6 
  Jan-2024 |         0          0          4 |         5 
  Feb-2024 |         0          0          5 |         5 
  Mar-2024 |         0          0          2 |         2 
  Apr-2024 |         0          0          5 |         5 
  May-2024 |         0          0          3 |         3 
  Jun-2024 |         0          0          4 |         4 
  Jul-2024 |         0          0          2 |         3 
  Aug-2024 |         0          0          2 |         2 
  Sep-2024 |         0          0          7 |         7 
  Oct-2024 |         0          0          2 |         2 
  Nov-2024 |         0          0          4 |         4 
  Dec-2024 |         0          0          1 |         2 
  Jan-2025 |         0          0          1 |         1 
  Feb-2025 |         0          0          2 |         2 
  Mar-2025 |         0          0          2 |         2 
-----------+---------------------------------+----------
     Total |         1          1        398 |       410 

. tab mo_year_diagn rtt_op_ref_date if rheum_appt!=., missing

Month/Year |
        of |                    rtt_op_ref_date
 Diagnosis | 31may1931  03jun1985  21jan1998  20feb2000  12oct2001 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         1          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          1          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          1          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          1 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          1          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                    rtt_op_ref_date
 Diagnosis | 27jul2003  27sep2008  25mar2018  21feb2023  27feb2024 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          1          0 |         3 
  Jun-2023 |         0          0          1          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         1          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          1          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          1 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |         rtt_op_ref_date
 Diagnosis | 23mar2024  21oct2024          . |     Total
-----------+---------------------------------+----------
  Apr-2016 |         0          0          4 |         4 
  May-2016 |         0          0          3 |         3 
  Jun-2016 |         0          0          5 |         5 
  Jul-2016 |         0          0          2 |         2 
  Aug-2016 |         0          0          2 |         2 
  Sep-2016 |         0          0          2 |         2 
  Oct-2016 |         0          0          8 |         8 
  Nov-2016 |         0          0          1 |         2 
  Dec-2016 |         0          0          2 |         2 
  Jan-2017 |         0          0          3 |         3 
  Feb-2017 |         0          0          2 |         2 
  Mar-2017 |         0          0          3 |         3 
  Apr-2017 |         0          0          2 |         2 
  May-2017 |         0          0          3 |         3 
  Jun-2017 |         0          0          3 |         3 
  Jul-2017 |         0          0          6 |         6 
  Aug-2017 |         0          0          5 |         5 
  Sep-2017 |         0          0          4 |         4 
  Oct-2017 |         0          0          2 |         2 
  Nov-2017 |         0          0          7 |         7 
  Dec-2017 |         0          0          3 |         3 
  Jan-2018 |         0          0          3 |         3 
  Feb-2018 |         0          0          7 |         7 
  Mar-2018 |         0          0          9 |         9 
  Apr-2018 |         0          0          4 |         4 
  May-2018 |         0          0          5 |         5 
  Jun-2018 |         0          0          2 |         2 
  Jul-2018 |         0          0          6 |         6 
  Aug-2018 |         0          0          4 |         4 
  Sep-2018 |         0          0          4 |         4 
  Oct-2018 |         0          0          4 |         4 
  Nov-2018 |         0          0          5 |         5 
  Dec-2018 |         0          0          3 |         3 
  Jan-2019 |         0          0          3 |         3 
  Feb-2019 |         0          0          4 |         4 
  Mar-2019 |         0          0          1 |         1 
  Apr-2019 |         0          0          5 |         5 
  May-2019 |         0          0          5 |         5 
  Jun-2019 |         0          0          6 |         6 
  Jul-2019 |         0          0          3 |         3 
  Aug-2019 |         0          0          3 |         3 
  Sep-2019 |         0          0          2 |         3 
  Oct-2019 |         0          0          3 |         3 
  Nov-2019 |         0          0          1 |         1 
  Dec-2019 |         0          0          3 |         4 
  Jan-2020 |         0          0          1 |         1 
  Feb-2020 |         0          0          9 |         9 
  Mar-2020 |         0          0          3 |         4 
  Apr-2020 |         0          0          2 |         2 
  May-2020 |         0          0          1 |         1 
  Jun-2020 |         0          0          6 |         6 
  Jul-2020 |         0          0          4 |         4 
  Aug-2020 |         0          0          2 |         2 
  Sep-2020 |         0          0          6 |         6 
  Oct-2020 |         0          0          6 |         6 
  Nov-2020 |         0          0          2 |         2 
  Dec-2020 |         0          0          4 |         4 
  Jan-2021 |         0          0          3 |         3 
  Feb-2021 |         0          0          3 |         3 
  Mar-2021 |         0          0          8 |         8 
  Apr-2021 |         0          0          5 |         5 
  May-2021 |         0          0          2 |         2 
  Jun-2021 |         0          0          6 |         6 
  Jul-2021 |         0          0          6 |         6 
  Aug-2021 |         0          0          3 |         3 
  Sep-2021 |         0          0          7 |         7 
  Oct-2021 |         0          0          5 |         5 
  Nov-2021 |         0          0          5 |         5 
  Dec-2021 |         0          0          8 |         8 
  Jan-2022 |         0          0          2 |         2 
  Feb-2022 |         0          0          5 |         5 
  Mar-2022 |         0          0          3 |         3 
  Apr-2022 |         0          0          1 |         1 
  May-2022 |         0          0          4 |         4 
  Jun-2022 |         0          0          2 |         2 
  Jul-2022 |         0          0          6 |         6 
  Sep-2022 |         0          0          3 |         3 
  Oct-2022 |         0          1          3 |         4 
  Nov-2022 |         1          0          0 |         1 
  Dec-2022 |         0          0          3 |         3 
  Jan-2023 |         0          0          3 |         3 
  Feb-2023 |         0          0          6 |         6 
  Mar-2023 |         0          0          6 |         6 
  Apr-2023 |         0          0          3 |         3 
  May-2023 |         0          0          2 |         3 
  Jun-2023 |         0          0          3 |         4 
  Aug-2023 |         0          0          3 |         3 
  Sep-2023 |         0          0          2 |         3 
  Oct-2023 |         0          0          7 |         7 
  Nov-2023 |         0          0          5 |         5 
  Dec-2023 |         0          0          6 |         6 
  Jan-2024 |         0          0          4 |         5 
  Feb-2024 |         0          0          5 |         5 
  Mar-2024 |         0          0          2 |         2 
  Apr-2024 |         0          0          5 |         5 
  May-2024 |         0          0          3 |         3 
  Jun-2024 |         0          0          4 |         4 
  Jul-2024 |         0          0          2 |         3 
  Aug-2024 |         0          0          2 |         2 
  Sep-2024 |         0          0          7 |         7 
  Oct-2024 |         0          0          2 |         2 
  Nov-2024 |         0          0          4 |         4 
  Dec-2024 |         0          0          1 |         2 
  Jan-2025 |         0          0          1 |         1 
  Feb-2025 |         0          0          2 |         2 
  Mar-2025 |         0          0          2 |         2 
-----------+---------------------------------+----------
     Total |         1          1        398 |       410 

. tab rtt_op_start_date, missing //check how this differs

rtt_op_star |
     t_date |      Freq.     Percent        Cum.
------------+-----------------------------------
  08nov2015 |          1        0.24        0.24
  07may2019 |          1        0.24        0.49
  15jul2019 |          1        0.24        0.73
  20jul2019 |          1        0.24        0.98
  15mar2022 |          1        0.24        1.22
  22jul2022 |          1        0.24        1.46
  30nov2022 |          1        0.24        1.71
  30mar2023 |          1        0.24        1.95
  18sep2023 |          1        0.24        2.20
  08nov2023 |          1        0.24        2.44
  22apr2024 |          1        0.24        2.68
  01aug2024 |          1        0.24        2.93
          . |        398       97.07      100.00
------------+-----------------------------------
      Total |        410      100.00

. 
. ***Combination of RTT clock-stop and open pathway
. gen rtt_ref_date = rtt_cl_ref_date
(390 missing values generated)

. replace rtt_ref_date = rtt_op_ref_date if rtt_cl_ref_date==. & rtt_op_ref_date!=. //ne
> ed to think how to handle duplicate pathways
(12 real changes made)

. tab rtt_ref_date, missing

rtt_ref_dat |
          e |      Freq.     Percent        Cum.
------------+-----------------------------------
     -13098 |          1        0.24        0.24
     -10442 |          1        0.24        0.49
      -7910 |          1        0.24        0.73
      -3247 |          1        0.24        0.98
      -1780 |          1        0.24        1.22
       3264 |          1        0.24        1.46
       9285 |          1        0.24        1.71
      13024 |          1        0.24        1.95
      13900 |          1        0.24        2.20
      14147 |          1        0.24        2.44
      14660 |          1        0.24        2.68
      14769 |          1        0.24        2.93
      15260 |          1        0.24        3.17
      15913 |          1        0.24        3.41
      16198 |          1        0.24        3.66
      17802 |          1        0.24        3.90
      17981 |          1        0.24        4.15
      18950 |          1        0.24        4.39
      19177 |          1        0.24        4.63
      19260 |          1        0.24        4.88
      19614 |          1        0.24        5.12
      20288 |          1        0.24        5.37
      21206 |          1        0.24        5.61
      21268 |          1        0.24        5.85
      22980 |          1        0.24        6.10
      22993 |          1        0.24        6.34
      23062 |          1        0.24        6.59
      23109 |          1        0.24        6.83
      23248 |          1        0.24        7.07
      23433 |          1        0.24        7.32
      23458 |          1        0.24        7.56
      23670 |          1        0.24        7.80
          . |        378       92.20      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab mo_year_diagn rtt_ref_date, missing

Month/Year |
        of |                      rtt_ref_date
 Diagnosis |    -13098     -10442      -7910      -3247      -1780 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          1          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         1          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          1          0 |         7 
  Mar-2018 |         0          0          0          0          1 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          1          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |      3264       9285      13024      13900      14147 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          1          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          1          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         1          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          1          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          1 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     14660      14769      15260      15913      16198 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         1          0          0          0          0 |         3 
  Oct-2019 |         0          1          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          1          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          1 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          1          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     17802      17981      18950      19177      19260 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          1          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          1          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          1 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          1          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         1          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     19614      20288      21206      21268      22980 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          1 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          1          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          1          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         1          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          1          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     22993      23062      23109      23248      23433 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          1          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         1          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          1          0          0          0 |         3 
  Jun-2023 |         0          0          1          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          1 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |           rtt_ref_date
 Diagnosis |     23458      23670          . |     Total
-----------+---------------------------------+----------
  Apr-2016 |         0          0          4 |         4 
  May-2016 |         0          0          3 |         3 
  Jun-2016 |         0          0          5 |         5 
  Jul-2016 |         0          0          2 |         2 
  Aug-2016 |         0          0          2 |         2 
  Sep-2016 |         0          0          2 |         2 
  Oct-2016 |         0          0          7 |         8 
  Nov-2016 |         0          0          0 |         2 
  Dec-2016 |         0          0          2 |         2 
  Jan-2017 |         0          0          3 |         3 
  Feb-2017 |         0          0          2 |         2 
  Mar-2017 |         0          0          3 |         3 
  Apr-2017 |         0          0          2 |         2 
  May-2017 |         0          0          3 |         3 
  Jun-2017 |         0          0          3 |         3 
  Jul-2017 |         0          0          6 |         6 
  Aug-2017 |         0          0          5 |         5 
  Sep-2017 |         0          0          4 |         4 
  Oct-2017 |         0          0          1 |         2 
  Nov-2017 |         0          0          7 |         7 
  Dec-2017 |         0          0          3 |         3 
  Jan-2018 |         0          0          2 |         3 
  Feb-2018 |         0          0          6 |         7 
  Mar-2018 |         0          0          7 |         9 
  Apr-2018 |         0          0          4 |         4 
  May-2018 |         0          0          5 |         5 
  Jun-2018 |         0          0          2 |         2 
  Jul-2018 |         0          0          6 |         6 
  Aug-2018 |         0          0          4 |         4 
  Sep-2018 |         0          0          3 |         4 
  Oct-2018 |         0          0          4 |         4 
  Nov-2018 |         0          0          4 |         5 
  Dec-2018 |         0          0          3 |         3 
  Jan-2019 |         0          0          3 |         3 
  Feb-2019 |         0          0          4 |         4 
  Mar-2019 |         0          0          1 |         1 
  Apr-2019 |         0          0          4 |         5 
  May-2019 |         0          0          5 |         5 
  Jun-2019 |         0          0          6 |         6 
  Jul-2019 |         0          0          3 |         3 
  Aug-2019 |         0          0          3 |         3 
  Sep-2019 |         0          0          2 |         3 
  Oct-2019 |         0          0          1 |         3 
  Nov-2019 |         0          0          1 |         1 
  Dec-2019 |         0          0          3 |         4 
  Jan-2020 |         0          0          1 |         1 
  Feb-2020 |         0          0          9 |         9 
  Mar-2020 |         0          0          3 |         4 
  Apr-2020 |         0          0          2 |         2 
  May-2020 |         0          0          1 |         1 
  Jun-2020 |         0          0          6 |         6 
  Jul-2020 |         0          0          4 |         4 
  Aug-2020 |         0          0          2 |         2 
  Sep-2020 |         0          0          6 |         6 
  Oct-2020 |         0          0          6 |         6 
  Nov-2020 |         0          0          2 |         2 
  Dec-2020 |         0          0          4 |         4 
  Jan-2021 |         0          0          3 |         3 
  Feb-2021 |         0          0          3 |         3 
  Mar-2021 |         0          0          8 |         8 
  Apr-2021 |         0          0          5 |         5 
  May-2021 |         0          0          2 |         2 
  Jun-2021 |         0          0          6 |         6 
  Jul-2021 |         0          0          6 |         6 
  Aug-2021 |         0          0          3 |         3 
  Sep-2021 |         0          0          7 |         7 
  Oct-2021 |         0          0          5 |         5 
  Nov-2021 |         0          0          5 |         5 
  Dec-2021 |         0          0          8 |         8 
  Jan-2022 |         0          0          2 |         2 
  Feb-2022 |         0          0          5 |         5 
  Mar-2022 |         0          0          2 |         3 
  Apr-2022 |         0          0          1 |         1 
  May-2022 |         0          0          4 |         4 
  Jun-2022 |         0          0          2 |         2 
  Jul-2022 |         0          0          6 |         6 
  Sep-2022 |         0          0          2 |         3 
  Oct-2022 |         0          1          3 |         4 
  Nov-2022 |         1          0          0 |         1 
  Dec-2022 |         0          0          3 |         3 
  Jan-2023 |         0          0          3 |         3 
  Feb-2023 |         0          0          5 |         6 
  Mar-2023 |         0          0          6 |         6 
  Apr-2023 |         0          0          3 |         3 
  May-2023 |         0          0          0 |         3 
  Jun-2023 |         0          0          2 |         4 
  Aug-2023 |         0          0          3 |         3 
  Sep-2023 |         0          0          2 |         3 
  Oct-2023 |         0          0          7 |         7 
  Nov-2023 |         0          0          4 |         5 
  Dec-2023 |         0          0          6 |         6 
  Jan-2024 |         0          0          4 |         5 
  Feb-2024 |         0          0          5 |         5 
  Mar-2024 |         0          0          2 |         2 
  Apr-2024 |         0          0          5 |         5 
  May-2024 |         0          0          3 |         3 
  Jun-2024 |         0          0          4 |         4 
  Jul-2024 |         0          0          2 |         3 
  Aug-2024 |         0          0          2 |         2 
  Sep-2024 |         0          0          7 |         7 
  Oct-2024 |         0          0          2 |         2 
  Nov-2024 |         0          0          4 |         4 
  Dec-2024 |         0          0          1 |         2 
  Jan-2025 |         0          0          1 |         1 
  Feb-2025 |         0          0          2 |         2 
  Mar-2025 |         0          0          1 |         2 
-----------+---------------------------------+----------
     Total |         1          1        378 |       410 

. tab mo_year_diagn rtt_ref_date if rheum_appt!=., missing

Month/Year |
        of |                      rtt_ref_date
 Diagnosis |    -13098     -10442      -7910      -3247      -1780 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          1          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         1          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          1          0 |         7 
  Mar-2018 |         0          0          0          0          1 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          1          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |      3264       9285      13024      13900      14147 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          1          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          1          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         1          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          1          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          1 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     14660      14769      15260      15913      16198 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         1          0          0          0          0 |         3 
  Oct-2019 |         0          1          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          1          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          1 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          1          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     17802      17981      18950      19177      19260 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          1          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          1          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          1 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          0          1          0          0 |         3 
  Jun-2023 |         0          0          0          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         1          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     19614      20288      21206      21268      22980 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          0          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          1 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          1          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         0          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          1          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         1          0          0          0          0 |         3 
  Jun-2023 |         0          0          0          1          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          0 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |                      rtt_ref_date
 Diagnosis |     22993      23062      23109      23248      23433 |     Total
-----------+-------------------------------------------------------+----------
  Apr-2016 |         0          0          0          0          0 |         4 
  May-2016 |         0          0          0          0          0 |         3 
  Jun-2016 |         0          0          0          0          0 |         5 
  Jul-2016 |         0          0          0          0          0 |         2 
  Aug-2016 |         0          0          0          0          0 |         2 
  Sep-2016 |         0          0          0          0          0 |         2 
  Oct-2016 |         0          0          0          1          0 |         8 
  Nov-2016 |         0          0          0          0          0 |         2 
  Dec-2016 |         0          0          0          0          0 |         2 
  Jan-2017 |         0          0          0          0          0 |         3 
  Feb-2017 |         0          0          0          0          0 |         2 
  Mar-2017 |         0          0          0          0          0 |         3 
  Apr-2017 |         0          0          0          0          0 |         2 
  May-2017 |         0          0          0          0          0 |         3 
  Jun-2017 |         0          0          0          0          0 |         3 
  Jul-2017 |         0          0          0          0          0 |         6 
  Aug-2017 |         0          0          0          0          0 |         5 
  Sep-2017 |         0          0          0          0          0 |         4 
  Oct-2017 |         0          0          0          0          0 |         2 
  Nov-2017 |         0          0          0          0          0 |         7 
  Dec-2017 |         0          0          0          0          0 |         3 
  Jan-2018 |         0          0          0          0          0 |         3 
  Feb-2018 |         0          0          0          0          0 |         7 
  Mar-2018 |         0          0          0          0          0 |         9 
  Apr-2018 |         0          0          0          0          0 |         4 
  May-2018 |         0          0          0          0          0 |         5 
  Jun-2018 |         0          0          0          0          0 |         2 
  Jul-2018 |         0          0          0          0          0 |         6 
  Aug-2018 |         0          0          0          0          0 |         4 
  Sep-2018 |         0          0          0          0          0 |         4 
  Oct-2018 |         0          0          0          0          0 |         4 
  Nov-2018 |         0          0          0          0          0 |         5 
  Dec-2018 |         0          0          0          0          0 |         3 
  Jan-2019 |         0          0          0          0          0 |         3 
  Feb-2019 |         0          0          0          0          0 |         4 
  Mar-2019 |         0          0          0          0          0 |         1 
  Apr-2019 |         1          0          0          0          0 |         5 
  May-2019 |         0          0          0          0          0 |         5 
  Jun-2019 |         0          0          0          0          0 |         6 
  Jul-2019 |         0          0          0          0          0 |         3 
  Aug-2019 |         0          0          0          0          0 |         3 
  Sep-2019 |         0          0          0          0          0 |         3 
  Oct-2019 |         0          0          0          0          0 |         3 
  Nov-2019 |         0          0          0          0          0 |         1 
  Dec-2019 |         0          0          0          0          0 |         4 
  Jan-2020 |         0          0          0          0          0 |         1 
  Feb-2020 |         0          0          0          0          0 |         9 
  Mar-2020 |         0          0          0          0          0 |         4 
  Apr-2020 |         0          0          0          0          0 |         2 
  May-2020 |         0          0          0          0          0 |         1 
  Jun-2020 |         0          0          0          0          0 |         6 
  Jul-2020 |         0          0          0          0          0 |         4 
  Aug-2020 |         0          0          0          0          0 |         2 
  Sep-2020 |         0          0          0          0          0 |         6 
  Oct-2020 |         0          0          0          0          0 |         6 
  Nov-2020 |         0          0          0          0          0 |         2 
  Dec-2020 |         0          0          0          0          0 |         4 
  Jan-2021 |         0          0          0          0          0 |         3 
  Feb-2021 |         0          0          0          0          0 |         3 
  Mar-2021 |         0          0          0          0          0 |         8 
  Apr-2021 |         0          0          0          0          0 |         5 
  May-2021 |         0          0          0          0          0 |         2 
  Jun-2021 |         0          0          0          0          0 |         6 
  Jul-2021 |         0          0          0          0          0 |         6 
  Aug-2021 |         0          0          0          0          0 |         3 
  Sep-2021 |         0          0          0          0          0 |         7 
  Oct-2021 |         0          0          0          0          0 |         5 
  Nov-2021 |         0          0          0          0          0 |         5 
  Dec-2021 |         0          0          0          0          0 |         8 
  Jan-2022 |         0          0          0          0          0 |         2 
  Feb-2022 |         0          0          0          0          0 |         5 
  Mar-2022 |         0          0          0          0          0 |         3 
  Apr-2022 |         0          0          0          0          0 |         1 
  May-2022 |         0          0          0          0          0 |         4 
  Jun-2022 |         0          0          0          0          0 |         2 
  Jul-2022 |         0          0          0          0          0 |         6 
  Sep-2022 |         0          0          0          0          0 |         3 
  Oct-2022 |         0          0          0          0          0 |         4 
  Nov-2022 |         0          0          0          0          0 |         1 
  Dec-2022 |         0          0          0          0          0 |         3 
  Jan-2023 |         0          0          0          0          0 |         3 
  Feb-2023 |         0          0          0          0          0 |         6 
  Mar-2023 |         0          0          0          0          0 |         6 
  Apr-2023 |         0          0          0          0          0 |         3 
  May-2023 |         0          1          0          0          0 |         3 
  Jun-2023 |         0          0          1          0          0 |         4 
  Aug-2023 |         0          0          0          0          0 |         3 
  Sep-2023 |         0          0          0          0          0 |         3 
  Oct-2023 |         0          0          0          0          0 |         7 
  Nov-2023 |         0          0          0          0          0 |         5 
  Dec-2023 |         0          0          0          0          0 |         6 
  Jan-2024 |         0          0          0          0          0 |         5 
  Feb-2024 |         0          0          0          0          0 |         5 
  Mar-2024 |         0          0          0          0          0 |         2 
  Apr-2024 |         0          0          0          0          0 |         5 
  May-2024 |         0          0          0          0          0 |         3 
  Jun-2024 |         0          0          0          0          0 |         4 
  Jul-2024 |         0          0          0          0          1 |         3 
  Aug-2024 |         0          0          0          0          0 |         2 
  Sep-2024 |         0          0          0          0          0 |         7 
  Oct-2024 |         0          0          0          0          0 |         2 
  Nov-2024 |         0          0          0          0          0 |         4 
  Dec-2024 |         0          0          0          0          0 |         2 
  Jan-2025 |         0          0          0          0          0 |         1 
  Feb-2025 |         0          0          0          0          0 |         2 
  Mar-2025 |         0          0          0          0          0 |         2 
-----------+-------------------------------------------------------+----------
     Total |         1          1          1          1          1 |       410 


Month/Year |
        of |           rtt_ref_date
 Diagnosis |     23458      23670          . |     Total
-----------+---------------------------------+----------
  Apr-2016 |         0          0          4 |         4 
  May-2016 |         0          0          3 |         3 
  Jun-2016 |         0          0          5 |         5 
  Jul-2016 |         0          0          2 |         2 
  Aug-2016 |         0          0          2 |         2 
  Sep-2016 |         0          0          2 |         2 
  Oct-2016 |         0          0          7 |         8 
  Nov-2016 |         0          0          0 |         2 
  Dec-2016 |         0          0          2 |         2 
  Jan-2017 |         0          0          3 |         3 
  Feb-2017 |         0          0          2 |         2 
  Mar-2017 |         0          0          3 |         3 
  Apr-2017 |         0          0          2 |         2 
  May-2017 |         0          0          3 |         3 
  Jun-2017 |         0          0          3 |         3 
  Jul-2017 |         0          0          6 |         6 
  Aug-2017 |         0          0          5 |         5 
  Sep-2017 |         0          0          4 |         4 
  Oct-2017 |         0          0          1 |         2 
  Nov-2017 |         0          0          7 |         7 
  Dec-2017 |         0          0          3 |         3 
  Jan-2018 |         0          0          2 |         3 
  Feb-2018 |         0          0          6 |         7 
  Mar-2018 |         0          0          7 |         9 
  Apr-2018 |         0          0          4 |         4 
  May-2018 |         0          0          5 |         5 
  Jun-2018 |         0          0          2 |         2 
  Jul-2018 |         0          0          6 |         6 
  Aug-2018 |         0          0          4 |         4 
  Sep-2018 |         0          0          3 |         4 
  Oct-2018 |         0          0          4 |         4 
  Nov-2018 |         0          0          4 |         5 
  Dec-2018 |         0          0          3 |         3 
  Jan-2019 |         0          0          3 |         3 
  Feb-2019 |         0          0          4 |         4 
  Mar-2019 |         0          0          1 |         1 
  Apr-2019 |         0          0          4 |         5 
  May-2019 |         0          0          5 |         5 
  Jun-2019 |         0          0          6 |         6 
  Jul-2019 |         0          0          3 |         3 
  Aug-2019 |         0          0          3 |         3 
  Sep-2019 |         0          0          2 |         3 
  Oct-2019 |         0          0          1 |         3 
  Nov-2019 |         0          0          1 |         1 
  Dec-2019 |         0          0          3 |         4 
  Jan-2020 |         0          0          1 |         1 
  Feb-2020 |         0          0          9 |         9 
  Mar-2020 |         0          0          3 |         4 
  Apr-2020 |         0          0          2 |         2 
  May-2020 |         0          0          1 |         1 
  Jun-2020 |         0          0          6 |         6 
  Jul-2020 |         0          0          4 |         4 
  Aug-2020 |         0          0          2 |         2 
  Sep-2020 |         0          0          6 |         6 
  Oct-2020 |         0          0          6 |         6 
  Nov-2020 |         0          0          2 |         2 
  Dec-2020 |         0          0          4 |         4 
  Jan-2021 |         0          0          3 |         3 
  Feb-2021 |         0          0          3 |         3 
  Mar-2021 |         0          0          8 |         8 
  Apr-2021 |         0          0          5 |         5 
  May-2021 |         0          0          2 |         2 
  Jun-2021 |         0          0          6 |         6 
  Jul-2021 |         0          0          6 |         6 
  Aug-2021 |         0          0          3 |         3 
  Sep-2021 |         0          0          7 |         7 
  Oct-2021 |         0          0          5 |         5 
  Nov-2021 |         0          0          5 |         5 
  Dec-2021 |         0          0          8 |         8 
  Jan-2022 |         0          0          2 |         2 
  Feb-2022 |         0          0          5 |         5 
  Mar-2022 |         0          0          2 |         3 
  Apr-2022 |         0          0          1 |         1 
  May-2022 |         0          0          4 |         4 
  Jun-2022 |         0          0          2 |         2 
  Jul-2022 |         0          0          6 |         6 
  Sep-2022 |         0          0          2 |         3 
  Oct-2022 |         0          1          3 |         4 
  Nov-2022 |         1          0          0 |         1 
  Dec-2022 |         0          0          3 |         3 
  Jan-2023 |         0          0          3 |         3 
  Feb-2023 |         0          0          5 |         6 
  Mar-2023 |         0          0          6 |         6 
  Apr-2023 |         0          0          3 |         3 
  May-2023 |         0          0          0 |         3 
  Jun-2023 |         0          0          2 |         4 
  Aug-2023 |         0          0          3 |         3 
  Sep-2023 |         0          0          2 |         3 
  Oct-2023 |         0          0          7 |         7 
  Nov-2023 |         0          0          4 |         5 
  Dec-2023 |         0          0          6 |         6 
  Jan-2024 |         0          0          4 |         5 
  Feb-2024 |         0          0          5 |         5 
  Mar-2024 |         0          0          2 |         2 
  Apr-2024 |         0          0          5 |         5 
  May-2024 |         0          0          3 |         3 
  Jun-2024 |         0          0          4 |         4 
  Jul-2024 |         0          0          2 |         3 
  Aug-2024 |         0          0          2 |         2 
  Sep-2024 |         0          0          7 |         7 
  Oct-2024 |         0          0          2 |         2 
  Nov-2024 |         0          0          4 |         4 
  Dec-2024 |         0          0          1 |         2 
  Jan-2025 |         0          0          1 |         1 
  Feb-2025 |         0          0          2 |         2 
  Mar-2025 |         0          0          1 |         2 
-----------+---------------------------------+----------
     Total |         1          1        378 |       410 

. 
. ***From clinical events (Nb. low capture of coded rheumatology referrals in clinical e
> vents at present)
. tab rheum_ref_gp_preappt, missing //last rheum referral in the 2 years before rheumato
> logy outpatient (requires rheum appt to have been present)

rheum_ref_g |
  p_preappt |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        410      100.00      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab rheum_ref_gp_preappt if rheum_appt!=0 & rheum_ref_gp_preappt_date<=rheum_appt_date
> , missing  //last rheum referral in the 2 years before rheumatology outpatient, assumi
> ng ref date before rheum appt date (should be accounted for by Python code)
no observations

. tab rheum_ref_gp_precode, missing //last rheum referral in the 2 years before IA code 

rheum_ref_g |
  p_precode |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        409       99.76       99.76
          1 |          1        0.24      100.00
------------+-----------------------------------
      Total |        410      100.00

. gen referral_rheum_comb_date = rheum_ref_gp_preappt_date if rheum_ref_gp_preappt_date!
> =.
(410 missing values generated)

. replace referral_rheum_comb_date = rheum_ref_gp_precode_date if rheum_ref_gp_preappt_d
> ate==. & rheum_ref_gp_precode_date!=. //combination of the two above
(1 real change made)

. format %td referral_rheum_comb_date

. 
. ***From GP appointments (proxy)
. tab last_gp_refrheum, missing //proportion with last GP appointment in 2 years before 
> rheum referral (pre-rheum appt); requires there to have been a rheum referral before a
>  rheum appt

last_gp_ref |
      rheum |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        410      100.00      100.00
------------+-----------------------------------
      Total |        410      100.00

. 
. gen last_gp_prerheum_12m=last_gp_prerheum if rheum_appt_date!=. & rheum_appt_date<=(da
> te("$end_date", "DMY")-365)
(407 missing values generated)

. recode last_gp_prerheum_12m .=0
(407 changes made to last_gp_prerheum_12m)

. lab var last_gp_prerheum_12m "GP and rheum appt 12m+"

. lab define last_gp_prerheum_12m 0 "No" 1 "Yes", modify

. lab val last_gp_prerheum_12m last_gp_prerheum_12m

. 
. gen last_gp_prerheum_6m=last_gp_prerheum if rheum_appt_date!=. & rheum_appt_date<=(dat
> e("$end_date", "DMY")-180)
(407 missing values generated)

. recode last_gp_prerheum_6m .=0
(407 changes made to last_gp_prerheum_6m)

. lab var last_gp_prerheum_6m "GP and rheum appt 6m+"

. lab define last_gp_prerheum_6m 0 "No" 1 "Yes", modify

. lab val last_gp_prerheum_6m last_gp_prerheum_6m

. 
. tab last_gp_refcode, missing //last GP appointment before rheum ref (pre-EIA code ref)
> ; requires there to have been a rheum referral before an EIA code (i.e. rheum appt cou
> ld have been missing)

last_gp_ref |
       code |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        410      100.00      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab last_gp_prerheum, missing //last GP appointment before rheum appt; requires there 
> to have been a rheum appt before and EIA code

last_gp_pre |
      rheum |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        410      100.00      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab last_gp_precode, missing //last GP appointment before EIA code

last_gp_pre |
       code |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        379       92.44       92.44
          1 |         31        7.56      100.00
------------+-----------------------------------
      Total |        410      100.00

. 
. ****All appts in the correct order (using clinical events referrals)
. gen all_appts=1 if last_gp_refrheum==1 & rheum_ref_gp_preappt==1 & rheum_appt==1 & (la
> st_gp_refrheum_date<=rheum_ref_gp_preappt_date) & (rheum_ref_gp_preappt_date<=rheum_ap
> pt_date)
(410 missing values generated)

. recode all_appts .=0
(410 changes made to all_appts)

. tab all_appts, missing //proportion who had a last gp appt, then rheum ref, then rheum
>  appt

  all_appts |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        410      100.00      100.00
------------+-----------------------------------
      Total |        410      100.00

. 
. **Define who qualifies in terms of appointments and referrals ========================
> =======*/
. 
. **AMEND THE BELOW ONCE REFERRAL DATE KNOWN
. 
. **Proportion of patients with at least 6 or 12 months of GP registration after diagnos
> tic code
. rename has_6m_follow_up has_6m_follow_up_s 

. gen has_6m_follow_up=1 if has_6m_follow_up_s=="T"
(407 missing values generated)

. recode has_6m_follow_up .=0
(407 changes made to has_6m_follow_up)

. drop has_6m_follow_up_s

. tab has_6m_follow_up

has_6m_foll |
      ow_up |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        407       99.27       99.27
          1 |          3        0.73      100.00
------------+-----------------------------------
      Total |        410      100.00

. rename has_12m_follow_up has_12m_follow_up_s 

. gen has_12m_follow_up=1 if has_12m_follow_up_s=="T"
(407 missing values generated)

. recode has_12m_follow_up .=0
(407 changes made to has_12m_follow_up)

. drop has_12m_follow_up_s

. tab has_12m_follow_up 

has_12m_fol |
     low_up |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        407       99.27       99.27
          1 |          3        0.73      100.00
------------+-----------------------------------
      Total |        410      100.00

. tab mo_year_diagn has_6m_follow_up

Month/Year |
        of |   has_6m_follow_up
 Diagnosis |         0          1 |     Total
-----------+----------------------+----------
  Apr-2016 |         4          0 |         4 
  May-2016 |         3          0 |         3 
  Jun-2016 |         5          0 |         5 
  Jul-2016 |         2          0 |         2 
  Aug-2016 |         2          0 |         2 
  Sep-2016 |         2          0 |         2 
  Oct-2016 |         8          0 |         8 
  Nov-2016 |         2          0 |         2 
  Dec-2016 |         2          0 |         2 
  Jan-2017 |         3          0 |         3 
  Feb-2017 |         2          0 |         2 
  Mar-2017 |         3          0 |         3 
  Apr-2017 |         2          0 |         2 
  May-2017 |         3          0 |         3 
  Jun-2017 |         3          0 |         3 
  Jul-2017 |         6          0 |         6 
  Aug-2017 |         5          0 |         5 
  Sep-2017 |         4          0 |         4 
  Oct-2017 |         2          0 |         2 
  Nov-2017 |         7          0 |         7 
  Dec-2017 |         3          0 |         3 
  Jan-2018 |         3          0 |         3 
  Feb-2018 |         7          0 |         7 
  Mar-2018 |         8          1 |         9 
  Apr-2018 |         4          0 |         4 
  May-2018 |         5          0 |         5 
  Jun-2018 |         2          0 |         2 
  Jul-2018 |         6          0 |         6 
  Aug-2018 |         4          0 |         4 
  Sep-2018 |         4          0 |         4 
  Oct-2018 |         4          0 |         4 
  Nov-2018 |         5          0 |         5 
  Dec-2018 |         3          0 |         3 
  Jan-2019 |         3          0 |         3 
  Feb-2019 |         4          0 |         4 
  Mar-2019 |         1          0 |         1 
  Apr-2019 |         5          0 |         5 
  May-2019 |         5          0 |         5 
  Jun-2019 |         6          0 |         6 
  Jul-2019 |         3          0 |         3 
  Aug-2019 |         2          1 |         3 
  Sep-2019 |         3          0 |         3 
  Oct-2019 |         3          0 |         3 
  Nov-2019 |         1          0 |         1 
  Dec-2019 |         4          0 |         4 
  Jan-2020 |         1          0 |         1 
  Feb-2020 |         9          0 |         9 
  Mar-2020 |         4          0 |         4 
  Apr-2020 |         2          0 |         2 
  May-2020 |         1          0 |         1 
  Jun-2020 |         6          0 |         6 
  Jul-2020 |         4          0 |         4 
  Aug-2020 |         2          0 |         2 
  Sep-2020 |         6          0 |         6 
  Oct-2020 |         6          0 |         6 
  Nov-2020 |         2          0 |         2 
  Dec-2020 |         4          0 |         4 
  Jan-2021 |         3          0 |         3 
  Feb-2021 |         3          0 |         3 
  Mar-2021 |         8          0 |         8 
  Apr-2021 |         5          0 |         5 
  May-2021 |         2          0 |         2 
  Jun-2021 |         6          0 |         6 
  Jul-2021 |         6          0 |         6 
  Aug-2021 |         3          0 |         3 
  Sep-2021 |         7          0 |         7 
  Oct-2021 |         5          0 |         5 
  Nov-2021 |         4          1 |         5 
  Dec-2021 |         8          0 |         8 
  Jan-2022 |         2          0 |         2 
  Feb-2022 |         5          0 |         5 
  Mar-2022 |         3          0 |         3 
  Apr-2022 |         1          0 |         1 
  May-2022 |         4          0 |         4 
  Jun-2022 |         2          0 |         2 
  Jul-2022 |         6          0 |         6 
  Sep-2022 |         3          0 |         3 
  Oct-2022 |         4          0 |         4 
  Nov-2022 |         1          0 |         1 
  Dec-2022 |         3          0 |         3 
  Jan-2023 |         3          0 |         3 
  Feb-2023 |         6          0 |         6 
  Mar-2023 |         6          0 |         6 
  Apr-2023 |         3          0 |         3 
  May-2023 |         3          0 |         3 
  Jun-2023 |         4          0 |         4 
  Aug-2023 |         3          0 |         3 
  Sep-2023 |         3          0 |         3 
  Oct-2023 |         7          0 |         7 
  Nov-2023 |         5          0 |         5 
  Dec-2023 |         6          0 |         6 
  Jan-2024 |         5          0 |         5 
  Feb-2024 |         5          0 |         5 
  Mar-2024 |         2          0 |         2 
  Apr-2024 |         5          0 |         5 
  May-2024 |         3          0 |         3 
  Jun-2024 |         4          0 |         4 
  Jul-2024 |         3          0 |         3 
  Aug-2024 |         2          0 |         2 
  Sep-2024 |         7          0 |         7 
  Oct-2024 |         2          0 |         2 
  Nov-2024 |         4          0 |         4 
  Dec-2024 |         2          0 |         2 
  Jan-2025 |         1          0 |         1 
  Feb-2025 |         2          0 |         2 
  Mar-2025 |         2          0 |         2 
-----------+----------------------+----------
     Total |       407          3 |       410 

. tab mo_year_diagn has_12m_follow_up

Month/Year |
        of |   has_12m_follow_up
 Diagnosis |         0          1 |     Total
-----------+----------------------+----------
  Apr-2016 |         4          0 |         4 
  May-2016 |         3          0 |         3 
  Jun-2016 |         5          0 |         5 
  Jul-2016 |         2          0 |         2 
  Aug-2016 |         2          0 |         2 
  Sep-2016 |         2          0 |         2 
  Oct-2016 |         8          0 |         8 
  Nov-2016 |         2          0 |         2 
  Dec-2016 |         2          0 |         2 
  Jan-2017 |         3          0 |         3 
  Feb-2017 |         2          0 |         2 
  Mar-2017 |         3          0 |         3 
  Apr-2017 |         2          0 |         2 
  May-2017 |         3          0 |         3 
  Jun-2017 |         3          0 |         3 
  Jul-2017 |         6          0 |         6 
  Aug-2017 |         5          0 |         5 
  Sep-2017 |         4          0 |         4 
  Oct-2017 |         2          0 |         2 
  Nov-2017 |         7          0 |         7 
  Dec-2017 |         3          0 |         3 
  Jan-2018 |         3          0 |         3 
  Feb-2018 |         7          0 |         7 
  Mar-2018 |         8          1 |         9 
  Apr-2018 |         4          0 |         4 
  May-2018 |         5          0 |         5 
  Jun-2018 |         2          0 |         2 
  Jul-2018 |         6          0 |         6 
  Aug-2018 |         4          0 |         4 
  Sep-2018 |         4          0 |         4 
  Oct-2018 |         4          0 |         4 
  Nov-2018 |         5          0 |         5 
  Dec-2018 |         3          0 |         3 
  Jan-2019 |         3          0 |         3 
  Feb-2019 |         4          0 |         4 
  Mar-2019 |         1          0 |         1 
  Apr-2019 |         5          0 |         5 
  May-2019 |         5          0 |         5 
  Jun-2019 |         6          0 |         6 
  Jul-2019 |         3          0 |         3 
  Aug-2019 |         2          1 |         3 
  Sep-2019 |         3          0 |         3 
  Oct-2019 |         3          0 |         3 
  Nov-2019 |         1          0 |         1 
  Dec-2019 |         4          0 |         4 
  Jan-2020 |         1          0 |         1 
  Feb-2020 |         9          0 |         9 
  Mar-2020 |         4          0 |         4 
  Apr-2020 |         2          0 |         2 
  May-2020 |         1          0 |         1 
  Jun-2020 |         6          0 |         6 
  Jul-2020 |         4          0 |         4 
  Aug-2020 |         2          0 |         2 
  Sep-2020 |         6          0 |         6 
  Oct-2020 |         6          0 |         6 
  Nov-2020 |         2          0 |         2 
  Dec-2020 |         4          0 |         4 
  Jan-2021 |         3          0 |         3 
  Feb-2021 |         3          0 |         3 
  Mar-2021 |         8          0 |         8 
  Apr-2021 |         5          0 |         5 
  May-2021 |         2          0 |         2 
  Jun-2021 |         6          0 |         6 
  Jul-2021 |         6          0 |         6 
  Aug-2021 |         3          0 |         3 
  Sep-2021 |         7          0 |         7 
  Oct-2021 |         5          0 |         5 
  Nov-2021 |         4          1 |         5 
  Dec-2021 |         8          0 |         8 
  Jan-2022 |         2          0 |         2 
  Feb-2022 |         5          0 |         5 
  Mar-2022 |         3          0 |         3 
  Apr-2022 |         1          0 |         1 
  May-2022 |         4          0 |         4 
  Jun-2022 |         2          0 |         2 
  Jul-2022 |         6          0 |         6 
  Sep-2022 |         3          0 |         3 
  Oct-2022 |         4          0 |         4 
  Nov-2022 |         1          0 |         1 
  Dec-2022 |         3          0 |         3 
  Jan-2023 |         3          0 |         3 
  Feb-2023 |         6          0 |         6 
  Mar-2023 |         6          0 |         6 
  Apr-2023 |         3          0 |         3 
  May-2023 |         3          0 |         3 
  Jun-2023 |         4          0 |         4 
  Aug-2023 |         3          0 |         3 
  Sep-2023 |         3          0 |         3 
  Oct-2023 |         7          0 |         7 
  Nov-2023 |         5          0 |         5 
  Dec-2023 |         6          0 |         6 
  Jan-2024 |         5          0 |         5 
  Feb-2024 |         5          0 |         5 
  Mar-2024 |         2          0 |         2 
  Apr-2024 |         5          0 |         5 
  May-2024 |         3          0 |         3 
  Jun-2024 |         4          0 |         4 
  Jul-2024 |         3          0 |         3 
  Aug-2024 |         2          0 |         2 
  Sep-2024 |         7          0 |         7 
  Oct-2024 |         2          0 |         2 
  Nov-2024 |         4          0 |         4 
  Dec-2024 |         2          0 |         2 
  Jan-2025 |         1          0 |         1 
  Feb-2025 |         2          0 |         2 
  Mar-2025 |         2          0 |         2 
-----------+----------------------+----------
     Total |       407          3 |       410 

. 
. *For appt and csDMARD analyses, all patients must have 1) rheum appt 2) GP appt before
>  rheum appt 3) 12m follow-up after rheum appt 4) 12m of registration after diagnostic 
> code
. gen has_6m_post_appt=1 if rheum_appt_date!=. & rheum_appt_date<=(date("$end_date", "DM
> Y")-180) & has_6m_follow_up==1 & last_gp_prerheum==1
(410 missing values generated)

. recode has_6m_post_appt .=0
(410 changes made to has_6m_post_appt)

. lab var has_6m_post_appt "GP/rheum/registration 6m+"

. lab define has_6m_post_appt 0 "No" 1 "Yes", modify

. lab val has_6m_post_appt has_6m_post_appt

. tab has_6m_post_appt

GP/rheum/re |
 gistration |
        6m+ |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        410      100.00      100.00
------------+-----------------------------------
      Total |        410      100.00

. 
. gen has_12m_post_appt=1 if rheum_appt_date!=. & rheum_appt_date<=(date("$end_date", "D
> MY")-365) & has_12m_follow_up==1 & last_gp_prerheum==1
(410 missing values generated)

. recode has_12m_post_appt .=0
(410 changes made to has_12m_post_appt)

. lab var has_12m_post_appt "GP/rheum/registration 12m+"

. lab define has_12m_post_appt 0 "No" 1 "Yes", modify

. lab val has_12m_post_appt has_12m_post_appt

. tab has_12m_post_appt

GP/rheum/re |
 gistration |
       12m+ |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |        410      100.00      100.00
------------+-----------------------------------
      Total |        410      100.00

. 
. *Time to rheum referral =============================================*/
. 
. **AMEND THE BELOW ONCE REFERRAL DATE KNOWN
. 
. **Time from last GP appt to rheum ref before rheum appt (i.e. if appts are present and
>  in correct time order)
. gen time_gp_rheum_ref_appt = (rheum_ref_GP_preappt_date - last_gp_refrheum_date) if rh
> eum_ref_gp_preappt_date!=. & last_gp_refrheum_date!=. & rheum_appt_date!=. & (rheum_re
> f_gp_preappt_date>=last_gp_refrheum_date) & (rheum_ref_gp_preappt_date<=rheum_appt_dat
> e)
rheum_ref_GP_preappt_date not found
r(111);

end of do-file

r(111);

. exit, clear
